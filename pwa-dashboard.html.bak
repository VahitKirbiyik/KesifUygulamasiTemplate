<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWA Test Dashboard - KesifApp | Progressive Web App Test Sonu√ßlarƒ±</title>
    <meta name="description" content="KesifApp PWA test dashboard'u - Otomatik PWA test sonu√ßlarƒ±, performans metrikleri ve iyile≈ütirme √∂nerileri">
    <meta name="keywords" content="PWA, Progressive Web App, Test Dashboard, Performance Metrics, Web App Testing">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        .metric-card {
            text-align: center;
            padding: 20px;
            cursor: help;
        }
        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .metric-label {
            color: #6c757d;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .status-passed { color: #28a745; }
        .status-failed { color: #dc3545; }
        .status-skipped { color: #ffc107; }
        .progress-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto;
            cursor: help;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .info-tooltip {
            cursor: help;
            border-bottom: 1px dotted #6c757d;
        }
        .badge {
            font-size: 0.75rem;
        }
        .table th {
            background-color: #f8f9fa;
            font-weight: 600;
            border-top: none;
        }
        .alert-info {
            background-color: #e3f2fd;
            border-color: #bbdefb;
            color: #0d47a1;
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <!-- Dashboard Ba≈ülƒ±ƒüƒ± ve Bilgilendirme -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h1 class="card-title mb-2">
                            <i class="fas fa-mobile-alt me-2"></i>
                            PWA Test Dashboard - KesifApp
                            <small class="badge bg-light text-dark ms-2" title="Test-PWA.ps1 v4.0 ile olu≈üturulmu≈ütur">v4.0</small>
                        </h1>
                        <div class="row">
                            <div class="col-md-6">
                                <small class="text-light">
                                    <i class="fas fa-calendar-alt me-1"></i>
                                    Test Tarihi: <strong>2025-08-30 02:40:22</strong>
                                </small>
                            </div>
                            <div class="col-md-6 text-end">
                                <small class="text-light">
                                    <i class="fas fa-clock me-1"></i>
                                    Son G√ºncelleme: <strong>Otomatik</strong>
                                    <span class="badge bg-info ms-2" title="Bu dashboard Test-PWA.ps1 script'i tarafƒ±ndan otomatik olarak olu≈üturulur">Otomatik</span>
                                </small>
                            </div>
                        </div>
                    </div>
                    <div class="card-body bg-light">
                        <div class="alert alert-info mb-0">
                            <h6 class="alert-heading mb-2">
                                <i class="fas fa-info-circle me-2"></i>
                                Dashboard Hakkƒ±nda
                            </h6>
                            <p class="mb-1">
                                Bu dashboard, KesifApp'in Progressive Web App (PWA) √∂zelliklerini test etmek i√ßin olu≈üturulmu≈ütur.
                                Test sonu√ßlarƒ±, performans metrikleri ve iyile≈ütirme √∂nerilerini i√ßerir.
                            </p>
                            <small class="text-muted">
                                <i class="fas fa-external-link-alt me-1"></i>
                                Detaylƒ± bilgi i√ßin: <a href="README.md#üîç-pwa-test-sistemi-dok√ºmantasyonu" class="alert-link">Dok√ºmantasyon</a>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Genel Metrikler -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card metric-card"
                     title="Toplam testlerin ba≈üarƒ± y√ºzdesi. 90%+ m√ºkemmel, 70-89% iyi, 50-69% orta, <%50 d√º≈ü√ºk performans anlamƒ±na gelir."
                     data-bs-toggle="tooltip"
                     data-bs-placement="top">
                    <div class="progress-circle bg-primary text-white"
                         title="Ba≈üarƒ± Oranƒ±: Ge√ßen testlerin toplam testlere oranƒ±">
                        0%
                    </div>
                    <div class="metric-label">
                        <i class="fas fa-percentage me-1"></i>
                        Ba≈üarƒ± Oranƒ±
                        <span class="info-tooltip" title="Test-PWA.ps1 tarafƒ±ndan hesaplanan genel ba≈üarƒ± metriƒüi">‚ÑπÔ∏è</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card"
                     title="Ba≈üarƒ±yla ge√ßen test sayƒ±sƒ±. Ye≈üil renk ba≈üarƒ±lƒ± testleri g√∂sterir."
                     data-bs-toggle="tooltip"
                     data-bs-placement="top">
                    <div class="metric-value text-success">
                        <i class="fas fa-check-circle me-1"></i>
                        0
                    </div>
                    <div class="metric-label">
                        <i class="fas fa-check me-1 text-success"></i>
                        Ge√ßen Testler
                        <span class="info-tooltip" title="Ba≈üarƒ±yla tamamlanan test adedi">‚ÑπÔ∏è</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card"
                     title="Ba≈üarƒ±sƒ±z olan test sayƒ±sƒ±. Kƒ±rmƒ±zƒ± renk kritik sorunlarƒ± g√∂sterir."
                     data-bs-toggle="tooltip"
                     data-bs-placement="top">
                    <div class="metric-value text-danger">
                        <i class="fas fa-times-circle me-1"></i>
                        7
                    </div>
                    <div class="metric-label">
                        <i class="fas fa-times me-1 text-danger"></i>
                        Ba≈üarƒ±sƒ±z Testler
                        <span class="info-tooltip" title="D√ºzeltme gereken test adedi">‚ÑπÔ∏è</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card"
                     title="Atlanan test sayƒ±sƒ±. Sarƒ± renk ko≈üullu testleri g√∂sterir."
                     data-bs-toggle="tooltip"
                     data-bs-placement="top">
                    <div class="metric-value text-warning">
                        <i class="fas fa-pause-circle me-1"></i>
                        0
                    </div>
                    <div class="metric-label">
                        <i class="fas fa-pause me-1 text-warning"></i>
                        Atlanan Testler
                        <span class="info-tooltip" title="Ko≈üullu olarak atlanan test adedi">‚ÑπÔ∏è</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grafikler -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-chart-pie me-2 text-primary"></i>
                            Test Sonu√ßlarƒ± Daƒüƒ±lƒ±mƒ±
                            <span class="info-tooltip ms-2"
                                  title="Test sonu√ßlarƒ±nƒ±n pasta grafiƒüi g√∂sterimi. Ba≈üarƒ±lƒ±, ba≈üarƒ±sƒ±z ve atlanan testlerin oranlarƒ±nƒ± g√∂rselle≈ütirir."
                                  data-bs-toggle="tooltip">‚ÑπÔ∏è</span>
                        </h5>
                        <small class="text-muted">Toplam test daƒüƒ±lƒ±mƒ± ve ba≈üarƒ± oranlarƒ±</small>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="resultsChart"
                                    title="Test sonu√ßlarƒ±nƒ±n g√∂rsel daƒüƒ±lƒ±mƒ± - Ye≈üil: Ba≈üarƒ±lƒ±, Kƒ±rmƒ±zƒ±: Ba≈üarƒ±sƒ±z, Sarƒ±: Atlandƒ±"></canvas>
                        </div>
                        <div class="mt-3 text-center">
                            <small class="text-muted">
                                <i class="fas fa-mouse-pointer me-1"></i>
                                Grafik √ºzerinde hover yaparak detaylarƒ± g√∂rebilirsiniz
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-chart-bar me-2 text-success"></i>
                            Test Kategorileri Detaylarƒ±
                            <span class="info-tooltip ms-2"
                                  title="PWA, Performans, G√ºvenlik, SEO ve Yasal kategorilerindeki test sonu√ßlarƒ±."
                                  data-bs-toggle="tooltip">‚ÑπÔ∏è</span>
                        </h5>
                        <small class="text-muted">Kategorilere g√∂re test performansƒ± analizi</small>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="detailsChart"
                                    title="Kategori bazlƒ± test sonu√ßlarƒ± - Mavi: Toplam, Ye≈üil: Ge√ßen, Kƒ±rmƒ±zƒ±: Ba≈üarƒ±sƒ±z, Sarƒ±: Atlandƒ±"></canvas>
                        </div>
                        <div class="mt-3">
                            <div class="row text-center">
                                <div class="col-3">
                                    <small class="text-primary">
                                        <i class="fas fa-square me-1"></i>
                                        Temel PWA
                                    </small>
                                </div>
                                <div class="col-3">
                                    <small class="text-info">
                                        <i class="fas fa-square me-1"></i>
                                        Performans
                                    </small>
                                </div>
                                <div class="col-3">
                                    <small class="text-warning">
                                        <i class="fas fa-square me-1"></i>
                                        G√ºvenlik
                                    </small>
                                </div>
                                <div class="col-3">
                                    <small class="text-secondary">
                                        <i class="fas fa-square me-1"></i>
                                        SEO/Yasal
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trend Analizi -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-chart-line me-2 text-info"></i>
                            Zaman ƒ∞√ßinde Performans Trendleri
                            <span class="info-tooltip ms-2"
                                  title="Son 30 g√ºn√ºn test sonu√ßlarƒ±nƒ±n trend analizi. Ba≈üarƒ± oranlarƒ±, puanlar ve performans metriklerinin zaman i√ßindeki deƒüi≈üimi."
                                  data-bs-toggle="tooltip">‚ÑπÔ∏è</span>
                        </h5>
                        <small class="text-muted">Son 30 g√ºn√ºn test trendleri ve performans analizi</small>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="trendChart"
                                    title="Zaman i√ßindeki performans trendleri - Mavi: Ba≈üarƒ± Oranƒ±, Ye≈üil: PWA Puanƒ±, Kƒ±rmƒ±zƒ±: Performans Puanƒ±, Mor: SEO Puanƒ±"></canvas>
                        </div>
                        <div class="mt-3">
                            <div class="row text-center">
                                <div class="col-3">
                                    <small class="text-primary">
                                        <i class="fas fa-square me-1"></i>
                                        Ba≈üarƒ± Oranƒ± (%)
                                    </small>
                                </div>
                                <div class="col-3">
                                    <small class="text-success">
                                        <i class="fas fa-square me-1"></i>
                                        PWA Puanƒ±
                                    </small>
                                </div>
                                <div class="col-3">
                                    <small class="text-danger">
                                        <i class="fas fa-square me-1"></i>
                                        Performans Puanƒ±
                                    </small>
                                </div>
                                <div class="col-3">
                                    <small class="text-info">
                                        <i class="fas fa-square me-1"></i>
                                        SEO Puanƒ±
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Detaylarƒ± Tablosu -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-list-check me-2"></i>
                            Test Detaylarƒ±
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped" id="testDetailsTable">
                                <thead>
                                    <tr>
                                        <th>Test Adƒ±</th>
                                        <th>Durum</th>
                                        <th>Detaylar</th>
                                    </tr>
                                </thead>
                                <tbody>                                    <tr>
                                        <td>ServiceWorker</td>
                                        <td><span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span></td>
                                        <td>Service Worker i≈ülevselliƒüi kontrol√º</td>
                                    </tr>                                    <tr>
                                        <td>404 Sayfasƒ±</td>
                                        <td><span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span></td>
                                        <td>404 sayfasƒ± PWA entegrasyonu</td>
                                    </tr>                                    <tr>
                                        <td>Manifest</td>
                                        <td><span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span></td>
                                        <td>PWA manifest dosyasƒ± kontrol√º</td>
                                    </tr>                                    <tr>
                                        <td>Gizlilik Sayfasƒ±</td>
                                        <td><span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span></td>
                                        <td>Gizlilik sayfasƒ± PWA entegrasyonu</td>
                                    </tr>                                    <tr>
                                        <td>OfflineFallback</td>
                                        <td><span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span></td>
                                        <td>Offline fallback sayfasƒ± kontrol√º</td>
                                    </tr>                                    <tr>
                                        <td>Yasal Sayfa</td>
                                        <td><span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span></td>
                                        <td>Yasal sayfa PWA entegrasyonu</td>
                                    </tr>                                    <tr>
                                        <td>Ana Sayfa</td>
                                        <td><span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span></td>
                                        <td>Ana sayfa PWA entegrasyonu</td>
                                    </tr>                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- √ñneriler -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-lightbulb me-2"></i>
                            ƒ∞yile≈ütirme √ñnerileri
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>PWA ƒ∞yile≈ütirmeleri:</h6>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-check-circle text-success me-2"></i>Manifest.json'da t√ºm gerekli alanlarƒ±n doldurulduƒüundan emin olun</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i>Service Worker'ƒ±n t√ºm event handler'larƒ±nƒ± i√ßerdiƒüinden emin olun</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i>T√ºm HTML sayfalarƒ±nda PWA meta etiketlerinin mevcut olduƒüundan emin olun</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i>HTTPS protokol√º kullanƒ±ldƒ±ƒüƒ±ndan emin olun</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>SEO ƒ∞yile≈ütirmeleri:</h6>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-search me-2"></i>Meta title ve description etiketlerini optimize edin</li>
                                    <li><i class="fas fa-hashtag me-2"></i>Open Graph ve Twitter Card etiketlerini ekleyin</li>
                                    <li><i class="fas fa-image me-2"></i>T√ºm resimlere alt attribute'larƒ± ekleyin</li>
                                    <li><i class="fas fa-sitemap me-2"></i>Structured data markup'larƒ± ekleyin</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global deƒüi≈ükenler
        let testResults = null;
        let testHistory = null;

        // JSON verilerini y√ºkle
        async function loadTestData() {
            try {
                // Test sonu√ßlarƒ±nƒ± y√ºkle
                const resultsResponse = await fetch('pwa-test-results.json');
                if (resultsResponse.ok) {
                    testResults = await resultsResponse.json();
                }

                // Test ge√ßmi≈üini y√ºkle
                const historyResponse = await fetch('test-history.json');
                if (historyResponse.ok) {
                    testHistory = await historyResponse.json();
                }

                // Dashboard'u g√ºncelle
                updateDashboard();
                updateCharts();

            } catch (error) {
                console.error('Veri y√ºkleme hatasƒ±:', error);
                // Varsayƒ±lan verilerle devam et
                updateCharts();
            }
        }

        // Dashboard'u g√ºncelle
        function updateDashboard() {
            if (!testResults) return;

            // Ba≈ülƒ±k bilgilerini g√ºncelle
            document.title = `PWA Test Dashboard - ${testResults.summary.success_rate}% Ba≈üarƒ±`;

            // √ñzet bilgileri g√ºncelle
            const summary = testResults.summary;
            document.querySelector('.display-4').textContent = `${summary.success_rate}%`;
            document.querySelector('.text-success').textContent = summary.passed_tests;
            document.querySelector('.text-danger').textContent = summary.failed_tests;
            document.querySelector('.text-warning').textContent = summary.skipped_tests;

            // Test detaylarƒ± tablosunu g√ºncelle
            updateTestDetailsTable();
        }

        // Test detaylarƒ± tablosunu g√ºncelle
        function updateTestDetailsTable() {
            if (!testResults) return;

            const tbody = document.querySelector('#testDetailsTable tbody');
            tbody.innerHTML = '';

            Object.entries(testResults.detailed_results).forEach(([testName, result]) => {
                const row = document.createElement('tr');

                const statusBadge = result.status === 'passed'
                    ? '<span class="badge bg-success"><i class="fas fa-check me-1"></i>Ba≈üarƒ±lƒ±</span>'
                    : result.status === 'failed'
                    ? '<span class="badge bg-danger"><i class="fas fa-times me-1"></i>Ba≈üarƒ±sƒ±z</span>'
                    : '<span class="badge bg-warning"><i class="fas fa-pause me-1"></i>Atlandƒ±</span>';

                row.innerHTML = `
                    <td>${testName.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</td>
                    <td>${statusBadge}</td>
                    <td>${result.details}</td>
                `;

                tbody.appendChild(row);
            });
        }

        // Grafikleri g√ºncelle
        function updateCharts() {
            const summary = testResults ? testResults.summary : { passed_tests: 0, failed_tests: 7, skipped_tests: 0, total_tests: 7 };

            // Test sonu√ßlarƒ± grafiƒüi
            const resultsCtx = document.getElementById('resultsChart').getContext('2d');
            new Chart(resultsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Ba≈üarƒ±lƒ±', 'Ba≈üarƒ±sƒ±z', 'Atlandƒ±'],
                    datasets: [{
                        data: [summary.passed_tests, summary.failed_tests, summary.skipped_tests],
                        backgroundColor: ['#28a745', '#dc3545', '#ffc107'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Test detaylarƒ± grafiƒüi
            const detailsCtx = document.getElementById('detailsChart').getContext('2d');
            new Chart(detailsCtx, {
                type: 'bar',
                data: {
                    labels: ['Toplam Test', 'Ge√ßen Test', 'Ba≈üarƒ±sƒ±z Test', 'Atlanan Test'],
                    datasets: [{
                        label: 'Test Sayƒ±sƒ±',
                        data: [summary.total_tests, summary.passed_tests, summary.failed_tests, summary.skipped_tests],
                        backgroundColor: ['#007bff', '#28a745', '#dc3545', '#ffc107'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Trend analizi grafiƒüi
            updateTrendChart();
        }

        // Trend analizi grafiƒüi
        function updateTrendChart() {
            const trendCtx = document.getElementById('trendChart').getContext('2d');

            // √ñrnek trend verileri (ger√ßek veriler test-history.json'dan gelecek)
            const trendData = testHistory && testHistory.test_runs ?
                testHistory.test_runs.slice(-7).map(run => run.success_rate) :
                [0, 0, 0, 0, 0, 0, 0];

            new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['6 g√ºn √∂nce', '5 g√ºn √∂nce', '4 g√ºn √∂nce', '3 g√ºn √∂nce', '2 g√ºn √∂nce', '1 g√ºn √∂nce', 'Bug√ºn'],
                    datasets: [{
                        label: 'Ba≈üarƒ± Oranƒ± (%)',
                        data: trendData,
                        borderColor: '#007bff',
                        backgroundColor: 'rgba(0, 123, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Sayfa y√ºklendiƒüinde verileri y√ºkle
        document.addEventListener('DOMContentLoaded', function() {
            loadTestData();

            // Tooltip'leri ba≈ülat
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
