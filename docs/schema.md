# PWA Test Sistemi Veri Yapıları\n\nBu dokümantasyon, Test-PWA.ps1 sistemi tarafından kullanılan JSON veri yapılarını detaylı olarak açıklar.\n\n## 📋 Genel Bakış\n\nSistem üç ana JSON dosyası kullanır:\n- `pwa-test-results.json`: En son test sonuçları\n- `test-history.json`: Test geçmişi ve trend analizi\n- `pwa-dashboard.html`: İnteraktif dashboard (HTML/JS)\n\n## 📄 pwa-test-results.json\n\nEn son PWA testinin detaylı sonuçlarını içerir.\n\n### Şema Yapısı\n\n```json\n{\n  "metadata": {\n    "timestamp": "2025-08-30T09:00:00Z",\n    "script_version": "4.0",\n    "test_duration_seconds": 45.2,\n    "hostname": "DESKTOP-F8M2K05",\n    "username": "VAHIT",\n    "powershell_version": "5.1.26100.4768",\n    "os_version": "Microsoft Windows NT 10.0.26100.0"\n  },\n  "summary": {\n    "success_rate": 85,\n    "passed_tests": 17,\n    "failed_tests": 3,\n    "skipped_tests": 0,\n    "total_tests": 20,\n    "test_duration": "00:00:45.2000000",\n    "average_response_time": 0.18,\n    "tests_per_second": 5.69\n  },\n  "performance_metrics": {\n    "test_duration": "00:00:45.2000000",\n    "average_response_time": 0.18,\n    "tests_per_second": 5.69,\n    "script_version": "4.0",\n    "hostname": "DESKTOP-F8M2K05",\n    "username": "VAHIT"\n  },\n  "detailed_results": {\n    "manifest_test": {\n      "status": "passed|failed|skipped",\n      "score": 95,\n      "details": "Manifest.json valid and complete",\n      "category": "basic",\n      "criticality": "high"\n    },\n    "service_worker_test": {\n      "status": "passed|failed|skipped",\n      "score": 0,\n      "details": "Service Worker registration failed",\n      "category": "basic",\n      "criticality": "high"\n    }\n  },\n  "categories": {\n    "basic": {\n      "passed": 4,\n      "failed": 1,\n      "skipped": 0,\n      "total": 5,\n      "success_rate": 80\n    },\n    "performance": {\n      "passed": 3,\n      "failed": 0,\n      "skipped": 0,\n      "total": 3,\n      "success_rate": 100\n    },\n    "security": {\n      "passed": 5,\n      "failed": 1,\n      "skipped": 0,\n      "total": 6,\n      "success_rate": 83.33\n    },\n    "seo": {\n      "passed": 3,\n      "failed": 1,\n      "skipped": 0,\n      "total": 4,\n      "success_rate": 75\n    },\n    "legal": {\n      "passed": 2,\n      "failed": 0,\n      "skipped": 0,\n      "total": 2,\n      "success_rate": 100\n    }\n  },\n  "recommendations": [\n    "Manifest.json dosyasını kontrol edin ve gerekli alanları ekleyin",\n    "Service Worker dosyasını oluşturun ve temel event handler'ları ekleyin",\n    "HTML sayfalarına PWA meta etiketlerini ekleyin",\n    "HTTPS protokolünü kullanın"\n  ]\n}\n```\n\n### Alan Açıklamaları\n\n#### metadata\n| Alan | Tip | Açıklama |\n|------|-----|----------|\n| `timestamp` | string | Test çalıştırma zamanı (ISO 8601 format) |\n| `script_version` | string | Kullanılan script versiyonu |\n| `test_duration_seconds` | number | Test toplam süresi (saniye) |\n| `hostname` | string | Test çalıştığı bilgisayar adı |\n| `username` | string | Testi çalıştıran kullanıcı |\n| `powershell_version` | string | PowerShell versiyonu |\n| `os_version` | string | İşletim sistemi versiyonu |\n\n#### summary\n| Alan | Tip | Açıklama |\n|------|-----|----------|\n| `success_rate` | number | Genel başarı oranı (yüzde) |\n| `passed_tests` | number | Geçen test sayısı |\n| `failed_tests` | number | Başarısız test sayısı |\n| `skipped_tests` | number | Atlanan test sayısı |\n| `total_tests` | number | Toplam test sayısı |\n| `test_duration` | string | Test süresi (.NET TimeSpan format) |\n| `average_response_time` | number | Ortalama yanıt süresi (saniye) |\n| `tests_per_second` | number | Saniye başına test sayısı |\n\n#### detailed_results\nHer test için detaylı sonuçları içerir.\n\n| Alan | Tip | Açıklama |\n|------|-----|----------|\n| `status` | string | Test durumu: "passed", "failed", "skipped" |\n| `score` | number | Test puanı (0-100) |\n| `details` | string | Test sonucu açıklaması |\n| `category` | string | Test kategorisi |\n| `criticality` | string | Kritiklik seviyesi: "high", "medium", "low" |\n\n#### categories\nTest kategorilerine göre özet sonuçlar.\n\n| Alan | Tip | Açıklama |\n|------|-----|----------|\n| `passed` | number | Kategoride geçen test sayısı |\n| `failed` | number | Kategoride başarısız test sayısı |\n| `skipped` | number | Kategoride atlanan test sayısı |\n| `total` | number | Kategoride toplam test sayısı |\n| `success_rate` | number | Kategori başarı oranı |\n\n## 📄 test-history.json\n\nTest geçmişini ve trend analizini içerir.\n\n### Şema Yapısı\n\n```json\n{\n  "test_runs": [\n    {\n      "timestamp": "2025-08-30T09:00:00Z",\n      "success_rate": 85,\n      "passed_tests": 17,\n      "failed_tests": 3,\n      "skipped_tests": 0,\n      "total_tests": 20,\n      "duration_seconds": 45.2,\n      "script_version": "4.0",\n      "hostname": "DESKTOP-F8M2K05",\n      "username": "VAHIT"\n    }\n  ],\n  "trend_analysis": {\n    "direction": "improving|declining|stable",\n    "change_percent": 5.2,\n    "average_last_5": 82.4,\n    "confidence": "high|medium|low",\n    "last_5_rates": [80, 82, 85, 87, 85],\n    "data_points": 5,\n    "analysis_timestamp": "2025-08-30T09:00:00Z"\n  },\n  "statistics": {\n    "total_runs": 15,\n    "average_success_rate": 78.5,\n    "best_run": {\n      "timestamp": "2025-08-25T09:00:00Z",\n      "success_rate": 95\n    },\n    "worst_run": {\n      "timestamp": "2025-08-20T09:00:00Z",\n      "success_rate": 65\n    },\n    "consistency_score": 85.2\n  }\n}\n```\n\n### Alan Açıklamaları\n\n#### test_runs\nGeçmiş test çalıştırmalarının listesi.\n\n| Alan | Tip | Açıklama |\n|------|-----|----------|\n| `timestamp` | string | Test çalıştırma zamanı |\n| `success_rate` | number | Başarı oranı |\n| `passed_tests` | number | Geçen test sayısı |\n| `failed_tests` | number | Başarısız test sayısı |\n| `skipped_tests` | number | Atlanan test sayısı |\n| `total_tests` | number | Toplam test sayısı |\n| `duration_seconds` | number | Test süresi |\n| `script_version` | string | Script versiyonu |\n| `hostname` | string | Bilgisayar adı |\n| `username` | string | Kullanıcı adı |\n\n#### trend_analysis\nTrend analiz sonuçları.\n\n| Alan | Tip | Açıklama |\n|------|-----|----------|\n| `direction` | string | Trend yönü: "improving", "declining", "stable" |\n| `change_percent` | number | Yüzde değişim oranı |\n| `average_last_5` | number | Son 5 test ortalaması |\n| `confidence` | string | Güvenilirlik seviyesi |\n| `last_5_rates` | array | Son 5 başarı oranı |\n| `data_points` | number | Analiz edilen veri noktası sayısı |\n| `analysis_timestamp` | string | Analiz zamanı |\n\n#### statistics\nGenel istatistikler.\n\n| Alan | Tip | Açıklama |\n|------|-----|----------|\n| `total_runs` | number | Toplam test çalıştırma sayısı |\n| `average_success_rate` | number | Ortalama başarı oranı |\n| `best_run` | object | En iyi test sonucu |\n| `worst_run` | object | En kötü test sonucu |\n| `consistency_score` | number | Tutarlılık puanı |\n\n## 🔄 Veri Akışı\n\n### Test Çalıştırma Süreci\n\n1. **Test Başlatma**: Script çalıştırılır\n2. **Veri Toplama**: Test sonuçları toplanır\n3. **JSON Oluşturma**: pwa-test-results.json oluşturulur\n4. **Geçmiş Güncelleme**: test-history.json güncellenir\n5. **Trend Analizi**: Trend hesaplaması yapılır\n6. **Dashboard Güncelleme**: HTML dashboard yenilenir\n7. **Webhook Bildirimleri**: Slack/Discord bildirimleri gönderilir\n\n### Otomatik Güncellemeler\n\n- **GitHub Actions**: Haftalık otomatik testler\n- **README Güncelleme**: Trend raporu otomatik güncelleme\n- **Badge Güncelleme**: Otomatik badge rengi güncellemeleri\n- **Webhook Bildirimleri**: Başarısızlık durumunda otomatik bildirim\n\n## 📊 Kullanım Örnekleri\n\n### PowerShell ile Veri Okuma\n\n```powershell\n# Test sonuçlarını oku\n$results = Get-Content "pwa-test-results.json" | ConvertFrom-Json\n\n# Başarı oranını al\n$successRate = $results.summary.success_rate\n\n# Trend analizini oku\n$history = Get-Content "test-history.json" | ConvertFrom-Json\n$trend = $history.trend_analysis.direction\n```\n\n### JavaScript ile Dashboard Entegrasyonu\n\n```javascript\n// JSON verilerini yükle\nfetch('pwa-test-results.json')\n  .then(response => response.json())\n  .then(data => {\n    const successRate = data.summary.success_rate;\n    const passedTests = data.summary.passed_tests;\n\n    // Dashboard'u güncelle\n    updateDashboard(successRate, passedTests);\n  });\n```\n\n## 🔧 Bakım ve Güncelleme\n\n### Veri Temizliği\n\n```powershell\n# Eski test geçmişini temizle (30 günden eski)\n$history = Get-Content "test-history.json" | ConvertFrom-Json\n$cutoffDate = (Get-Date).AddDays(-30)\n\n$history.test_runs = $history.test_runs | Where-Object {\n  [DateTime]::Parse($_.timestamp) -gt $cutoffDate\n}\n\n$history | ConvertTo-Json -Depth 10 | Set-Content "test-history.json"\n```\n\n### Şema Güncellemeleri\n\n- Yeni test kategorileri eklendiğinde `categories` alanını güncelleyin\n- Yeni metrikler eklendiğinde `performance_metrics` alanını genişletin\n- Trend analiz algoritması değiştiğinde `trend_analysis` yapısını güncelleyin\n\n## 📝 Sürüm Geçmişi\n\n### v4.0 (Güncel)\n- Detaylı kategori bazlı sonuçlar\n- Gelişmiş trend analizi\n- Sistem bilgisi metadata'sı\n- Güvenilirlik skoru hesaplama\n\n### v3.0\n- Temel JSON export özelliği\n- Basit trend analizi\n- Webhook bildirim desteği\n\n### v2.0\n- İlk JSON şeması\n- Temel test sonuçları\n- CSV export desteği\n\n---\n\n*Bu şema dokümantasyonu Test-PWA.ps1 v4.0 için hazırlanmıştır.*\n