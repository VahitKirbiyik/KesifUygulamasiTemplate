using System.Threading.Tasks;\nusing Microsoft.Maui.ApplicationModel.DataTransfer;\nusing QRCoder;\nusing System.IO;\nusing KesifUygulamasiTemplate.Services.Interfaces;\nusing KesifUygulamasiTemplate.Models;\n\nnamespace KesifUygulamasiTemplate.Services\n{\n    public class LocationSharingService : ILocationSharingService\n    {\n        public async Task ShareLocationAsync(LatLng location, string? message = null)\n        {\n            var url = await GenerateGeoUrlAsync(location.Lat, location.Lng);\n            var request = new ShareTextRequest\n            {\n                Text = message != null ? $"{message}\n{url}" : url,\n                Title = "Konum payla≈ü"\n            };\n            await Share.Default.RequestAsync(request);\n        }\n\n        public Task<string> GenerateGeoUrlAsync(double lat, double lon)\n        {\n            var url = $"https://maps.google.com/?q={lat},{lon}";\n            return Task.FromResult(url);\n        }\n\n        public Task<string> GenerateQrCodeBase64Async(double lat, double lon)\n        {\n            var url = $"https://maps.google.com/?q={lat},{lon}";\n            using var qrGen = new QRCodeGenerator();\n            var data = qrGen.CreateQrCode(url, QRCodeGenerator.ECCLevel.Q);\n            using var qrCode = new Base64QRCode(data);\n            var base64 = qrCode.GetGraphic(20);\n            return Task.FromResult(base64);\n        }\n    }\n}\n