using System;\nusing System.ComponentModel;\nusing System.Globalization;\nusing System.Resources;\nusing System.Runtime.CompilerServices;\nusing System.Threading;\n\nnamespace KesifUygulamasiTemplate.Services\n{\n    /// <summary>\n    /// Uygulama genelinde lokalizasyon ve k�lt�r y�netimi sa�lar.\n    /// </summary>\n    public class LocalizationService : INotifyPropertyChanged\n    {\n        private static readonly LocalizationService _instance = new LocalizationService();\n        private readonly ResourceManager _resourceManager;\n        private CultureInfo _currentCulture;\n\n        /// <summary>\n        /// Singleton instance\n        /// </summary>\n        public static LocalizationService Instance => _instance;\n\n        /// <summary>\n        /// Ge�erli k�lt�r (dil)\n        /// </summary>\n        public static CultureInfo CurrentCulture\n        {\n            get => Instance._currentCulture;\n            set => Instance.SetCulture(value);\n        }\n\n        public event PropertyChangedEventHandler? PropertyChanged;\n\n        private LocalizationService()\n        {\n            _resourceManager = KesifUygulamasiTemplate.Resources.Strings.AppResources.ResourceManager;\n            _currentCulture = CultureInfo.CurrentUICulture;\n        }\n\n        private void SetCulture(CultureInfo value)\n        {\n            if (_currentCulture.Name != value.Name)\n            {\n                _currentCulture = value;\n                Thread.CurrentThread.CurrentCulture = value;\n                Thread.CurrentThread.CurrentUICulture = value;\n                OnPropertyChanged(nameof(CurrentCulture));\n                OnPropertyChanged(string.Empty);\n            }\n        }\n\n        public string GetString(string key)\n        {\n            try\n            {\n                return _resourceManager.GetString(key, _currentCulture) ?? key;\n            }\n            catch\n            {\n                return key;\n            }\n        }\n\n        public string GetString(string key, params object[] args)\n        {\n            try\n            {\n                var format = _resourceManager.GetString(key, _currentCulture) ?? key;\n                return string.Format(format, args);\n            }\n            catch\n            {\n                return key;\n            }\n        }\n\n        /// <summary>\n        /// Tarih/saat de�erini ge�erli k�lt�re g�re k�sa tarih format�nda d�nd�r�r.\n        /// </summary>\n        public static string FormatDate(DateTime? date)\n        {\n            if (date == null) return string.Empty;\n            return date.Value.ToString("d", CurrentCulture);\n        }\n\n        /// <summary>\n        /// Para birimi de�erini ge�erli k�lt�re g�re formatlar.\n        /// </summary>\n        public static string FormatCurrency(decimal amount)\n        {\n            return amount.ToString("C", CurrentCulture);\n        }\n\n        /// <summary>\n        /// Tarih/saat de�erini ge�erli k�lt�re g�re k�sa saat format�nda d�nd�r�r.\n        /// </summary>\n        public static string FormatTime(DateTime? time)\n        {\n            if (time == null) return string.Empty;\n            return time.Value.ToString("t", CurrentCulture);\n        }\n\n        /// <summary>\n        /// Say� de�erini ge�erli k�lt�re g�re formatlar.\n        /// </summary>\n        public static string FormatNumber(double number)\n        {\n            return number.ToString("N0", CurrentCulture);\n        }\n\n        protected virtual void OnPropertyChanged([CallerMemberName] string? propertyName = null)\n        {\n            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName ?? string.Empty));\n        }\n    }\n}\n