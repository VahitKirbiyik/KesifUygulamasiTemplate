using System;\nusing Microsoft.Maui.Storage;\nusing KesifUygulamasiTemplate.Models;\n\nnamespace KesifUygulamasiTemplate.Services\n{\n    public class ThemeService\n    {\n        private const Models.AppTheme DefaultTheme = Models.AppTheme.Light;\n        private const string ThemeKey = "AppTheme";\n\n        public Models.AppTheme CurrentTheme { get; private set; } = DefaultTheme;\n\n        public ThemeService()\n        {\n            LoadTheme();\n        }\n\n        public void SetTheme(Models.AppTheme theme)\n        {\n            CurrentTheme = theme;\n            Preferences.Set(ThemeKey, theme.ToString());\n            ApplyTheme(theme);\n        }\n\n        public void ApplyTheme(Models.AppTheme theme)\n        {\n            Microsoft.Maui.Controls.Application.Current.UserAppTheme = theme switch\n            {\n                Models.AppTheme.Light => Microsoft.Maui.ApplicationModel.AppTheme.Light,\n                Models.AppTheme.Dark => Microsoft.Maui.ApplicationModel.AppTheme.Dark,\n                Models.AppTheme.Custom => Microsoft.Maui.ApplicationModel.AppTheme.Light, // Custom için Light baz alınır\n                _ => Microsoft.Maui.ApplicationModel.AppTheme.Light\n            };\n        }\n\n        public void LoadTheme()\n        {\n            var themeStr = Preferences.Get(ThemeKey, DefaultTheme.ToString());\n            if (Enum.TryParse<Models.AppTheme>(themeStr, out var theme))\n                CurrentTheme = theme;\n            else\n                CurrentTheme = DefaultTheme;\n            ApplyTheme(CurrentTheme);\n        }\n    }\n}\n