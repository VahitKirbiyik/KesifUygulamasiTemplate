using System;\nusing System.Threading.Tasks;\nusing Microsoft.Maui.Storage;\nusing KesifUygulamasiTemplate.Services.Interfaces;\nusing System.Collections.Generic;\nusing System.Security;\n\nnamespace KesifUygulamasiTemplate.Services\n{\n    // API anahtarlar� ve kullan�c� bilgileri i�in g�venli depolama\n    public class SecureDataService : ISecureDataService\n    {\n        public async Task<string> GetSecureValueAsync(string key)\n        {\n            try\n            {\n                return await SecureStorage.Default.GetAsync(key)\n                    ?? throw new KeyNotFoundException($"Güvenli değer bulunamadı: {key}");\n            }\n            catch (Exception ex) when (ex is not KeyNotFoundException)\n            {\n                throw new SecurityException("Güvenli veri erişimi başarısız", ex);\n            }\n        }\n\n        public async Task SetSecureValueAsync(string key, string value)\n        {\n            await SecureStorage.Default.SetAsync(key, value);\n        }\n\n        // ISecureDataService sync contract\n        void ISecureDataService.Set(string key, string value)\n        {\n            // Fire-and-forget wrapper for the async Set\n            _ = SetSecureValueAsync(key, value);\n        }\n\n        string? ISecureDataService.Get(string key)\n        {\n            try\n            {\n                return GetSecureValueAsync(key).GetAwaiter().GetResult();\n            }\n            catch\n            {\n                return null;\n            }\n        }\n    }\n}\n