using System;
using KesifUygulamasiTemplate.ViewModels;
using Microsoft.Maui.Controls;
using Microsoft.Maui.ApplicationModel;

namespace KesifUygulamasi.Pages
{
    public partial class SettingsPage : ContentPage
    {
        public SettingsPage(SettingsViewModel viewModel)
        {
            InitializeComponent();
            BindingContext = viewModel;
        }

        private void OfflineModeSwitch_Toggled(object sender, ToggledEventArgs e)
        {
            // MVVM ile offline mod yÃ¶netimi
        }

        private void RequestLocationPermission_Clicked(object sender, EventArgs e)
        {
            // MVVM ile konum izni yÃ¶netimi
        }

        private async void PayPalDonationButton_Clicked(object sender, EventArgs e)
        {
            try
            {
                // PayPal baÄŸÄ±ÅŸ linki - gerÃ§ek implementasyonda dinamik URL kullanÄ±lmalÄ±
                string paypalUrl = "https://www.paypal.com/donate/?hosted_button_id=YOUR_BUTTON_ID";

                await Launcher.OpenAsync(paypalUrl);

                await DisplayAlert("TeÅŸekkÃ¼rler! ğŸ’",
                    "PayPal sayfasÄ±na yÃ¶nlendiriliyorsunuz. BaÄŸÄ±ÅŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz!",
                    "Tamam");
            }
            catch (Exception ex)
            {
                await DisplayAlert("Hata",
                    $"PayPal sayfasÄ± aÃ§Ä±lamadÄ±: {ex.Message}",
                    "Tamam");
            }
        }

        private async void DownloadOfflineMapButton_Clicked(object sender, EventArgs e)
        {
            try
            {
                // Mock offline map download
                await DisplayAlert("Offline Harita Ä°ndirme",
                    "TÃ¼rkiye haritasÄ± indiriliyor... (Bu Ã¶zellik henÃ¼z geliÅŸtirilme aÅŸamasÄ±ndadÄ±r)",
                    "Tamam");

                // Simulate download completion
                await Task.Delay(2000); // 2 saniye beklet

                DownloadStatusLabel.IsVisible = true;
                await DisplayAlert("BaÅŸarÄ±lÄ±",
                    "TÃ¼rkiye haritasÄ± baÅŸarÄ±yla indirildi! ArtÄ±k offline kullanabilirsiniz.",
                    "Tamam");
            }
            catch (Exception ex)
            {
                await DisplayAlert("Hata",
                    $"Harita indirme baÅŸarÄ±sÄ±z: {ex.Message}",
                    "Tamam");
            }
        }
    }
}
