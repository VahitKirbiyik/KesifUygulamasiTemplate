# Test-Feedback.ps1 - Ã‡ok dilli geri bildirim testi\n# Bu script geri bildirim sistemini test eder ve CI/CD pipeline ile entegre Ã§alÄ±ÅŸÄ±r\n\nparam(\n    [string]$TestEnvironment = "local",\n    [string]$Configuration = "Debug",\n    [string]$ProjectPath = $PSScriptRoot,\n    [switch]$SkipBuild,\n    [switch]$Verbose,\n    [switch]$ExportJson,\n    [string[]]$TestLanguages = @("en", "tr", "de", "fr", "es", "ar", "zh", "ja"),\n    [int]$MaxFeedbacksPerDay = 100\n)\n\n# Script ayarlarÄ±\n$ErrorActionPreference = "Stop"\n$VerbosePreference = if ($Verbose) { "Continue" } else { "SilentlyContinue" }\n\n# Test sonuÃ§larÄ± iÃ§in deÄŸiÅŸkenler\n$testResults = @{\n    TotalTests = 0\n    PassedTests = 0\n    FailedTests = 0\n    TestDuration = [TimeSpan]::Zero\n    Details = @()\n}\n\n# Environment deÄŸiÅŸkenlerini ayarla\n$env:TEST_ENVIRONMENT = $TestEnvironment\n$env:CI = if ($TestEnvironment -eq "ci") { "true" } else { "false" }\n$env:AUTO_PROCESS_FEEDBACK = "true"\n$env:MAX_FEEDBACKS_PER_DAY = $MaxFeedbacksPerDay.ToString()\n$env:SUPPORTED_LANGUAGES = $TestLanguages -join ","\n\n# Renkli output iÃ§in\nfunction Write-ColorOutput {\n    param(\n        [string]$Message,\n        [string]$Color = "White"\n    )\n    Write-Host $Message -ForegroundColor $Color\n}\n\n# BaÅŸlÄ±k\nWrite-ColorOutput "=========================================" "Cyan"\nWrite-ColorOutput "      ğŸŒ Ã‡ok Dilli Geri Bildirim Testi" "Cyan"\nWrite-ColorOutput "=========================================" "Cyan"\nWrite-ColorOutput ""\n\n# Proje yolunu kontrol et\nif (!(Test-Path $ProjectPath)) {\n    Write-ColorOutput "Hata: Proje yolu bulunamadÄ±: $ProjectPath" "Red"\n    exit 1\n}\n\n# Test fonksiyonlarÄ±\nfunction Test-MultiLanguageFeedback {\n    param(\n        [string]$TestName,\n        [scriptblock]$TestScript\n    )\n\n    $startTime = Get-Date\n    $testPassed = $false\n    $errorMessage = ""\n\n    Write-ColorOutput "ğŸ§ª $TestName testi baÅŸlatÄ±lÄ±yor..." "White"\n\n    try {\n        & $TestScript\n        $testPassed = $true\n        Write-ColorOutput "  âœ… $TestName testi baÅŸarÄ±lÄ±" "Green"\n    } catch {\n        $errorMessage = $_.Exception.Message\n        Write-ColorOutput "  âŒ $TestName testi baÅŸarÄ±sÄ±z: $errorMessage" "Red"\n    } finally {\n        $endTime = Get-Date\n        $duration = $endTime - $startTime\n\n        $testResults.TotalTests++\n        if ($testPassed) {\n            $testResults.PassedTests++\n        } else {\n            $testResults.FailedTests++\n        }\n        $testResults.TestDuration += $duration\n\n        $testResults.Details += @{\n            TestName = $TestName\n            Passed = $testPassed\n            Duration = $duration\n            ErrorMessage = $errorMessage\n        }\n    }\n}\n\n# Dil desteÄŸi testi\nfunction Test-LanguageSupport {\n    Write-ColorOutput "  ğŸŒ Dil desteÄŸi test ediliyor..." "Gray"\n\n    $supportedLanguages = $env:SUPPORTED_LANGUAGES -split ","\n    Write-ColorOutput "    ğŸ“ Desteklenen diller: $($supportedLanguages -join ', ')" "Gray"\n\n    # Her dil iÃ§in Ã¶rnek geri bildirim\n    $sampleFeedbacks = @{\n        "en" = "Great app! Love the navigation features."\n        "tr" = "Harika uygulama! Navigasyon Ã¶zellikleri Ã§ok iyi."\n        "de" = "Tolle App! Die Navigationsfunktionen sind super."\n        "fr" = "Excellente application! J'adore les fonctions de navigation."\n        "es" = "Â¡Excelente aplicaciÃ³n! Me encantan las funciones de navegaciÃ³n."\n        "ar" = "ØªØ·Ø¨ÙŠÙ‚ Ø±Ø§Ø¦Ø¹! Ø£Ø­Ø¨ Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„."\n        "zh" = "å¾ˆæ£’çš„åº”ç”¨ï¼æˆ‘å–œæ¬¢å¯¼èˆªåŠŸèƒ½ã€‚"\n        "ja" = "ç´ æ™´ã‚‰ã—ã„ã‚¢ãƒ—ãƒªï¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãŒå¥½ãã§ã™ã€‚"\n    }\n\n    $feedbackCount = 0\n    foreach ($lang in $supportedLanguages) {\n        if ($sampleFeedbacks.ContainsKey($lang)) {\n            Write-ColorOutput "    âœ… $lang : $($sampleFeedbacks[$lang])" "Green"\n            $feedbackCount++\n        } else {\n            Write-ColorOutput "    âš ï¸  $lang iÃ§in Ã¶rnek geri bildirim bulunamadÄ±" "Yellow"\n        }\n    }\n\n    Write-ColorOutput "    ğŸ“Š Test edilen dil sayÄ±sÄ±: $feedbackCount" "Gray"\n}\n\n# Geri bildirim iÅŸleme testi\nfunction Test-FeedbackProcessing {\n    Write-ColorOutput "  ğŸ”„ Geri bildirim iÅŸleme test ediliyor..." "Gray"\n\n    # Feedback veri klasÃ¶rÃ¼ kontrolÃ¼\n    $feedbackDataPath = Join-Path $env:APPDATA "KesifUygulamasi\FeedbackData"\n    if (!(Test-Path $feedbackDataPath)) {\n        New-Item -ItemType Directory -Path $feedbackDataPath -Force | Out-Null\n        Write-ColorOutput "    ğŸ“ Feedback veri klasÃ¶rÃ¼ oluÅŸturuldu" "Gray"\n    }\n\n    # Ã–rnek feedback dosyasÄ± oluÅŸtur\n    $sampleFeedback = @{\n        id = [guid]::NewGuid().ToString()\n        language = "en"\n        message = "Test feedback for CI/CD pipeline"\n        category = "Testing"\n        rating = 5\n        timestamp = (Get-Date).ToString("yyyy-MM-ddTHH:mm:ssZ")\n        userId = "TestUser"\n        metadata = @{\n            user_agent = "Test-Agent"\n            platform = "CI/CD"\n            app_version = "1.0.0"\n        }\n        isProcessed = $false\n    }\n\n    $feedbackFile = Join-Path $feedbackDataPath "feedback_test_$(Get-Date -Format 'yyyyMMdd_HHmmss').json"\n    $sampleFeedback | ConvertTo-Json -Depth 10 | Set-Content $feedbackFile\n\n    Write-ColorOutput "    ğŸ“„ Ã–rnek feedback dosyasÄ± oluÅŸturuldu: $feedbackFile" "Gray"\n\n    # Ä°ÅŸlenmiÅŸ feedback kontrolÃ¼\n    $processedFeedbacks = Get-ChildItem $feedbackDataPath -Filter "feedback_*.json" | Where-Object {\n        $content = Get-Content $_.FullName -Raw | ConvertFrom-Json\n        $content.isProcessed -eq $true\n    }\n\n    Write-ColorOutput "    âœ… Ä°ÅŸlenmiÅŸ feedback sayÄ±sÄ±: $($processedFeedbacks.Count)" "Green"\n}\n\n# GÃ¼nlÃ¼k limit testi\nfunction Test-DailyLimit {\n    Write-ColorOutput "  ğŸ“Š GÃ¼nlÃ¼k limit testi..." "Gray"\n\n    $maxFeedbacks = [int]$env:MAX_FEEDBACKS_PER_DAY\n    Write-ColorOutput "    ğŸ¯ Maksimum gÃ¼nlÃ¼k feedback: $maxFeedbacks" "Gray"\n\n    # BugÃ¼nkÃ¼ feedback sayÄ±sÄ± kontrolÃ¼\n    $today = Get-Date -Format "yyyy-MM-dd"\n    $feedbackDataPath = Join-Path $env:APPDATA "KesifUygulamasi\FeedbackData"\n    $todaysFeedbacks = Get-ChildItem $feedbackDataPath -Filter "feedback_*.json" | Where-Object {\n        $fileName = $_.Name\n        $fileDate = $fileName -replace "feedback_", "" -replace "_.*", ""\n        $fileDate -eq $today\n    }\n\n    Write-ColorOutput "    ğŸ“… BugÃ¼nkÃ¼ feedback sayÄ±sÄ±: $($todaysFeedbacks.Count)" "Gray"\n\n    if ($todaysFeedbacks.Count -lt $maxFeedbacks) {\n        Write-ColorOutput "    âœ… GÃ¼nlÃ¼k limit aÅŸÄ±lmamÄ±ÅŸ" "Green"\n    } else {\n        Write-ColorOutput "    âš ï¸  GÃ¼nlÃ¼k limit aÅŸÄ±lmÄ±ÅŸ" "Yellow"\n    }\n}\n\n# Duygu analizi testi\nfunction Test-SentimentAnalysis {\n    Write-ColorOutput "  ğŸ˜Š Duygu analizi testi..." "Gray"\n\n    # Ã–rnek mesajlar\n    $testMessages = @(\n        @{ Message = "This app is amazing!"; ExpectedSentiment = "positive" },\n        @{ Message = "Great navigation features"; ExpectedSentiment = "positive" },\n        @{ Message = "This is terrible"; ExpectedSentiment = "negative" },\n        @{ Message = "Bug in the application"; ExpectedSentiment = "negative" },\n        @{ Message = "Works as expected"; ExpectedSentiment = "neutral" }\n    )\n\n    $positiveWords = @("good", "great", "excellent", "awesome", "love", "amazing")\n    $negativeWords = @("bad", "poor", "terrible", "hate", "worst", "bug")\n\n    foreach ($test in $testMessages) {\n        $message = $test.Message.ToLower()\n        $positiveCount = ($positiveWords | Where-Object { $message.Contains($_) }).Count\n        $negativeCount = ($negativeWords | Where-Object { $message.Contains($_) }).Count\n        $sentimentScore = $positiveCount - $negativeCount\n\n        $actualSentiment = if ($sentimentScore -gt 0) { "positive" } elseif ($sentimentScore -lt 0) { "negative" } else { "neutral" }\n\n        if ($actualSentiment -eq $test.ExpectedSentiment) {\n            Write-ColorOutput "    âœ… '$($test.Message)' -> $actualSentiment" "Green"\n        } else {\n            Write-ColorOutput "    âŒ '$($test.Message)' -> $actualSentiment (beklenen: $($test.ExpectedSentiment))" "Red"\n        }\n    }\n}\n\n# Otomatik yanÄ±t testi\nfunction Test-AutoResponse {\n    Write-ColorOutput "  ğŸ¤– Otomatik yanÄ±t testi..." "Gray"\n\n    # Dile gÃ¶re otomatik yanÄ±tlar\n    $autoResponses = @{\n        "en" = "Thank you for your feedback! We appreciate your input."\n        "tr" = "Geri bildiriminiz iÃ§in teÅŸekkÃ¼r ederiz! GÃ¶rÃ¼ÅŸlerinizi deÄŸerli buluyoruz."\n        "de" = "Vielen Dank fÃ¼r Ihr Feedback! Wir schÃ¤tzen Ihre Eingabe."\n        "fr" = "Merci pour votre retour! Nous apprÃ©cions vos commentaires."\n        "es" = "Â¡Gracias por sus comentarios! Apreciamos sus aportes."\n        "ar" = "Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ! Ù†Ø­Ù† Ù†Ù‚Ø¯Ø± Ø¢Ø±Ø§Ø¡Ùƒ."\n        "zh" = "æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬é‡è§†æ‚¨çš„æ„è§ã€‚"\n        "ja" = "ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã‚ãªãŸã®æ„è¦‹ã‚’å¤§åˆ‡ã«ã—ã¦ã„ã¾ã™ã€‚"\n    }\n\n    foreach ($lang in $TestLanguages) {\n        if ($autoResponses.ContainsKey($lang)) {\n            Write-ColorOutput "    âœ… $lang : $($autoResponses[$lang])" "Green"\n        } else {\n            Write-ColorOutput "    âš ï¸  $lang iÃ§in otomatik yanÄ±t bulunamadÄ±" "Yellow"\n        }\n    }\n}\n\n# Ana test dÃ¶ngÃ¼sÃ¼\nWrite-ColorOutput "ğŸš€ Ã‡ok dilli geri bildirim testleri baÅŸlatÄ±lÄ±yor..." "White"\nWrite-ColorOutput ""\n\n# Testleri Ã§alÄ±ÅŸtÄ±r\nTest-MultiLanguageFeedback -TestName "Dil DesteÄŸi" -TestScript { Test-LanguageSupport }\nTest-MultiLanguageFeedback -TestName "Geri Bildirim Ä°ÅŸleme" -TestScript { Test-FeedbackProcessing }\nTest-MultiLanguageFeedback -TestName "GÃ¼nlÃ¼k Limit" -TestScript { Test-DailyLimit }\nTest-MultiLanguageFeedback -TestName "Duygu Analizi" -TestScript { Test-SentimentAnalysis }\nTest-MultiLanguageFeedback -TestName "Otomatik YanÄ±t" -TestScript { Test-AutoResponse }\n\n# Test Ã¶zeti\nWrite-ColorOutput "" "White"\nWrite-ColorOutput "=========================================" "Cyan"\nWrite-ColorOutput "           ğŸ“Š Test SonuÃ§larÄ±" "Cyan"\nWrite-ColorOutput "=========================================" "Cyan"\n\n$successRate = if ($testResults.TotalTests -gt 0) {\n    [math]::Round(($testResults.PassedTests / $testResults.TotalTests) * 100, 1)\n} else { 0 }\n\nWrite-ColorOutput "Toplam Test: $($testResults.TotalTests)" "White"\nWrite-ColorOutput "BaÅŸarÄ±lÄ±: $($testResults.PassedTests)" "Green"\nWrite-ColorOutput "BaÅŸarÄ±sÄ±z: $($testResults.FailedTests)" "Red"\nWrite-ColorOutput "BaÅŸarÄ± OranÄ±: $successRate%" "Cyan"\nWrite-ColorOutput "Toplam SÃ¼re: $($testResults.TestDuration.TotalSeconds) saniye" "White"\n\n# DetaylÄ± sonuÃ§lar\nif ($Verbose) {\n    Write-ColorOutput "" "White"\n    Write-ColorOutput "DetaylÄ± SonuÃ§lar:" "Yellow"\n    foreach ($detail in $testResults.Details) {\n        $status = if ($detail.Passed) { "âœ…" } else { "âŒ" }\n        Write-ColorOutput "  $status $($detail.TestName)" "White"\n        if (!$detail.Passed -and $detail.ErrorMessage) {\n            Write-ColorOutput "    Hata: $($detail.ErrorMessage)" "Red"\n        }\n    }\n}\n\n# JSON export\nif ($ExportJson) {\n    $jsonPath = Join-Path $ProjectPath "feedback-test-results.json"\n    $exportData = @{\n        metadata = @{\n            timestamp = (Get-Date).ToString("yyyy-MM-ddTHH:mm:ssZ")\n            script_version = "1.0.0"\n            test_environment = $TestEnvironment\n            supported_languages = $TestLanguages\n            max_feedbacks_per_day = $MaxFeedbacksPerDay\n            total_duration_seconds = $testResults.TestDuration.TotalSeconds\n        }\n        summary = @{\n            total_tests = $testResults.TotalTests\n            passed_tests = $testResults.PassedTests\n            failed_tests = $testResults.FailedTests\n            success_rate = $successRate\n            test_duration = $testResults.TestDuration.ToString()\n        }\n        language_support = @{\n            tested_languages = $TestLanguages\n            sample_feedbacks_created = $true\n        }\n        details = $testResults.Details\n        recommendations = @(\n            "Desteklenen dilleri environment variable ile yapÄ±landÄ±rÄ±n",\n            "GÃ¼nlÃ¼k feedback limitini production ortamÄ±na gÃ¶re ayarlayÄ±n",\n            "Duygu analizi algoritmasÄ±nÄ± geliÅŸtirmek iÃ§in daha fazla Ã¶rnek kullanÄ±n",\n            "Otomatik yanÄ±tlarÄ± kullanÄ±cÄ± deneyimine gÃ¶re Ã¶zelleÅŸtirin"\n        )\n    }\n\n    $exportData | ConvertTo-Json -Depth 10 | Set-Content $jsonPath\n    Write-ColorOutput "ğŸ“„ Test sonuÃ§larÄ± JSON olarak kaydedildi: $jsonPath" "Green"\n}\n\n# Badge tetikleme\nif ($testResults.PassedTests -gt 0) {\n    Show-Badge "Feedback-Globalized"\n}\n\n# Final sonuÃ§\nWrite-ColorOutput "" "White"\nif ($testResults.FailedTests -eq 0) {\n    Write-ColorOutput "ğŸ‰ TÃ¼m Ã§ok dilli geri bildirim testleri baÅŸarÄ±lÄ±! CI/CD pipeline devam edebilir." "Green"\n    exit 0\n} else {\n    Write-ColorOutput "ğŸ’¥ BazÄ± geri bildirim testleri baÅŸarÄ±sÄ±z. LÃ¼tfen dil desteÄŸi ayarlarÄ±nÄ± kontrol edin." "Red"\n    exit 1\n}\n\n# Badge gÃ¶sterme fonksiyonu\nfunction Show-Badge {\n    param([string]$BadgeName)\n\n    Write-ColorOutput "ğŸ… Badge kazanÄ±ldÄ±: $BadgeName" "Cyan"\n\n    # Badge dosyasÄ±nÄ± gÃ¼ncelle (varsa)\n    $badgeFile = Join-Path $ProjectPath "badge.json"\n    if (Test-Path $badgeFile) {\n        try {\n            $badgeData = Get-Content $badgeFile -Raw | ConvertFrom-Json\n            if ($badgeData.PSObject.Properties.Name -notcontains $BadgeName) {\n                $badgeData | Add-Member -MemberType NoteProperty -Name $BadgeName -Value $true\n                $badgeData | ConvertTo-Json | Set-Content $badgeFile\n                Write-ColorOutput "  âœ… Badge dosyasÄ± gÃ¼ncellendi" "Green"\n            } else {\n                $badgeData.$BadgeName = $true\n                $badgeData | ConvertTo-Json | Set-Content $badgeFile\n                Write-ColorOutput "  âœ… Badge dosyasÄ± gÃ¼ncellendi" "Green"\n            }\n        } catch {\n            Write-ColorOutput "  âš ï¸  Badge dosyasÄ± gÃ¼ncellenemedi" "Yellow"\n        }\n    } else {\n        # Yeni badge dosyasÄ± oluÅŸtur\n        $newBadgeData = @{\n            $BadgeName = $true\n        }\n        $newBadgeData | ConvertTo-Json | Set-Content $badgeFile\n        Write-ColorOutput "  âœ… Yeni badge dosyasÄ± oluÅŸturuldu" "Green"\n    }\n}\n