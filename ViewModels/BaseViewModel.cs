using System;\nusing System.Threading.Tasks;\nusing System.Windows.Input;\nusing Microsoft.Maui.Devices.Sensors;\nusing KesifUygulamasiTemplate.Models;\nusing KesifUygulamasiTemplate.Services;\nusing KesifUygulamasiTemplate.ViewModels.Base;\n\nnamespace KesifUygulamasiTemplate.ViewModels\n{\n    public class ARMoonCompassViewModel : BaseViewModel\n    {\n        private readonly IMoonCompassService _moonCompassService;\n        private Location? _currentLocation;\n        private double _moonAzimuth;\n        private double _moonAltitude;\n        private DateTime _currentTime;\n\n        public Location? CurrentLocation\n        {\n            get => _currentLocation;\n            set => SetProperty(ref _currentLocation, value);\n        }\n        public double MoonAzimuth\n        {\n            get => _moonAzimuth;\n            set => SetProperty(ref _moonAzimuth, value);\n        }\n        public double MoonAltitude\n        {\n            get => _moonAltitude;\n            set => SetProperty(ref _moonAltitude, value);\n        }\n        public DateTime CurrentTime\n        {\n            get => _currentTime;\n            set => SetProperty(ref _currentTime, value);\n        }\n\n        public ICommand RefreshCommand { get; }\n\n        public ARMoonCompassViewModel(IMoonCompassService moonCompassService)\n        {\n            _moonCompassService = moonCompassService;\n            RefreshCommand = new Command(async () => await RefreshAsync());\n            CurrentTime = DateTime.Now;\n        }\n\n        public async Task RefreshAsync()\n        {\n            await ExecuteAsync(async () =>\n            {\n                // Konum al\n                var location = await Geolocation.GetLastKnownLocationAsync() ?? await Geolocation.GetLocationAsync();\n                if (location != null)\n                {\n                    CurrentLocation = location;\n                    // Ay konumu hesapla\n                    var moonData = await _moonCompassService.GetMoonDataAsync(location.Latitude, location.Longitude);\n                    MoonAzimuth = moonData.Azimuth; // Modelde yoksa eklenmeli\n                    MoonAltitude = moonData.Altitude; // Modelde yoksa eklenmeli\n                }\n            }, "AR verileri gï¿½ncelleniyor...");\n        }\n    }\n}\n