using System;\nusing System.Collections.Generic;\nusing System.Globalization;\nusing System.Windows.Input;\nusing KesifUygulamasiTemplate.Services;\nusing Microsoft.Maui.Controls;\nusing KesifUygulamasiTemplate.ViewModels.Base;\n\nnamespace KesifUygulamasiTemplate.ViewModels\n{\n    public class LanguageSettingsViewModel : BaseViewModel\n    {\n        private List<LanguageModel>? _availableLanguages;\n        private LanguageModel? _selectedLanguage;\n\n        public List<LanguageModel>? AvailableLanguages\n        {\n            get => _availableLanguages;\n            set => SetProperty(ref _availableLanguages, value);\n        }\n\n        public LanguageModel? SelectedLanguage\n        {\n            get => _selectedLanguage;\n            set\n            {\n                if (SetProperty(ref _selectedLanguage, value) && value != null)\n                {\n                    ChangeLanguage(value.CultureCode);\n                }\n            }\n        }\n\n        public ICommand ChangeLanguageCommand { get; }\n\n        public LanguageSettingsViewModel()\n        {\n            ChangeLanguageCommand = new Command<string>(ChangeLanguage);\n            InitializeLanguages();\n        }\n\n        private void InitializeLanguages()\n        {\n            AvailableLanguages = new List<LanguageModel>\n            {\n                new LanguageModel { DisplayName = Resources.Strings.AppResources.LanguageTurkish, CultureCode = "tr" },\n                new LanguageModel { DisplayName = Resources.Strings.AppResources.LanguageEnglish, CultureCode = "en" }\n            };\n            string currentCulture = LocalizationService.CurrentCulture.TwoLetterISOLanguageName;\n            SelectedLanguage = AvailableLanguages.Find(l => l.CultureCode == currentCulture);\n        }\n\n        private void ChangeLanguage(string cultureCode)\n        {\n            if (string.IsNullOrEmpty(cultureCode))\n                return;\n            try\n            {\n                var newCulture = new CultureInfo(cultureCode);\n                LocalizationService.CurrentCulture = newCulture;\n                InitializeLanguages();\n            }\n            catch (Exception ex)\n            {\n                ErrorMessage = $"Dil de�i�tirme s�ras�nda hata olu�tu: {ex.Message}";\n            }\n        }\n    }\n\n    public class LanguageModel\n    {\n        public string DisplayName { get; set; }\n        public string CultureCode { get; set; }\n    }\n}\n