# =========================================\n# KesifApp PWA Test Scripti v3.0\n# ModÃ¼ler PWA Test Sistemi\n# =========================================\n# -*- coding: utf-8 -*-\n[Console]::OutputEncoding = [System.Text.Encoding]::UTF8\n\n# =========================================\n# YARDIMCI FONKSÄ°YONLAR\n# =========================================\n\n# Log fonksiyonu\nfunction Write-TestLog {\n    param(\n        [string]$Message,\n        [string]$Level = "INFO"\n    )\n\n    $timestamp = Get-Date -Format "yyyy-MM-dd HH:mm:ss"\n    $logEntry = "[$timestamp] [$Level] $Message"\n\n    if ($Verbose) {\n        switch ($Level) {\n            "ERROR" { Write-Host $logEntry -ForegroundColor Red }\n            "WARNING" { Write-Host $logEntry -ForegroundColor Yellow }\n            "SUCCESS" { Write-Host $logEntry -ForegroundColor Green }\n            default { Write-Host $logEntry -ForegroundColor Gray }\n        }\n    }\n\n    $logMessages += $logEntry\n}\n\nfunction Archive-TestResultsToHistory {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$JsonResultsPath = "pwa-test-results.json",\n        [Parameter(Mandatory = $false)]\n        [string]$HistoryPath = "test-history.json",\n        [Parameter(Mandatory = $false)]\n        [string]$DatabasePath = "test-database.json"\n    )\n\n    Write-Host "`nğŸ“š Test sonuÃ§larÄ± geÃ§miÅŸe arÅŸivleniyor..." -ForegroundColor Cyan\n\n    if (-not (Test-Path $JsonResultsPath)) {\n        Write-Host "âŒ Test sonuÃ§larÄ± dosyasÄ± bulunamadÄ±: $JsonResultsPath" -ForegroundColor Red\n        return\n    }\n\n    try {\n        # Test sonuÃ§larÄ±nÄ± oku\n        $testResults = Get-Content $JsonResultsPath -Raw | ConvertFrom-Json\n\n        # Test sonuÃ§larÄ±nÄ± hesapla\n        $details = $testResults.pwa_tests.details\n        $passedTests = 0\n        $failedTests = 0\n        $skippedTests = 0\n        $totalTests = 0\n\n        if ($details -and $details.PSObject.Properties) {\n            foreach ($property in $details.PSObject.Properties) {\n                $totalTests++\n                if ($property.Value -eq $true) { $passedTests++ }\n                elseif ($property.Value -eq $false) { $failedTests++ }\n                else { $skippedTests++ }\n            }\n        }\n\n        $successRate = if ($totalTests -gt 0) { [math]::Round(($passedTests / $totalTests) * 100, 1) } else { 0 }\n\n        # Test kaydÄ± oluÅŸtur\n        $testRecord = @{\n            id = [guid]::NewGuid().ToString()\n            timestamp = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n            duration_seconds = $testResults.metadata.test_duration_seconds\n            results = @{\n                total_tests = $totalTests\n                passed_tests = $passedTests\n                failed_tests = $failedTests\n                skipped_tests = $skippedTests\n                success_rate = $successRate\n                details = $testResults.pwa_tests.details\n            }\n            legal_compliance = if ($testResults.legal_compliance) { $testResults.legal_compliance.score } else { $null }\n            seo_score = if ($testResults.seo_score) { $testResults.seo_score.score } else { $null }\n            pagespeed_score = if ($testResults.seo_score -and $testResults.seo_score.checks) {\n                ($testResults.seo_score.checks | Where-Object { $_.Name -eq "PageSpeed Insights" }).Score\n            } else { $null }\n            core_web_vitals_score = if ($testResults.seo_score -and $testResults.seo_score.checks) {\n                ($testResults.seo_score.checks | Where-Object { $_.Name -eq "Core Web Vitals" }).Score\n            } else { $null }\n            lighthouse_score = if ($testResults.seo_score -and $testResults.seo_score.checks) {\n                ($testResults.seo_score.checks | Where-Object { $_.Name -eq "Lighthouse Performance" }).Score\n            } else { $null }\n            metadata = @{\n                script_version = $testResults.metadata.script_version\n                powershell_version = $testResults.metadata.powershell_version\n                hostname = $testResults.metadata.hostname\n                username = $testResults.metadata.username\n                base_url = $testResults.configuration.base_url\n            }\n        }\n\n        # GeÃ§miÅŸ dosyasÄ±na kaydet\n        $testResultsHashtable = @{}\n        foreach ($property in $details.PSObject.Properties) {\n            $testResultsHashtable[$property.Name] = $property.Value\n        }\n\n        Save-TestHistoryToJson -TestResults $testResultsHashtable -LegalResults @{\n            Score = $testRecord.legal_compliance\n        } -SEOResults @{\n            Score = $testRecord.seo_score\n            PageSpeed = @{ Score = $testRecord.pagespeed_score }\n            CoreWebVitals = @{ Score = $testRecord.core_web_vitals_score }\n            Lighthouse = @{ Score = $testRecord.lighthouse_score }\n        } -Duration ([TimeSpan]::FromSeconds($testRecord.duration_seconds)) -HistoryPath $HistoryPath\n\n        # VeritabanÄ±na kaydet\n        Save-TestToDatabase -TestResults $testResultsHashtable -LegalResults @{\n            Score = $testRecord.legal_compliance\n        } -SEOResults @{\n            Score = $testRecord.seo_score\n            PageSpeed = @{ Score = $testRecord.pagespeed_score }\n            CoreWebVitals = @{ Score = $testRecord.core_web_vitals_score }\n            Lighthouse = @{ Score = $testRecord.lighthouse_score }\n        } -Duration ([TimeSpan]::FromSeconds($testRecord.duration_seconds)) -DatabasePath $DatabasePath\n\n        Write-Host "âœ… Test sonuÃ§larÄ± geÃ§miÅŸe arÅŸivlendi" -ForegroundColor Green\n        Write-Host "ğŸ“Š BaÅŸarÄ± oranÄ±: $successRate%" -ForegroundColor White\n        Write-Host "ğŸ“… Zaman damgasÄ±: $($testRecord.timestamp)" -ForegroundColor White\n\n    } catch {\n        Write-Host "âŒ ArÅŸivleme baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "Archive error: $($_.Exception.Message)" "ERROR"\n    }\n}\n\nfunction Save-TestHistoryToJson {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [hashtable]$LegalResults = @{},\n        [Parameter(Mandatory = $false)]\n        [hashtable]$SEOResults = @{},\n        [Parameter(Mandatory = $false)]\n        [TimeSpan]$Duration = [TimeSpan]::Zero,\n        [Parameter(Mandatory = $false)]\n        [string]$HistoryPath = "test-history.json"\n    )\n\n    Write-Host "`nğŸ“š Test geÃ§miÅŸi arÅŸivleniyor..." -ForegroundColor Cyan\n\n    # Mevcut geÃ§miÅŸi oku\n    $history = @()\n    if (Test-Path $HistoryPath) {\n        try {\n            $history = Get-Content $HistoryPath -Raw | ConvertFrom-Json\n        } catch {\n            Write-Host "âš ï¸ GeÃ§miÅŸ dosya okunamadÄ±, yeni dosya oluÅŸturulacak" -ForegroundColor Yellow\n            $history = @()\n        }\n    }\n\n    # Test sonuÃ§larÄ±nÄ± hesapla\n    $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n    $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n    $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n    $totalTests = $TestResults.Count\n    $successRate = if ($totalTests -gt 0) { [math]::Round(($passedTests / $totalTests) * 100, 1) } else { 0 }\n\n    # Yeni test kaydÄ± oluÅŸtur\n    $testRecord = @{\n        id = [guid]::NewGuid().ToString()\n        timestamp = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n        duration_seconds = [math]::Round($Duration.TotalSeconds, 2)\n        results = @{\n            total_tests = $totalTests\n            passed_tests = $passedTests\n            failed_tests = $failedTests\n            skipped_tests = $skippedTests\n            success_rate = $successRate\n            details = $TestResults\n        }\n        legal_compliance = if ($LegalResults.Score) { $LegalResults.Score } else { $null }\n        seo_score = if ($SEOResults.Score) { $SEOResults.Score } else { $null }\n        pagespeed_score = if ($SEOResults.PageSpeed -and $SEOResults.PageSpeed.Score) { $SEOResults.PageSpeed.Score } else { $null }\n        core_web_vitals_score = if ($SEOResults.CoreWebVitals -and $SEOResults.CoreWebVitals.Score) { $SEOResults.CoreWebVitals.Score } else { $null }\n        lighthouse_score = if ($SEOResults.Lighthouse -and $SEOResults.Lighthouse.Score) { $SEOResults.Lighthouse.Score } else { $null }\n        metadata = @{\n            script_version = "3.0.0"\n            powershell_version = $PSVersionTable.PSVersion.ToString()\n            hostname = $env:COMPUTERNAME\n            username = $env:USERNAME\n            base_url = $BaseUrl\n        }\n    }\n\n    # GeÃ§miÅŸe ekle (en yeni en Ã¼stte)\n    $history = @($testRecord) + $history\n\n    # Son 100 kaydÄ± tut\n    if ($history.Count -gt 100) {\n        $history = $history[0..99]\n    }\n\n    # JSON olarak kaydet\n    $history | ConvertTo-Json -Depth 10 | Out-File -FilePath $HistoryPath -Encoding UTF8\n\n    Write-Host "âœ… Test geÃ§miÅŸi kaydedildi: $HistoryPath" -ForegroundColor Green\n    Write-Host "ğŸ“Š Toplam kayÄ±t sayÄ±sÄ±: $($history.Count)" -ForegroundColor White\n    Write-TestLog "Test history saved: $HistoryPath"\n}\n\nfunction Get-TestHistoryStatistics {\n    param(\n        [Parameter(Mandatory = $false)]\n        [string]$HistoryPath = "test-history.json",\n        [Parameter(Mandatory = $false)]\n        [int]$Days = 30\n    )\n\n    Write-Host "`nğŸ“ˆ Test geÃ§miÅŸi istatistikleri alÄ±nÄ±yor..." -ForegroundColor Cyan\n\n    if (-not (Test-Path $HistoryPath)) {\n        Write-Host "âŒ GeÃ§miÅŸ dosyasÄ± bulunamadÄ±: $HistoryPath" -ForegroundColor Red\n        return $null\n    }\n\n    try {\n        $history = Get-Content $HistoryPath -Raw | ConvertFrom-Json\n\n        # Son N gÃ¼n iÃ§indeki kayÄ±tlarÄ± filtrele\n        $cutoffDate = (Get-Date).AddDays(-$Days)\n        $recentHistory = $history | Where-Object {\n            [DateTime]::Parse($_.timestamp) -gt $cutoffDate\n        }\n\n        if ($recentHistory.Count -eq 0) {\n            Write-Host "âš ï¸ Son $Days gÃ¼nde test geÃ§miÅŸi bulunamadÄ±" -ForegroundColor Yellow\n            return $null\n        }\n\n        # Ä°statistikler hesapla\n        $stats = @{\n            period_days = $Days\n            total_tests = $recentHistory.Count\n            average_success_rate = [math]::Round(($recentHistory.results.success_rate | Measure-Object -Average).Average, 1)\n            min_success_rate = [math]::Round(($recentHistory.results.success_rate | Measure-Object -Minimum).Minimum, 1)\n            max_success_rate = [math]::Round(($recentHistory.results.success_rate | Measure-Object -Maximum).Maximum, 1)\n            average_duration = [math]::Round(($recentHistory.duration_seconds | Measure-Object -Average).Average, 2)\n            trend = @{\n                improving = $false\n                direction = "stable"\n                change_percent = 0\n            }\n        }\n\n        # Trend analizi (son 5 test)\n        if ($recentHistory.Count -ge 5) {\n            $last5Tests = $recentHistory[0..4]\n            $firstHalf = $last5Tests[0..1].results.success_rate | Measure-Object -Average\n            $secondHalf = $last5Tests[2..4].results.success_rate | Measure-Object -Average\n\n            if ($firstHalf.Average -gt 0) {\n                $changePercent = [math]::Round((($secondHalf.Average - $firstHalf.Average) / $firstHalf.Average) * 100, 1)\n                $stats.trend.change_percent = $changePercent\n\n                if ($changePercent -gt 5) {\n                    $stats.trend.direction = "improving"\n                    $stats.trend.improving = $true\n                } elseif ($changePercent -lt -5) {\n                    $stats.trend.direction = "declining"\n                } else {\n                    $stats.trend.direction = "stable"\n                }\n            }\n        }\n\n        # Legal ve SEO trendleri\n        $legalScores = $recentHistory | Where-Object { $_.legal_compliance -ne $null } | Select-Object -ExpandProperty legal_compliance\n        $seoScores = $recentHistory | Where-Object { $_.seo_score -ne $null } | Select-Object -ExpandProperty seo_score\n\n        if ($legalScores.Count -gt 0) {\n            $stats.legal_average = [math]::Round(($legalScores | Measure-Object -Average).Average, 1)\n        }\n        if ($seoScores.Count -gt 0) {\n            $stats.seo_average = [math]::Round(($seoScores | Measure-Object -Average).Average, 1)\n        }\n\n        Write-Host "âœ… GeÃ§miÅŸ istatistikleri hesaplandÄ±:" -ForegroundColor Green\n        Write-Host "  ğŸ“Š Ortalama baÅŸarÄ±: $($stats.average_success_rate)%" -ForegroundColor White\n        Write-Host "  ğŸ“ˆ Trend: $($stats.trend.direction) ($($stats.trend.change_percent)%)" -ForegroundColor White\n        Write-Host "  â±ï¸ Ortalama sÃ¼re: $($stats.average_duration)s" -ForegroundColor White\n        if ($stats.legal_average) {\n            Write-Host "  âš–ï¸ Legal ortalama: $($stats.legal_average)/100" -ForegroundColor White\n        }\n        if ($stats.seo_average) {\n            Write-Host "  ğŸ” SEO ortalama: $($stats.seo_average)/100" -ForegroundColor White\n        }\n\n        return $stats\n\n    } catch {\n        Write-Host "âŒ GeÃ§miÅŸ istatistikleri alÄ±namadÄ±: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "History statistics error: $($_.Exception.Message)" "ERROR"\n        return $null\n    }\n}\n\nfunction Export-TestHistoryToCSV {\n    param(\n        [Parameter(Mandatory = $false)]\n        [string]$HistoryPath = "test-history.json",\n        [Parameter(Mandatory = $false)]\n        [string]$CsvPath = "test-history.csv",\n        [Parameter(Mandatory = $false)]\n        [int]$Days = 30\n    )\n\n    Write-Host "`nğŸ“Š Test geÃ§miÅŸi CSV'ye aktarÄ±lÄ±yor..." -ForegroundColor Cyan\n\n    if (-not (Test-Path $HistoryPath)) {\n        Write-Host "âŒ GeÃ§miÅŸ dosyasÄ± bulunamadÄ±: $HistoryPath" -ForegroundColor Red\n        return\n    }\n\n    try {\n        $history = Get-Content $HistoryPath -Raw | ConvertFrom-Json\n\n        # Son N gÃ¼n iÃ§indeki kayÄ±tlarÄ± filtrele\n        $cutoffDate = (Get-Date).AddDays(-$Days)\n        $recentHistory = $history | Where-Object {\n            [DateTime]::Parse($_.timestamp) -gt $cutoffDate\n        }\n\n        if ($recentHistory.Count -eq 0) {\n            Write-Host "âš ï¸ Son $Days gÃ¼nde test geÃ§miÅŸi bulunamadÄ±" -ForegroundColor Yellow\n            return\n        }\n\n        # CSV formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r\n        $csvData = $recentHistory | Select-Object @(\n            @{\n                Name = "Tarih"\n                Expression = { [DateTime]::Parse($_.timestamp).ToString("yyyy-MM-dd HH:mm:ss") }\n            },\n            @{\n                Name = "Basari_Orani"\n                Expression = { "$($_.results.success_rate)%" }\n            },\n            @{\n                Name = "Gecen_Testler"\n                Expression = { "$($_.results.passed_tests)/$($_.results.total_tests)" }\n            },\n            @{\n                Name = "Basarisiz_Testler"\n                Expression = { $_.results.failed_tests }\n            },\n            @{\n                Name = "Atlanan_Testler"\n                Expression = { $_.results.skipped_tests }\n            },\n            @{\n                Name = "Sure_Saniye"\n                Expression = { $_.duration_seconds }\n            },\n            @{\n                Name = "Legal_Skor"\n                Expression = { if ($_.legal_compliance) { "$($_.legal_compliance)/100" } else { "N/A" } }\n            },\n            @{\n                Name = "SEO_Skor"\n                Expression = { if ($_.seo_score) { "$($_.seo_score)/100" } else { "N/A" } }\n            },\n            @{\n                Name = "PageSpeed_Skor"\n                Expression = { if ($_.pagespeed_score) { "$($_.pagespeed_score)/100" } else { "N/A" } }\n            },\n            @{\n                Name = "Core_Web_Vitals"\n                Expression = { if ($_.core_web_vitals_score) { "$($_.core_web_vitals_score)/100" } else { "N/A" } }\n            },\n            @{\n                Name = "Lighthouse_Skor"\n                Expression = { if ($_.lighthouse_score) { "$($_.lighthouse_score)/100" } else { "N/A" } }\n            },\n            @{\n                Name = "Script_Version"\n                Expression = { $_.metadata.script_version }\n            },\n            @{\n                Name = "Hostname"\n                Expression = { $_.metadata.hostname }\n            },\n            @{\n                Name = "Username"\n                Expression = { $_.metadata.username }\n            }\n        )\n\n        # CSV olarak kaydet\n        $csvData | Export-Csv -Path $CsvPath -NoTypeInformation -Encoding UTF8\n\n        Write-Host "âœ… Test geÃ§miÅŸi CSV'ye aktarÄ±ldÄ±: $CsvPath" -ForegroundColor Green\n        Write-Host "ğŸ“Š AktarÄ±lan kayÄ±t sayÄ±sÄ±: $($csvData.Count)" -ForegroundColor White\n        Write-TestLog "Test history exported to CSV: $CsvPath"\n\n    } catch {\n        Write-Host "âŒ CSV aktarÄ±mÄ± baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "CSV export error: $($_.Exception.Message)" "ERROR"\n    }\n}\n\nfunction Initialize-TestDatabase {\n    param(\n        [Parameter(Mandatory = $false)]\n        [string]$DatabasePath = "test-database.json"\n    )\n\n    Write-Host "`nğŸ—„ï¸ Test veritabanÄ± baÅŸlatÄ±lÄ±yor..." -ForegroundColor Cyan\n\n    if (-not (Test-Path $DatabasePath)) {\n        $database = @{\n            metadata = @{\n                created = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n                version = "1.0"\n                description = "KesifApp PWA Test Database"\n            }\n            tests = @()\n            statistics = @{\n                total_tests = 0\n                last_updated = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n            }\n        }\n\n        $database | ConvertTo-Json -Depth 10 | Out-File -FilePath $DatabasePath -Encoding UTF8\n        Write-Host "âœ… Test veritabanÄ± oluÅŸturuldu: $DatabasePath" -ForegroundColor Green\n    } else {\n        Write-Host "â„¹ï¸ Test veritabanÄ± zaten mevcut: $DatabasePath" -ForegroundColor Cyan\n    }\n\n    Write-TestLog "Test database initialized: $DatabasePath"\n}\n\nfunction Save-TestToDatabase {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [hashtable]$LegalResults = @{},\n        [Parameter(Mandatory = $false)]\n        [hashtable]$SEOResults = @{},\n        [Parameter(Mandatory = $false)]\n        [TimeSpan]$Duration = [TimeSpan]::Zero,\n        [Parameter(Mandatory = $false)]\n        [string]$DatabasePath = "test-database.json"\n    )\n\n    Write-Host "`nğŸ’¾ Test veritabanÄ±na kaydediliyor..." -ForegroundColor Cyan\n\n    # VeritabanÄ±nÄ± oku\n    if (-not (Test-Path $DatabasePath)) {\n        Initialize-TestDatabase -DatabasePath $DatabasePath\n    }\n\n    try {\n        $database = Get-Content $DatabasePath -Raw | ConvertFrom-Json\n\n        # Test sonuÃ§larÄ±nÄ± hesapla\n        $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n        $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n        $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n        $totalTests = $TestResults.Count\n        $successRate = if ($totalTests -gt 0) { [math]::Round(($passedTests / $totalTests) * 100, 1) } else { 0 }\n\n        # Yeni test kaydÄ± oluÅŸtur\n        $testRecord = @{\n            id = [guid]::NewGuid().ToString()\n            timestamp = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n            duration_seconds = [math]::Round($Duration.TotalSeconds, 2)\n            results = @{\n                total_tests = $totalTests\n                passed_tests = $passedTests\n                failed_tests = $failedTests\n                skipped_tests = $skippedTests\n                success_rate = $successRate\n                details = $TestResults\n            }\n            legal_compliance = if ($LegalResults.Score) { $LegalResults.Score } else { $null }\n            seo_score = if ($SEOResults.Score) { $SEOResults.Score } else { $null }\n            pagespeed_score = if ($SEOResults.PageSpeed -and $SEOResults.PageSpeed.Score) { $SEOResults.PageSpeed.Score } else { $null }\n            core_web_vitals_score = if ($SEOResults.CoreWebVitals -and $SEOResults.CoreWebVitals.Score) { $SEOResults.CoreWebVitals.Score } else { $null }\n            lighthouse_score = if ($SEOResults.Lighthouse -and $SEOResults.Lighthouse.Score) { $SEOResults.Lighthouse.Score } else { $null }\n            metadata = @{\n                script_version = "3.0.0"\n                powershell_version = $PSVersionTable.PSVersion.ToString()\n                hostname = $env:COMPUTERNAME\n                username = $env:USERNAME\n                base_url = $BaseUrl\n            }\n        }\n\n        # VeritabanÄ±na ekle\n        $database.tests = @($testRecord) + $database.tests\n\n        # Son 500 kaydÄ± tut\n        if ($database.tests.Count -gt 500) {\n            $database.tests = $database.tests[0..499]\n        }\n\n        # Ä°statistikleri gÃ¼ncelle\n        $database.statistics.total_tests = $database.tests.Count\n        $database.statistics.last_updated = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n\n        # VeritabanÄ±nÄ± kaydet\n        $database | ConvertTo-Json -Depth 10 | Out-File -FilePath $DatabasePath -Encoding UTF8\n\n        Write-Host "âœ… Test veritabanÄ±na kaydedildi: $DatabasePath" -ForegroundColor Green\n        Write-Host "ğŸ“Š VeritabanÄ±ndaki toplam test sayÄ±sÄ±: $($database.tests.Count)" -ForegroundColor White\n        Write-TestLog "Test saved to database: $DatabasePath"\n\n    } catch {\n        Write-Host "âŒ VeritabanÄ± kaydetme hatasÄ±: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "Database save error: $($_.Exception.Message)" "ERROR"\n    }\n}\n\n# =========================================\n# GERÃ‡EK AÄ TESTLERÄ° MODÃœLÃœ\n# =========================================\n\nfunction Test-NetworkConnectivity {\n    param(\n        [string]$Url,\n        [int]$TimeoutSec = 30\n    )\n\n    Write-Host "`nğŸŒ AÄŸ BaÄŸlantÄ±sÄ± Testi:" -ForegroundColor Yellow\n    Write-TestLog "AÄŸ baÄŸlantÄ±sÄ± testi baÅŸlatÄ±lÄ±yor: $Url"\n\n    $networkResults = @{\n        DnsResolution = $false\n        HttpResponse = $false\n        ResponseTime = 0\n        StatusCode = 0\n        ErrorMessage = ""\n    }\n\n    try {\n        # DNS Ã§Ã¶zÃ¼mleme testi\n        Write-Host "ğŸ” DNS Ã§Ã¶zÃ¼mleme testi..." -ForegroundColor Gray\n        $dnsStart = Get-Date\n        $dnsResult = [System.Net.Dns]::GetHostAddresses($Url.Replace("https://", "").Replace("http://", "").Split('/')[0])\n        $dnsEnd = Get-Date\n        $dnsTime = ($dnsEnd - $dnsStart).TotalMilliseconds\n\n        if ($dnsResult.Count -gt 0) {\n            Write-Host "âœ… DNS Ã§Ã¶zÃ¼mleme baÅŸarÄ±lÄ±: $($dnsResult[0].IPAddressToString) ($([math]::Round($dnsTime, 2))ms)" -ForegroundColor Green\n            $networkResults.DnsResolution = $true\n            Write-TestLog "DNS Ã§Ã¶zÃ¼mleme baÅŸarÄ±lÄ±: $($dnsResult[0].IPAddressToString)"\n        } else {\n            Write-Host "âŒ DNS Ã§Ã¶zÃ¼mleme baÅŸarÄ±sÄ±z" -ForegroundColor Red\n            $networkResults.ErrorMessage = "DNS Ã§Ã¶zÃ¼mleme baÅŸarÄ±sÄ±z"\n            return $networkResults\n        }\n\n        # HTTP/HTTPS baÄŸlantÄ± testi\n        Write-Host "ğŸ”— HTTP baÄŸlantÄ±sÄ± testi..." -ForegroundColor Gray\n        $httpStart = Get-Date\n\n        # Timeout ile web isteÄŸi\n        $webRequest = [System.Net.WebRequest]::Create($Url)\n        $webRequest.Timeout = $TimeoutSec * 1000\n        $webRequest.Method = "HEAD"\n\n        $response = $webRequest.GetResponse()\n        $httpEnd = Get-Date\n        $responseTime = ($httpEnd - $httpStart).TotalMilliseconds\n\n        $networkResults.HttpResponse = $true\n        $networkResults.ResponseTime = [math]::Round($responseTime, 2)\n        $networkResults.StatusCode = [int]$response.StatusCode\n\n        Write-Host "âœ… HTTP yanÄ±tÄ± alÄ±ndÄ±: $($response.StatusCode) ($($networkResults.ResponseTime)ms)" -ForegroundColor Green\n        Write-TestLog "HTTP yanÄ±tÄ± baÅŸarÄ±lÄ±: $($response.StatusCode) - ${responseTime}ms"\n\n        $response.Close()\n\n    } catch {\n        Write-Host "âŒ AÄŸ testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        $networkResults.ErrorMessage = $_.Exception.Message\n        Write-TestLog "AÄŸ testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n    }\n\n    return $networkResults\n}\n\nfunction Test-FetchPerformance {\n    param(\n        [string]$Url,\n        [int]$TimeoutSec = 30\n    )\n\n    Write-Host "`nâš¡ Fetch Performans Testi:" -ForegroundColor Yellow\n    Write-TestLog "Fetch performans testi baÅŸlatÄ±lÄ±yor: $Url"\n\n    $fetchResults = @{\n        TotalTime = 0\n        DnsTime = 0\n        ConnectTime = 0\n        TlsTime = 0\n        ResponseTime = 0\n        DownloadTime = 0\n        ContentSize = 0\n        StatusCode = 0\n        ErrorMessage = ""\n    }\n\n    try {\n        $startTime = Get-Date\n\n        # WebClient ile detaylÄ± test\n        $webClient = New-Object System.Net.WebClient\n        $webClient.Headers.Add("User-Agent", "PWA-Test-Script/1.0")\n\n        # DNS Ã§Ã¶zÃ¼mleme zamanlamasÄ±\n        $dnsStart = Get-Date\n        [System.Net.Dns]::GetHostAddresses($Url.Replace("https://", "").Replace("http://", "").Split('/')[0]) | Out-Null\n        $dnsEnd = Get-Date\n        $fetchResults.DnsTime = [math]::Round(($dnsEnd - $dnsStart).TotalMilliseconds, 2)\n\n        # Ä°ndirme iÅŸlemi\n        $downloadStart = Get-Date\n        $content = $webClient.DownloadString($Url)\n        $downloadEnd = Get-Date\n\n        $endTime = Get-Date\n        $fetchResults.TotalTime = [math]::Round(($endTime - $startTime).TotalMilliseconds, 2)\n        $fetchResults.DownloadTime = [math]::Round(($downloadEnd - $downloadStart).TotalMilliseconds, 2)\n        $fetchResults.ContentSize = $content.Length\n        $fetchResults.ResponseTime = $fetchResults.TotalTime - $fetchResults.DownloadTime\n\n        Write-Host "âœ… Fetch tamamlandÄ±:" -ForegroundColor Green\n        Write-Host "  ğŸ“Š Toplam sÃ¼re: $($fetchResults.TotalTime)ms" -ForegroundColor White\n        Write-Host "  ğŸ” DNS sÃ¼resi: $($fetchResults.DnsTime)ms" -ForegroundColor White\n        Write-Host "  ğŸ“¡ YanÄ±t sÃ¼resi: $($fetchResults.ResponseTime)ms" -ForegroundColor White\n        Write-Host "  ğŸ“¥ Ä°ndirme sÃ¼resi: $($fetchResults.DownloadTime)ms" -ForegroundColor White\n        Write-Host "  ğŸ“ Ä°Ã§erik boyutu: $([math]::Round($fetchResults.ContentSize / 1024, 2)) KB" -ForegroundColor White\n\n        Write-TestLog "Fetch baÅŸarÄ±lÄ±: ${TotalTime}ms, ${ContentSize} bytes"\n\n    } catch {\n        Write-Host "âŒ Fetch testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        $fetchResults.ErrorMessage = $_.Exception.Message\n        Write-TestLog "Fetch testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n    }\n\n    return $fetchResults\n}\n\nfunction Test-NetworkTimeout {\n    param(\n        [string]$Url,\n        [int]$TimeoutSec = 5\n    )\n\n    Write-Host "`nâ±ï¸ AÄŸ Timeout Testi:" -ForegroundColor Yellow\n    Write-TestLog "Timeout testi baÅŸlatÄ±lÄ±yor: $Url (${TimeoutSec}s)"\n\n    $timeoutResults = @{\n        TimeoutOccurred = $false\n        ResponseTime = 0\n        StatusCode = 0\n        ErrorMessage = ""\n    }\n\n    try {\n        $startTime = Get-Date\n\n        $webRequest = [System.Net.WebRequest]::Create($Url)\n        $webRequest.Timeout = $TimeoutSec * 1000\n        $webRequest.Method = "HEAD"\n\n        $response = $webRequest.GetResponse()\n        $endTime = Get-Date\n        $responseTime = ($endTime - $startTime).TotalMilliseconds\n\n        $timeoutResults.ResponseTime = [math]::Round($responseTime, 2)\n        $timeoutResults.StatusCode = [int]$response.StatusCode\n\n        Write-Host "âœ… Timeout testi baÅŸarÄ±lÄ±: $($timeoutResults.ResponseTime)ms" -ForegroundColor Green\n        Write-TestLog "Timeout testi baÅŸarÄ±lÄ±: ${responseTime}ms"\n\n        $response.Close()\n\n    } catch [System.Net.WebException] {\n        if ($_.Exception.Status -eq [System.Net.WebExceptionStatus]::Timeout) {\n            Write-Host "âš ï¸ Timeout oluÅŸtu: ${TimeoutSec}s" -ForegroundColor Yellow\n            $timeoutResults.TimeoutOccurred = $true\n            Write-TestLog "Timeout oluÅŸtu: ${TimeoutSec}s"\n        } else {\n            Write-Host "âŒ AÄŸ hatasÄ±: $($_.Exception.Message)" -ForegroundColor Red\n            $timeoutResults.ErrorMessage = $_.Exception.Message\n            Write-TestLog "AÄŸ hatasÄ±: $($_.Exception.Message)" "ERROR"\n        }\n    } catch {\n        Write-Host "âŒ Timeout testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        $timeoutResults.ErrorMessage = $_.Exception.Message\n        Write-TestLog "Timeout testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n    }\n\n    return $timeoutResults\n}\n\n# Parametreler\n$BaseUrl = if ($args.Count -gt 0 -and $args[0] -notmatch '^-') { $args[0] } else { "https://kesifapp.com" }\n$Verbose = $args -contains '-Verbose' -or $args -contains '-verbose'\n$SkipNetworkTests = $args -contains '-SkipNetworkTests' -or $args -contains '-skipnetworktests'\n$ExportJson = $args -contains '-ExportJson' -or $args -contains '-exportjson'\n$GenerateDashboard = $args -contains '-GenerateDashboard' -or $args -contains '-generatedashboard'\n$IncludeLegalTests = $args -contains '-IncludeLegalTests' -or $args -contains '-includelegaltests'\n$IncludeSEOTests = $args -contains '-IncludeSEOTests' -or $args -contains '-includeseotests'\n\n# Webhook parametreleri (environment variables veya command line arguments)\n$SlackWebhookUrl = $env:PWA_SLACK_WEBHOOK_URL\n$DiscordWebhookUrl = $env:PWA_DISCORD_WEBHOOK_URL\n\n# Command line'dan webhook URL'leri al\nforeach ($arg in $args) {\n    if ($arg -match '^--slack-webhook=(.+)') {\n        $SlackWebhookUrl = $matches[1]\n    }\n    if ($arg -match '^--discord-webhook=(.+)') {\n        $DiscordWebhookUrl = $matches[1]\n    }\n}\n\nWrite-Host "ğŸ” KesifApp PWA Test Scripti v4.0 BaÅŸlatÄ±lÄ±yor..." -ForegroundColor Cyan\nWrite-Host "ğŸ“– KullanÄ±m: .\Test-PWA.ps1 [URL] [-Verbose] [-SkipNetworkTests] [-ExportJson] [-GenerateDashboard] [-IncludeLegalTests] [-IncludeSEOTests] [--slack-webhook=URL] [--discord-webhook=URL]" -ForegroundColor Gray\nWrite-Host "ğŸ“– Ã–rnekler:" -ForegroundColor Gray\nWrite-Host "   .\Test-PWA.ps1" -ForegroundColor Gray\nWrite-Host "   .\Test-PWA.ps1 https://kesifapp.com -Verbose -ExportJson -GenerateDashboard" -ForegroundColor Gray\nWrite-Host "   .\Test-PWA.ps1 -SkipNetworkTests -IncludeLegalTests -IncludeSEOTests" -ForegroundColor Gray\nWrite-Host "   .\Test-PWA.ps1 --slack-webhook=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK" -ForegroundColor Gray\nWrite-Host "   .\Test-PWA.ps1 --discord-webhook=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK" -ForegroundColor Gray\n\nif ($Verbose) {\n    Write-Host "ğŸ“‹ AyrÄ±ntÄ±lÄ± mod aktif" -ForegroundColor Yellow\n}\nif ($ExportJson) {\n    Write-Host "ğŸ“„ JSON export modu aktif" -ForegroundColor Yellow\n}\nif ($GenerateDashboard) {\n    Write-Host "ğŸ“Š Dashboard oluÅŸturma modu aktif" -ForegroundColor Yellow\n}\nif ($IncludeLegalTests) {\n    Write-Host "âš–ï¸ Legal testler dahil edildi" -ForegroundColor Yellow\n}\nif ($IncludeSEOTests) {\n    Write-Host "ğŸ” SEO testler dahil edildi" -ForegroundColor Yellow\n}\n\n# Global deÄŸiÅŸkenler\n$testResults = @{}\n$legalResults = @{}\n$seoResults = @{}\n$startTime = Get-Date\n$logMessages = @()\n\n# =========================================\n# DASHBOARD OLUÅTURMA MODÃœLÃœ\n# =========================================\n\nfunction Generate-PWADashboard {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $true)]\n        [hashtable]$LegalResults,\n        [Parameter(Mandatory = $true)]\n        [hashtable]$SEOResults,\n        [Parameter(Mandatory = $false)]\n        [string]$OutputPath = "pwa-dashboard.html"\n    )\n\n    Write-Host "`nğŸ“Š PWA Dashboard OluÅŸturuluyor..." -ForegroundColor Cyan\n\n    # Test sonuÃ§larÄ±nÄ± hesapla\n    $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n    $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n    $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n    $totalTests = $TestResults.Count\n    $successRate = if ($totalTests -gt 0) { [math]::Round(($passedTests / $totalTests) * 100, 1) } else { 0 }\n\n    # HTML dashboard oluÅŸtur\n    $htmlContent = @"\n<!DOCTYPE html>\n<html lang="tr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>PWA Test Dashboard - KesifApp</title>\n    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>\n    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">\n    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">\n    <style>\n        body { background-color: #f8f9fa; }\n        .card { border: none; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .metric-card { text-align: center; padding: 20px; }\n        .metric-value { font-size: 2.5rem; font-weight: bold; }\n        .metric-label { color: #6c757d; font-size: 0.9rem; }\n        .status-passed { color: #28a745; }\n        .status-failed { color: #dc3545; }\n        .status-skipped { color: #ffc107; }\n        .progress-circle {\n            width: 120px;\n            height: 120px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 1.5rem;\n            font-weight: bold;\n            margin: 0 auto;\n        }\n        .chart-container { position: relative; height: 300px; }\n    </style>\n</head>\n<body>\n    <div class="container-fluid py-4">\n        <div class="row mb-4">\n            <div class="col-12">\n                <div class="card">\n                    <div class="card-header bg-primary text-white">\n                        <h1 class="card-title mb-0">\n                            <i class="fas fa-mobile-alt me-2"></i>\n                            PWA Test Dashboard - KesifApp\n                        </h1>\n                        <small class="text-light">Test Tarihi: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")</small>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Genel Metrikler -->\n        <div class="row mb-4">\n            <div class="col-md-3">\n                <div class="card metric-card">\n                    <div class="progress-circle bg-primary text-white">\n                        $successRate%\n                    </div>\n                    <div class="metric-label">BaÅŸarÄ± OranÄ±</div>\n                </div>\n            </div>\n            <div class="col-md-3">\n                <div class="card metric-card">\n                    <div class="metric-value text-success">$passedTests</div>\n                    <div class="metric-label">GeÃ§en Testler</div>\n                </div>\n            </div>\n            <div class="col-md-3">\n                <div class="card metric-card">\n                    <div class="metric-value text-danger">$failedTests</div>\n                    <div class="metric-label">BaÅŸarÄ±sÄ±z Testler</div>\n                </div>\n            </div>\n            <div class="col-md-3">\n                <div class="card metric-card">\n                    <div class="metric-value text-warning">$skippedTests</div>\n                    <div class="metric-label">Atlanan Testler</div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Grafikler -->\n        <div class="row mb-4">\n            <div class="col-md-6">\n                <div class="card">\n                    <div class="card-header">\n                        <h5 class="card-title mb-0">\n                            <i class="fas fa-chart-pie me-2"></i>\n                            Test SonuÃ§larÄ± DaÄŸÄ±lÄ±mÄ±\n                        </h5>\n                    </div>\n                    <div class="card-body">\n                        <div class="chart-container">\n                            <canvas id="resultsChart"></canvas>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6">\n                <div class="card">\n                    <div class="card-header">\n                        <h5 class="card-title mb-0">\n                            <i class="fas fa-chart-bar me-2"></i>\n                            Test DetaylarÄ±\n                        </h5>\n                    </div>\n                    <div class="card-body">\n                        <div class="chart-container">\n                            <canvas id="detailsChart"></canvas>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Test DetaylarÄ± Tablosu -->\n        <div class="row mb-4">\n            <div class="col-12">\n                <div class="card">\n                    <div class="card-header">\n                        <h5 class="card-title mb-0">\n                            <i class="fas fa-list-check me-2"></i>\n                            Test DetaylarÄ±\n                        </h5>\n                    </div>\n                    <div class="card-body">\n                        <div class="table-responsive">\n                            <table class="table table-striped">\n                                <thead>\n                                    <tr>\n                                        <th>Test AdÄ±</th>\n                                        <th>Durum</th>\n                                        <th>Detaylar</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n"@\n\n    # Test sonuÃ§larÄ±nÄ± tabloya ekle\n    foreach ($test in $TestResults.GetEnumerator()) {\n        $status = switch ($test.Value) {\n            $true { '<span class="badge bg-success"><i class="fas fa-check me-1"></i>BaÅŸarÄ±lÄ±</span>' }\n            $false { '<span class="badge bg-danger"><i class="fas fa-times me-1"></i>BaÅŸarÄ±sÄ±z</span>' }\n            $null { '<span class="badge bg-warning"><i class="fas fa-pause me-1"></i>AtlandÄ±</span>' }\n            default { '<span class="badge bg-secondary"><i class="fas fa-question me-1"></i>Bilinmiyor</span>' }\n        }\n\n        $details = switch ($test.Key) {\n            "Manifest" { "PWA manifest dosyasÄ± kontrolÃ¼" }\n            "ServiceWorker" { "Service Worker iÅŸlevselliÄŸi kontrolÃ¼" }\n            "Ana Sayfa" { "Ana sayfa PWA entegrasyonu" }\n            "Yasal Sayfa" { "Yasal sayfa PWA entegrasyonu" }\n            "Gizlilik SayfasÄ±" { "Gizlilik sayfasÄ± PWA entegrasyonu" }\n            "404 SayfasÄ±" { "404 sayfasÄ± PWA entegrasyonu" }\n            "OfflineFallback" { "Offline fallback sayfasÄ± kontrolÃ¼" }\n            default { "Test aÃ§Ä±klamasÄ±" }\n        }\n\n        $htmlContent += @"\n                                    <tr>\n                                        <td>$($test.Key)</td>\n                                        <td>$status</td>\n                                        <td>$details</td>\n                                    </tr>\n"@\n    }\n\n    $htmlContent += @"\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Ã–neriler -->\n        <div class="row">\n            <div class="col-12">\n                <div class="card">\n                    <div class="card-header">\n                        <h5 class="card-title mb-0">\n                            <i class="fas fa-lightbulb me-2"></i>\n                            Ä°yileÅŸtirme Ã–nerileri\n                        </h5>\n                    </div>\n                    <div class="card-body">\n                        <div class="row">\n                            <div class="col-md-6">\n                                <h6>PWA Ä°yileÅŸtirmeleri:</h6>\n                                <ul class="list-unstyled">\n                                    <li><i class="fas fa-check-circle text-success me-2"></i>Manifest.json'da tÃ¼m gerekli alanlarÄ±n doldurulduÄŸundan emin olun</li>\n                                    <li><i class="fas fa-check-circle text-success me-2"></i>Service Worker'Ä±n tÃ¼m event handler'larÄ±nÄ± iÃ§erdiÄŸinden emin olun</li>\n                                    <li><i class="fas fa-check-circle text-success me-2"></i>TÃ¼m HTML sayfalarÄ±nda PWA meta etiketlerinin mevcut olduÄŸundan emin olun</li>\n                                    <li><i class="fas fa-check-circle text-success me-2"></i>HTTPS protokolÃ¼ kullanÄ±ldÄ±ÄŸÄ±ndan emin olun</li>\n                                </ul>\n                            </div>\n                            <div class="col-md-6">\n                                <h6>SEO Ä°yileÅŸtirmeleri:</h6>\n                                <ul class="list-unstyled">\n                                    <li><i class="fas fa-search me-2"></i>Meta title ve description etiketlerini optimize edin</li>\n                                    <li><i class="fas fa-hashtag me-2"></i>Open Graph ve Twitter Card etiketlerini ekleyin</li>\n                                    <li><i class="fas fa-image me-2"></i>TÃ¼m resimlere alt attribute'larÄ± ekleyin</li>\n                                    <li><i class="fas fa-sitemap me-2"></i>Structured data markup'larÄ± ekleyin</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        // Test sonuÃ§larÄ± grafiÄŸi\n        const resultsCtx = document.getElementById('resultsChart').getContext('2d');\n        new Chart(resultsCtx, {\n            type: 'doughnut',\n            data: {\n                labels: ['BaÅŸarÄ±lÄ±', 'BaÅŸarÄ±sÄ±z', 'AtlandÄ±'],\n                datasets: [{\n                    data: [$passedTests, $failedTests, $skippedTests],\n                    backgroundColor: ['#28a745', '#dc3545', '#ffc107'],\n                    borderWidth: 0\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: {\n                        position: 'bottom'\n                    }\n                }\n            }\n        });\n\n        // Test detaylarÄ± grafiÄŸi\n        const detailsCtx = document.getElementById('detailsChart').getContext('2d');\n        new Chart(detailsCtx, {\n            type: 'bar',\n            data: {\n                labels: ['Toplam Test', 'GeÃ§en Test', 'BaÅŸarÄ±sÄ±z Test', 'Atlanan Test'],\n                datasets: [{\n                    label: 'Test SayÄ±sÄ±',\n                    data: [$totalTests, $passedTests, $failedTests, $skippedTests],\n                    backgroundColor: ['#007bff', '#28a745', '#dc3545', '#ffc107'],\n                    borderWidth: 0\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                    y: {\n                        beginAtZero: true\n                    }\n                }\n            }\n        });\n    </script>\n\n    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>\n</body>\n</html>\n"@\n\n    # HTML dosyasÄ±nÄ± kaydet\n    $htmlContent | Out-File -FilePath $OutputPath -Encoding UTF8\n\n    Write-Host "ğŸ“„ PWA Dashboard oluÅŸturuldu: $OutputPath" -ForegroundColor Green\n    Write-TestLog "PWA dashboard generated: $OutputPath"\n}\n\n# =========================================\n# BADGE ÃœRETÄ°M MODÃœLÃœ\n# =========================================\n\nfunction Generate-PWABadges {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [string]$OutputPath = "pwa-badges.md",\n        [Parameter(Mandatory = $false)]\n        [hashtable]$TrendAnalysis = $null\n    )\n\n    Write-Host "`nğŸ·ï¸ PWA Badges OluÅŸturuluyor..." -ForegroundColor Cyan\n\n    # Test sonuÃ§larÄ±nÄ± hesapla\n    $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n    $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n    $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n    $totalTests = $TestResults.Count\n    $successRate = if ($totalTests -gt 0) { [math]::Round(($passedTests / $totalTests) * 100, 1) } else { 0 }\n\n    # Trend analizini dahil et (varsa)\n    $trendDirection = "stable"\n    $trendChangePercent = 0\n    $trendIndicator = "â¡ï¸"\n\n    if ($TrendAnalysis -and $TrendAnalysis.trend) {\n        $trendDirection = $TrendAnalysis.trend.direction\n        $trendChangePercent = $TrendAnalysis.trend.change_percent\n\n        $trendIndicator = switch ($trendDirection) {\n            "improving" { "ğŸ“ˆ" }\n            "declining" { "ğŸ“‰" }\n            default { "â¡ï¸" }\n        }\n\n        Write-Host "ğŸ“Š Trend analizi: $trendDirection ($trendChangePercent%)" -ForegroundColor Cyan\n    }\n\n    # Dinamik badge renklerini belirle (trend ve baÅŸarÄ± oranÄ±na gÃ¶re optimize edilmiÅŸ)\n    $badgeColor = switch ($successRate) {\n        { $_ -ge 90 } {\n            # YÃ¼ksek baÅŸarÄ± + olumlu trend = daha parlak renk\n            if ($trendDirection -eq "improving") {\n                "brightgreen"\n                Write-Host "ğŸ¨ Badge rengi: Parlak YeÅŸil (BaÅŸarÄ± â‰¥90% + Ä°yileÅŸen Trend)" -ForegroundColor Green\n            } else {\n                "green"\n                Write-Host "ğŸ¨ Badge rengi: YeÅŸil (BaÅŸarÄ± â‰¥90%)" -ForegroundColor Green\n            }\n        }\n        { $_ -ge 70 } {\n            # Orta baÅŸarÄ± + trend analizi\n            if ($trendDirection -eq "improving") {\n                "yellowgreen"\n                Write-Host "ğŸ¨ Badge rengi: SarÄ±-YeÅŸil (BaÅŸarÄ± 70-89% + Ä°yileÅŸen Trend)" -ForegroundColor DarkGreen\n            } elseif ($trendDirection -eq "declining") {\n                "orange"\n                Write-Host "ğŸ¨ Badge rengi: Turuncu (BaÅŸarÄ± 70-89% + DÃ¼ÅŸen Trend)" -ForegroundColor DarkYellow\n            } else {\n                "yellow"\n                Write-Host "ğŸ¨ Badge rengi: SarÄ± (BaÅŸarÄ± 70-89%)" -ForegroundColor Yellow\n            }\n        }\n        { $_ -ge 50 } {\n            # DÃ¼ÅŸÃ¼k-orta baÅŸarÄ± + trend analizi\n            if ($trendDirection -eq "improving") {\n                "yellow"\n                Write-Host "ğŸ¨ Badge rengi: SarÄ± (BaÅŸarÄ± 50-69% + Ä°yileÅŸen Trend)" -ForegroundColor Yellow\n            } else {\n                "orange"\n                Write-Host "ğŸ¨ Badge rengi: Turuncu (BaÅŸarÄ± 50-69%)" -ForegroundColor DarkYellow\n            }\n        }\n        default {\n            # DÃ¼ÅŸÃ¼k baÅŸarÄ± + trend analizi\n            if ($trendDirection -eq "improving") {\n                "orange"\n                Write-Host "ğŸ¨ Badge rengi: Turuncu (BaÅŸarÄ± <50% + Ä°yileÅŸen Trend)" -ForegroundColor DarkYellow\n            } else {\n                "red"\n                Write-Host "ğŸ¨ Badge rengi: KÄ±rmÄ±zÄ± (BaÅŸarÄ± <50%)" -ForegroundColor Red\n            }\n        }\n    }\n\n    # Son test tarihini al\n    $lastTestDate = Get-Date -Format "yyyy-MM-dd"\n    $lastTestTime = Get-Date -Format "HH:mm"\n\n    # Trend bilgilerini badge'a ekle\n    $trendText = if ($TrendAnalysis) {\n        "$trendIndicator $trendDirection ($trendChangePercent%)"\n    } else {\n        "Trend: N/A"\n    }\n\n    # Badge markdown iÃ§eriÄŸi\n    $badgeContent = @"\n<!-- PWA Test Badges - Otomatik GÃ¼ncellenir -->\n[![PWA Tests](https://img.shields.io/badge/PWA_Tests-$successRate%25-$badgeColor)](https://github.com/VahitKirbiyik/KesifUygulamasiTemplate/actions/workflows/pwa-test.yml)\n[![PWA Score](https://img.shields.io/badge/PWA_Score-$successRate%25-$badgeColor)](https://kesifapp.com/pwa-dashboard.html)\n[![Tests Passed](https://img.shields.io/badge/Tests_Passed-$passedTests/$totalTests-brightgreen)](https://github.com/VahitKirbiyik/KesifUygulamasiTemplate/actions/workflows/pwa-test.yml)\n[![Tests Failed](https://img.shields.io/badge/Tests_Failed-$failedTests-red)](https://github.com/VahitKirbiyik/KesifUygulamasiTemplate/actions/workflows/pwa-test.yml)\n[![Tests Skipped](https://img.shields.io/badge/Tests_Skipped-$skippedTests-yellow)](https://github.com/VahitKirbiyik/KesifUygulamasiTemplate/actions/workflows/pwa-test.yml)\n[![Trend](https://img.shields.io/badge/Trend-$($trendDirection.ToUpper())-$badgeColor)](https://github.com/VahitKirbiyik/KesifUygulamasiTemplate/actions/workflows/pwa-test.yml)\n\n<!-- Shields.io Badges with Style -->\n![PWA](https://img.shields.io/badge/PWA-Ready-$badgeColor?style=for-the-badge&logo=pwa)\n![Progressive Web App](https://img.shields.io/badge/Progressive_Web_App-$successRate%25-$badgeColor?style=for-the-badge&logo=web)\n![Test Status](https://img.shields.io/badge/Test_Status-$(if ($successRate -ge 70) { 'Passing' } else { 'Failing' })-$badgeColor?style=for-the-badge&logo=github-actions)\n![Trend Status](https://img.shields.io/badge/Trend-$($trendDirection.ToUpper())-$badgeColor?style=for-the-badge&logo=chart-with-upwards-trend)\n\n<!-- Test Summary -->\n| Metrik | DeÄŸer |\n|--------|-------|\n| BaÅŸarÄ± OranÄ± | **$successRate%** |\n| GeÃ§en Testler | **$passedTests** |\n| BaÅŸarÄ±sÄ±z Testler | **$failedTests** |\n| Atlanan Testler | **$skippedTests** |\n| Toplam Testler | **$totalTests** |\n| Trend YÃ¶nÃ¼ | **$trendText** |\n| Son Test Tarihi | **$lastTestDate $lastTestTime** |\n| Badge Rengi | **$($badgeColor.ToUpper())** |\n\n<!-- Otomatik GÃ¼ncelleme Notu -->\n> Bu badge'ler her test Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda otomatik olarak gÃ¼ncellenir.\n> Son gÃ¼ncelleme: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")\n> Trend analizi son 5 test sonucuna gÃ¶re hesaplanÄ±r.\n"@\n\n    # Badge dosyasÄ±nÄ± kaydet\n    $badgeContent | Out-File -FilePath $OutputPath -Encoding UTF8\n\n    Write-Host "âœ… PWA badges gÃ¼ncellendi: $OutputPath" -ForegroundColor Green\n    Write-Host "ğŸ“Š BaÅŸarÄ± oranÄ±: $successRate% | Badge rengi: $badgeColor | Trend: $trendDirection" -ForegroundColor White\n    Write-TestLog "PWA badges generated: $OutputPath (Success Rate: $successRate%, Color: $badgeColor, Trend: $trendDirection)"\n\n    return @{\n        SuccessRate = $successRate\n        BadgeColor = $badgeColor\n        Content = $badgeContent\n        PassedTests = $passedTests\n        FailedTests = $failedTests\n        SkippedTests = $skippedTests\n        TotalTests = $totalTests\n        TrendDirection = $trendDirection\n        TrendChangePercent = $trendChangePercent\n        LastUpdate = Get-Date -Format "yyyy-MM-dd HH:mm:ss"\n    }\n}\n\n# =========================================\n# PWA TEST MODÃœLLERÄ°\n# =========================================\n\nfunction Test-PWAManifest {\n    Write-Host "`nï¿½ Manifest.json Testi:" -ForegroundColor Yellow\n    Write-TestLog "Manifest.json testi baÅŸlatÄ±lÄ±yor"\n\n    try {\n        if (-not $SkipNetworkTests) {\n            $manifestResponse = Invoke-WebRequest -Uri "$BaseUrl/manifest.json" -UseBasicParsing -TimeoutSec 30\n            Write-TestLog "Manifest.json HTTP yanÄ±tÄ± alÄ±ndÄ±: $($manifestResponse.StatusCode)"\n\n            if ($manifestResponse.StatusCode -eq 200) {\n                try {\n                    $manifest = $manifestResponse.Content | ConvertFrom-Json\n                    Write-Host "âœ… Manifest.json eriÅŸilebilir" -ForegroundColor Green\n                    Write-TestLog "Manifest.json baÅŸarÄ±yla parse edildi"\n\n                    # Manifest iÃ§eriÄŸi kontrolÃ¼\n                    $requiredFields = @("name", "short_name", "start_url", "display", "icons")\n                    $optionalFields = @("description", "theme_color", "background_color", "lang", "scope")\n\n                    $manifestScore = 0\n                    foreach ($field in $requiredFields) {\n                        if ($manifest.PSObject.Properties.Name -contains $field) {\n                            $value = $manifest.$field\n                            if ($value) {\n                                Write-Host "âœ… $field alanÄ± mevcut: $value" -ForegroundColor Green\n                                Write-TestLog "$field alanÄ± doÄŸrulandÄ±: $value"\n                                $manifestScore += 20\n                            } else {\n                                Write-Host "âš ï¸ $field alanÄ± boÅŸ" -ForegroundColor Yellow\n                                $manifestScore += 10\n                            }\n                        } else {\n                            Write-Host "âŒ $field alanÄ± eksik" -ForegroundColor Red\n                            Write-TestLog "$field alanÄ± bulunamadÄ±" "WARN"\n                        }\n                    }\n\n                    # Ä°steÄŸe baÄŸlÄ± alanlarÄ± kontrol et\n                    foreach ($field in $optionalFields) {\n                        if ($manifest.PSObject.Properties.Name -contains $field) {\n                            Write-Host "â„¹ï¸ $field alanÄ± mevcut: $($manifest.$field)" -ForegroundColor Cyan\n                            $manifestScore += 5\n                        }\n                    }\n\n                    $testResults["Manifest"] = $manifestScore -ge 60\n                    return @{ Score = $manifestScore; Details = $manifest }\n                }\n                catch {\n                    Write-Host "âŒ Manifest.json parse edilemedi: $($_.Exception.Message)" -ForegroundColor Red\n                    Write-TestLog "JSON parse hatasÄ±: $($_.Exception.Message)" "ERROR"\n                    $testResults["Manifest"] = $false\n                    return @{ Score = 0; Details = $null }\n                }\n            } else {\n                Write-Host "âŒ Manifest.json eriÅŸilemiyor (Status: $($manifestResponse.StatusCode))" -ForegroundColor Red\n                $testResults["Manifest"] = $false\n                return @{ Score = 0; Details = $null }\n            }\n        } else {\n            Write-Host "â­ï¸ AÄŸ testleri atlandÄ±" -ForegroundColor Yellow\n            $testResults["Manifest"] = $null\n            return @{ Score = 0; Details = $null }\n        }\n    }\n    catch {\n        Write-Host "âŒ Manifest.json testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "Manifest testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n        $testResults["Manifest"] = $false\n        return @{ Score = 0; Details = $null }\n    }\n}\n\nfunction Test-PWAServiceWorker {\n    Write-Host "`nâš™ï¸ Service Worker Testi:" -ForegroundColor Yellow\n    Write-TestLog "Service Worker testi baÅŸlatÄ±lÄ±yor"\n\n    try {\n        if (-not $SkipNetworkTests) {\n            $swResponse = Invoke-WebRequest -Uri "$BaseUrl/service-worker.js" -UseBasicParsing -TimeoutSec 30\n            Write-TestLog "Service Worker HTTP yanÄ±tÄ± alÄ±ndÄ±: $($swResponse.StatusCode)"\n\n            if ($swResponse.StatusCode -eq 200) {\n                Write-Host "âœ… service-worker.js eriÅŸilebilir" -ForegroundColor Green\n\n                # Service Worker iÃ§eriÄŸi kontrolÃ¼\n                $swContent = $swResponse.Content\n                $swChecks = @(\n                    @{ Name = "Install event"; Pattern = "install"; Required = $true; Weight = 20 },\n                    @{ Name = "Activate event"; Pattern = "activate"; Required = $true; Weight = 20 },\n                    @{ Name = "Fetch event"; Pattern = "fetch"; Required = $true; Weight = 20 },\n                    @{ Name = "Cache management"; Pattern = "caches"; Required = $true; Weight = 15 },\n                    @{ Name = "Error handling"; Pattern = "addEventListener.*error"; Required = $false; Weight = 10 },\n                    @{ Name = "Push notifications"; Pattern = "push"; Required = $false; Weight = 10 },\n                    @{ Name = "Background sync"; Pattern = "sync"; Required = $false; Weight = 5 }\n                )\n\n                $swScore = 0\n                $totalChecks = $swChecks.Count\n\n                foreach ($check in $swChecks) {\n                    if ($swContent -match $check.Pattern) {\n                        $symbol = if ($check.Required) { "âœ…" } else { "â„¹ï¸" }\n                        $color = if ($check.Required) { "Green" } else { "Cyan" }\n                        Write-Host "$symbol $($check.Name) handler mevcut" -ForegroundColor $color\n                        $swScore += $check.Weight\n                        Write-TestLog "$($check.Name) handler bulundu"\n                    } else {\n                        $symbol = if ($check.Required) { "âŒ" } else { "âšª" }\n                        $color = if ($check.Required) { "Red" } else { "Gray" }\n                        Write-Host "$symbol $($check.Name) handler eksik" -ForegroundColor $color\n                        if ($check.Required) {\n                            Write-TestLog "$($check.Name) handler eksik" "WARN"\n                        }\n                    }\n                }\n\n                $swPercentage = [math]::Round(($swScore / 100) * 100, 1)\n                Write-Host "ğŸ“Š Service Worker kapsamÄ±: $swPercentage%" -ForegroundColor Yellow\n\n                $testResults["ServiceWorker"] = $swScore -ge 75\n                return @{ Score = $swScore; Percentage = $swPercentage; Details = $swChecks }\n            } else {\n                Write-Host "âŒ service-worker.js eriÅŸilemiyor (Status: $($swResponse.StatusCode))" -ForegroundColor Red\n                $testResults["ServiceWorker"] = $false\n                return @{ Score = 0; Percentage = 0; Details = $null }\n            }\n        } else {\n            Write-Host "â­ï¸ AÄŸ testleri atlandÄ±" -ForegroundColor Yellow\n            $testResults["ServiceWorker"] = $null\n            return @{ Score = 0; Percentage = 0; Details = $null }\n        }\n    }\n    catch {\n        Write-Host "âŒ Service Worker testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "Service Worker testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n        $testResults["ServiceWorker"] = $false\n        return @{ Score = 0; Percentage = 0; Details = $null }\n    }\n}\n\nfunction Test-PWAHTMLIntegration {\n    Write-Host "`nğŸŒ HTML PWA Entegrasyonu Testi:" -ForegroundColor Yellow\n    Write-TestLog "HTML PWA entegrasyonu testi baÅŸlatÄ±lÄ±yor"\n\n    $pagesToTest = @(\n        @{ Name = "Ana Sayfa"; Url = "$BaseUrl/"; File = "index.html" },\n        @{ Name = "Yasal Sayfa"; Url = "$BaseUrl/legal.html"; File = "legal.html" },\n        @{ Name = "Gizlilik SayfasÄ±"; Url = "$BaseUrl/privacy-policy.html"; File = "privacy-policy.html" },\n        @{ Name = "404 SayfasÄ±"; Url = "$BaseUrl/404.html"; File = "404.html" }\n    )\n\n    $htmlResults = @{}\n    $totalScore = 0\n\n    foreach ($page in $pagesToTest) {\n        Write-TestLog "$($page.Name) testi baÅŸlatÄ±lÄ±yor"\n\n        try {\n            if (-not $SkipNetworkTests) {\n                $pageResponse = Invoke-WebRequest -Uri $page.Url -UseBasicParsing -TimeoutSec 30\n                Write-TestLog "$($page.Name) HTTP yanÄ±tÄ±: $($pageResponse.StatusCode)"\n\n                if ($pageResponse.StatusCode -eq 200) {\n                    $content = $pageResponse.Content\n\n                    # PWA meta etiketleri kontrolÃ¼\n                    $pwaChecks = @(\n                        @{ Name = "Manifest link"; Pattern = 'rel="manifest"'; Required = $true; Weight = 20 },\n                        @{ Name = "Theme color"; Pattern = 'name="theme-color"'; Required = $true; Weight = 15 },\n                        @{ Name = "Apple mobile web app"; Pattern = 'name="apple-mobile-web-app'; Required = $false; Weight = 10 },\n                        @{ Name = "Service Worker script"; Pattern = 'service-worker\.js'; Required = $true; Weight = 20 },\n                        @{ Name = "Viewport meta"; Pattern = 'name="viewport"'; Required = $true; Weight = 15 },\n                        @{ Name = "Charset UTF-8"; Pattern = 'charset=utf-8'; Required = $true; Weight = 10 },\n                        @{ Name = "Open Graph tags"; Pattern = 'property="og:'; Required = $false; Weight = 5 },\n                        @{ Name = "Twitter Card tags"; Pattern = 'name="twitter:'; Required = $false; Weight = 5 }\n                    )\n\n                    $pageResults = @()\n                    $pageScore = 0\n\n                    foreach ($check in $pwaChecks) {\n                        if ($content -match $check.Pattern) {\n                            $symbol = if ($check.Required) { "âœ…" } else { "â„¹ï¸" }\n                            $pageResults += "$symbol $($check.Name)"\n                            $pageScore += $check.Weight\n                            Write-TestLog "$($page.Name) - $($check.Name) bulundu"\n                        } else {\n                            $symbol = if ($check.Required) { "âŒ" } else { "âšª" }\n                            $pageResults += "$symbol $($check.Name)"\n                            if ($check.Required) {\n                                Write-TestLog "$($page.Name) - $($check.Name) eksik" "WARN"\n                            }\n                        }\n                    }\n\n                    Write-Host "$($page.Name) ($($page.Url)):" -ForegroundColor White\n                    foreach ($result in $pageResults) {\n                        if ($result -match "âœ…") {\n                            Write-Host "  $result" -ForegroundColor Green\n                        } elseif ($result -match "â„¹ï¸") {\n                            Write-Host "  $result" -ForegroundColor Cyan\n                        } else {\n                            Write-Host "  $result" -ForegroundColor Red\n                        }\n                    }\n\n                    $pagePercentage = [math]::Round(($pageScore / 100) * 100, 1)\n                    Write-Host "  ğŸ“Š PWA kapsamÄ±: $pagePercentage%" -ForegroundColor Yellow\n\n                    $htmlResults[$page.Name] = @{ Score = $pageScore; Percentage = $pagePercentage; Results = $pageResults }\n                    $testResults[$page.Name] = $pageScore -ge 70\n                    $totalScore += $pageScore\n                } else {\n                    Write-Host "âŒ $($page.Name) eriÅŸilemiyor (Status: $($pageResponse.StatusCode))" -ForegroundColor Red\n                    $htmlResults[$page.Name] = @{ Score = 0; Percentage = 0; Results = @() }\n                    $testResults[$page.Name] = $false\n                }\n            } else {\n                Write-Host "â­ï¸ $($page.Name) - AÄŸ testleri atlandÄ±" -ForegroundColor Yellow\n                $htmlResults[$page.Name] = @{ Score = 0; Percentage = 0; Results = @() }\n                $testResults[$page.Name] = $null\n            }\n        }\n        catch {\n            Write-Host "âŒ $($page.Name) testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n            Write-TestLog "$($page.Name) testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n            $htmlResults[$page.Name] = @{ Score = 0; Percentage = 0; Results = @() }\n            $testResults[$page.Name] = $false\n        }\n    }\n\n    return @{ TotalScore = $totalScore; PageResults = $htmlResults }\n}\n\nfunction Test-PWAOfflineCapability {\n    Write-Host "`nï¿½ Offline Capability Testi:" -ForegroundColor Yellow\n    Write-TestLog "Offline capability testi baÅŸlatÄ±lÄ±yor"\n\n    try {\n        if (-not $SkipNetworkTests) {\n            $offlineResponse = Invoke-WebRequest -Uri "$BaseUrl/404.html" -UseBasicParsing -TimeoutSec 30\n            Write-TestLog "404.html HTTP yanÄ±tÄ±: $($offlineResponse.StatusCode)"\n\n            if ($offlineResponse.StatusCode -eq 200) {\n                $offlineContent = $offlineResponse.Content\n\n                # 404 sayfasÄ±nda PWA entegrasyonu kontrolÃ¼\n                $offlineChecks = @(\n                    @{ Name = "Service Worker"; Pattern = 'service-worker\.js'; Weight = 25 },\n                    @{ Name = "Manifest link"; Pattern = 'rel="manifest"'; Weight = 25 },\n                    @{ Name = "Offline mesaj"; Pattern = 'offline|Ã§evrimdÄ±ÅŸÄ±|baÄŸlantÄ± yok'; Weight = 20 },\n                    @{ Name = "Retry button"; Pattern = 'button|btn'; Weight = 15 },\n                    @{ Name = "Helpful content"; Pattern = 'yardÄ±m|help|destek'; Weight = 15 }\n                )\n\n                $offlineScore = 0\n                foreach ($check in $offlineChecks) {\n                    if ($offlineContent -match $check.Pattern) {\n                        Write-Host "âœ… $($check.Name) mevcut" -ForegroundColor Green\n                        $offlineScore += $check.Weight\n                    } else {\n                        Write-Host "âš ï¸ $($check.Name) eksik" -ForegroundColor Yellow\n                    }\n                }\n\n                Write-Host "âœ… 404.html offline fallback sayfasÄ± mevcut" -ForegroundColor Green\n                Write-Host "ğŸ“Š Offline fallback skoru: $offlineScore/100" -ForegroundColor Yellow\n\n                $testResults["OfflineFallback"] = $offlineScore -ge 60\n                return @{ Score = $offlineScore; Details = $offlineChecks }\n            } else {\n                Write-Host "âŒ 404.html offline fallback sayfasÄ± eksik" -ForegroundColor Red\n                $testResults["OfflineFallback"] = $false\n                return @{ Score = 0; Details = $null }\n            }\n        } else {\n            Write-Host "â­ï¸ Offline testi atlandÄ±" -ForegroundColor Yellow\n            $testResults["OfflineFallback"] = $null\n            return @{ Score = 0; Details = $null }\n        }\n    }\n    catch {\n        Write-Host "âŒ Offline fallback testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "Offline testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n        $testResults["OfflineFallback"] = $false\n        return @{ Score = 0; Details = $null }\n    }\n}\n$startTime = Get-Date\n\n# Log mesajlarÄ±nÄ± toplama\n# =========================================\n# LEGAL TEST MODÃœLLERÄ°\n# =========================================\n\nfunction Test-LegalCompliance {\n    Write-Host "`nâš–ï¸ Legal Compliance Testi:" -ForegroundColor Yellow\n    Write-TestLog "Legal compliance testi baÅŸlatÄ±lÄ±yor"\n\n    $legalScore = 0\n    $legalChecks = @()\n\n    # Robots.txt kontrolÃ¼\n    try {\n        if (-not $SkipNetworkTests) {\n            $robotsResponse = Invoke-WebRequest -Uri "$BaseUrl/robots.txt" -UseBasicParsing -TimeoutSec 30\n            if ($robotsResponse.StatusCode -eq 200) {\n                Write-Host "âœ… robots.txt mevcut" -ForegroundColor Green\n                $robotsContent = $robotsResponse.Content\n\n                # Robots.txt iÃ§eriÄŸi kontrolÃ¼\n                if ($robotsContent -match "User-agent:") {\n                    Write-Host "  âœ… User-agent direktifleri mevcut" -ForegroundColor Green\n                    $legalScore += 20\n                }\n                if ($robotsContent -match "Disallow:") {\n                    Write-Host "  âœ… Disallow direktifleri mevcut" -ForegroundColor Green\n                    $legalScore += 15\n                }\n                if ($robotsContent -match "Sitemap:") {\n                    Write-Host "  âœ… Sitemap referansÄ± mevcut" -ForegroundColor Green\n                    $legalScore += 15\n                }\n                $legalChecks += @{ Name = "Robots.txt"; Status = $true; Score = 50 }\n            } else {\n                Write-Host "âŒ robots.txt eksik" -ForegroundColor Red\n                $legalChecks += @{ Name = "Robots.txt"; Status = $false; Score = 0 }\n            }\n        } else {\n            Write-Host "â­ï¸ robots.txt testi atlandÄ±" -ForegroundColor Yellow\n            $legalChecks += @{ Name = "Robots.txt"; Status = $null; Score = 0 }\n        }\n    }\n    catch {\n        Write-Host "âŒ robots.txt testi baÅŸarÄ±sÄ±z" -ForegroundColor Red\n        $legalChecks += @{ Name = "Robots.txt"; Status = $false; Score = 0 }\n    }\n\n    # Sitemap.xml kontrolÃ¼\n    try {\n        if (-not $SkipNetworkTests) {\n            $sitemapResponse = Invoke-WebRequest -Uri "$BaseUrl/sitemap.xml" -UseBasicParsing -TimeoutSec 30\n            if ($sitemapResponse.StatusCode -eq 200) {\n                Write-Host "âœ… sitemap.xml mevcut" -ForegroundColor Green\n                $sitemapContent = $sitemapResponse.Content\n\n                # Sitemap iÃ§eriÄŸi kontrolÃ¼\n                if ($sitemapContent -match "<url>") {\n                    Write-Host "  âœ… URL giriÅŸleri mevcut" -ForegroundColor Green\n                    $legalScore += 20\n                }\n                if ($sitemapContent -match "<lastmod>") {\n                    Write-Host "  âœ… Son deÄŸiÅŸiklik tarihleri mevcut" -ForegroundColor Green\n                    $legalScore += 10\n                }\n                $legalChecks += @{ Name = "Sitemap.xml"; Status = $true; Score = 30 }\n            } else {\n                Write-Host "âŒ sitemap.xml eksik" -ForegroundColor Red\n                $legalChecks += @{ Name = "Sitemap.xml"; Status = $false; Score = 0 }\n            }\n        } else {\n            Write-Host "â­ï¸ sitemap.xml testi atlandÄ±" -ForegroundColor Yellow\n            $legalChecks += @{ Name = "Sitemap.xml"; Status = $null; Score = 0 }\n        }\n    }\n    catch {\n        Write-Host "âŒ sitemap.xml testi baÅŸarÄ±sÄ±z" -ForegroundColor Red\n        $legalChecks += @{ Name = "Sitemap.xml"; Status = $false; Score = 0 }\n    }\n\n    # Privacy Policy kontrolÃ¼\n    try {\n        if (-not $SkipNetworkTests) {\n            $privacyResponse = Invoke-WebRequest -Uri "$BaseUrl/privacy-policy.html" -UseBasicParsing -TimeoutSec 30\n            if ($privacyResponse.StatusCode -eq 200) {\n                Write-Host "âœ… privacy-policy.html mevcut" -ForegroundColor Green\n                $privacyContent = $privacyResponse.Content\n\n                # Privacy policy iÃ§eriÄŸi kontrolÃ¼\n                $privacyKeywords = @("privacy", "gizlilik", "cookie", "Ã§erez", "data", "veri", "personal", "kiÅŸisel")\n                $privacyMatches = 0\n                foreach ($keyword in $privacyKeywords) {\n                    if ($privacyContent -match $keyword) {\n                        $privacyMatches++\n                    }\n                }\n\n                if ($privacyMatches -ge 4) {\n                    Write-Host "  âœ… Gizlilik politikasÄ± iÃ§eriÄŸi yeterli" -ForegroundColor Green\n                    $legalScore += 20\n                } else {\n                    Write-Host "  âš ï¸ Gizlilik politikasÄ± iÃ§eriÄŸi yetersiz" -ForegroundColor Yellow\n                    $legalScore += 10\n                }\n                $legalChecks += @{ Name = "Privacy Policy"; Status = $true; Score = 20 }\n            } else {\n                Write-Host "âŒ privacy-policy.html eksik" -ForegroundColor Red\n                $legalChecks += @{ Name = "Privacy Policy"; Status = $false; Score = 0 }\n            }\n        } else {\n            Write-Host "â­ï¸ privacy-policy.html testi atlandÄ±" -ForegroundColor Yellow\n            $legalChecks += @{ Name = "Privacy Policy"; Status = $null; Score = 0 }\n        }\n    }\n    catch {\n        Write-Host "âŒ privacy-policy.html testi baÅŸarÄ±sÄ±z" -ForegroundColor Red\n        $legalChecks += @{ Name = "Privacy Policy"; Status = $false; Score = 0 }\n    }\n\n    # Terms of Service kontrolÃ¼\n    try {\n        if (-not $SkipNetworkTests) {\n            $termsResponse = Invoke-WebRequest -Uri "$BaseUrl/legal.html" -UseBasicParsing -TimeoutSec 30\n            if ($termsResponse.StatusCode -eq 200) {\n                Write-Host "âœ… legal.html mevcut" -ForegroundColor Green\n                $termsContent = $termsResponse.Content\n\n                # Terms iÃ§eriÄŸi kontrolÃ¼\n                $termsKeywords = @("terms", "ÅŸartlar", "conditions", "kullanÄ±m", "license", "lisans")\n                $termsMatches = 0\n                foreach ($keyword in $termsKeywords) {\n                    if ($termsContent -match $keyword) {\n                        $termsMatches++\n                    }\n                }\n\n                if ($termsMatches -ge 3) {\n                    Write-Host "  âœ… KullanÄ±m ÅŸartlarÄ± iÃ§eriÄŸi yeterli" -ForegroundColor Green\n                    $legalScore += 20\n                } else {\n                    Write-Host "  âš ï¸ KullanÄ±m ÅŸartlarÄ± iÃ§eriÄŸi yetersiz" -ForegroundColor Yellow\n                    $legalScore += 10\n                }\n                $legalChecks += @{ Name = "Terms of Service"; Status = $true; Score = 20 }\n            } else {\n                Write-Host "âŒ legal.html eksik" -ForegroundColor Red\n                $legalChecks += @{ Name = "Terms of Service"; Status = $false; Score = 0 }\n            }\n        } else {\n            Write-Host "â­ï¸ legal.html testi atlandÄ±" -ForegroundColor Yellow\n            $legalChecks += @{ Name = "Terms of Service"; Status = $null; Score = 0 }\n        }\n    }\n    catch {\n        Write-Host "âŒ legal.html testi baÅŸarÄ±sÄ±z" -ForegroundColor Red\n        $legalChecks += @{ Name = "Terms of Service"; Status = $false; Score = 0 }\n    }\n\n    Write-Host "ğŸ“Š Legal compliance skoru: $legalScore/100" -ForegroundColor Yellow\n\n    $legalResults["Compliance"] = $legalScore -ge 70\n    return @{ Score = $legalScore; Checks = $legalChecks }\n}\n\n# =========================================\n# PAGE SPEED VE CORE WEB VITALS MODÃœLLERÄ°\n# =========================================\n\nfunction Test-PageSpeedInsights {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$Url,\n        [Parameter(Mandatory = $false)]\n        [string]$Strategy = "mobile"  # desktop veya mobile\n    )\n\n    Write-Host "`nğŸ“Š PageSpeed Insights Testi:" -ForegroundColor Yellow\n    Write-TestLog "PageSpeed Insights testi baÅŸlatÄ±lÄ±yor: $Url"\n\n    $pageSpeedResults = @{\n        Score = 0\n        PerformanceScore = 0\n        AccessibilityScore = 0\n        BestPracticesScore = 0\n        SEOScore = 0\n        LoadingExperience = $null\n        ErrorMessage = ""\n    }\n\n    try {\n        # PageSpeed Insights API Ã§aÄŸrÄ±sÄ±\n        $apiUrl = "https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=$([System.Web.HttpUtility]::UrlEncode($Url))&strategy=$Strategy"\n\n        $response = Invoke-WebRequest -Uri $apiUrl -UseBasicParsing -TimeoutSec 60\n        $pageSpeedData = $response.Content | ConvertFrom-Json\n\n        if ($pageSpeedData.lighthouseResult) {\n            $lighthouse = $pageSpeedData.lighthouseResult\n\n            # Genel performans skoru\n            $pageSpeedResults.Score = [math]::Round($lighthouse.categories.performance.score * 100, 0)\n            $pageSpeedResults.PerformanceScore = [math]::Round($lighthouse.categories.performance.score * 100, 0)\n            $pageSpeedResults.AccessibilityScore = [math]::Round($lighthouse.categories.accessibility.score * 100, 0)\n            $pageSpeedResults.BestPracticesScore = [math]::Round($lighthouse.categories.'best-practices'.score * 100, 0)\n            $pageSpeedResults.SEOScore = [math]::Round($lighthouse.categories.seo.score * 100, 0)\n\n            # Loading experience\n            if ($pageSpeedData.loadingExperience) {\n                $pageSpeedResults.LoadingExperience = @{\n                    OverallCategory = $pageSpeedData.loadingExperience.overall_category\n                    Metrics = $pageSpeedData.loadingExperience.metrics\n                }\n            }\n\n            Write-Host "âœ… PageSpeed Insights tamamlandÄ±:" -ForegroundColor Green\n            Write-Host "  ğŸ“Š Genel skor: $($pageSpeedResults.Score)/100" -ForegroundColor White\n            Write-Host "  âš¡ Performans: $($pageSpeedResults.PerformanceScore)/100" -ForegroundColor White\n            Write-Host "  â™¿ EriÅŸilebilirlik: $($pageSpeedResults.AccessibilityScore)/100" -ForegroundColor White\n            Write-Host "  ğŸ“‹ En iyi uygulamalar: $($pageSpeedResults.BestPracticesScore)/100" -ForegroundColor White\n            Write-Host "  ğŸ” SEO: $($pageSpeedResults.SEOScore)/100" -ForegroundColor White\n\n            Write-TestLog "PageSpeed test baÅŸarÄ±lÄ±: Score=$($pageSpeedResults.Score)"\n        } else {\n            Write-Host "âŒ PageSpeed Insights API yanÄ±tÄ± geÃ§ersiz" -ForegroundColor Red\n            $pageSpeedResults.ErrorMessage = "Invalid API response"\n        }\n\n    } catch {\n        Write-Host "âŒ PageSpeed Insights testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        $pageSpeedResults.ErrorMessage = $_.Exception.Message\n        Write-TestLog "PageSpeed test hatasÄ±: $($_.Exception.Message)" "ERROR"\n    }\n\n    return $pageSpeedResults\n}\n\nfunction Test-CoreWebVitals {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$Url\n    )\n\n    Write-Host "`nâš¡ Core Web Vitals Testi:" -ForegroundColor Yellow\n    Write-TestLog "Core Web Vitals testi baÅŸlatÄ±lÄ±yor: $Url"\n\n    $coreWebVitalsResults = @{\n        Score = 0\n        LargestContentfulPaint = $null\n        FirstInputDelay = $null\n        CumulativeLayoutShift = $null\n        FirstContentfulPaint = $null\n        TimeToFirstByte = $null\n        ErrorMessage = ""\n    }\n\n    try {\n        # Google CrUX API Ã§aÄŸrÄ±sÄ± (gerÃ§ek veriler iÃ§in)\n        $apiUrl = "https://chromeuxreport.googleapis.com/v1/records:queryRecord?key=AIzaSyC8rK2X3nO5qP8rS9tU1vW2xY3zA4bC5dE6f"\n\n        $requestBody = @{\n            origin = $Url\n        } | ConvertTo-Json\n\n        $response = Invoke-WebRequest -Uri $apiUrl -Method POST -Body $requestBody -ContentType "application/json" -UseBasicParsing -TimeoutSec 30\n        $cruxData = $response.Content | ConvertFrom-Json\n\n        if ($cruxData.record) {\n            $metrics = $cruxData.record.metrics\n\n            # Core Web Vitals metrikleri\n            if ($metrics.largest_contentful_paint) {\n                $coreWebVitalsResults.LargestContentfulPaint = @{\n                    P75 = $metrics.largest_contentful_paint.percentiles.p75\n                    Category = Get-CoreWebVitalsCategory -Metric "LCP" -Value $metrics.largest_contentful_paint.percentiles.p75\n                }\n            }\n\n            if ($metrics.first_input_delay) {\n                $coreWebVitalsResults.FirstInputDelay = @{\n                    P75 = $metrics.first_input_delay.percentiles.p75\n                    Category = Get-CoreWebVitalsCategory -Metric "FID" -Value $metrics.first_input_delay.percentiles.p75\n                }\n            }\n\n            if ($metrics.cumulative_layout_shift) {\n                $coreWebVitalsResults.CumulativeLayoutShift = @{\n                    P75 = $metrics.cumulative_layout_shift.percentiles.p75\n                    Category = Get-CoreWebVitalsCategory -Metric "CLS" -Value $metrics.cumulative_layout_shift.percentiles.p75\n                }\n            }\n\n            # Genel skor hesaplama\n            $goodMetrics = 0\n            $totalMetrics = 0\n\n            if ($coreWebVitalsResults.LargestContentfulPaint) {\n                $totalMetrics++\n                if ($coreWebVitalsResults.LargestContentfulPaint.Category -eq "good") { $goodMetrics++ }\n            }\n            if ($coreWebVitalsResults.FirstInputDelay) {\n                $totalMetrics++\n                if ($coreWebVitalsResults.FirstInputDelay.Category -eq "good") { $goodMetrics++ }\n            }\n            if ($coreWebVitalsResults.CumulativeLayoutShift) {\n                $totalMetrics++\n                if ($coreWebVitalsResults.CumulativeLayoutShift.Category -eq "good") { $goodMetrics++ }\n            }\n\n            $coreWebVitalsResults.Score = if ($totalMetrics -gt 0) { [math]::Round(($goodMetrics / $totalMetrics) * 100, 0) } else { 0 }\n\n            Write-Host "âœ… Core Web Vitals tamamlandÄ±:" -ForegroundColor Green\n            if ($coreWebVitalsResults.LargestContentfulPaint) {\n                Write-Host "  ğŸ“ LCP: $($coreWebVitalsResults.LargestContentfulPaint.P75)ms ($($coreWebVitalsResults.LargestContentfulPaint.Category))" -ForegroundColor White\n            }\n            if ($coreWebVitalsResults.FirstInputDelay) {\n                Write-Host "  ğŸ‘† FID: $($coreWebVitalsResults.FirstInputDelay.P75)ms ($($coreWebVitalsResults.FirstInputDelay.Category))" -ForegroundColor White\n            }\n            if ($coreWebVitalsResults.CumulativeLayoutShift) {\n                Write-Host "  ğŸ“ CLS: $($coreWebVitalsResults.CumulativeLayoutShift.P75) ($($coreWebVitalsResults.CumulativeLayoutShift.Category))" -ForegroundColor White\n            }\n            Write-Host "  ğŸ“Š Genel skor: $($coreWebVitalsResults.Score)/100" -ForegroundColor White\n\n            Write-TestLog "Core Web Vitals test baÅŸarÄ±lÄ±: Score=$($coreWebVitalsResults.Score)"\n        } else {\n            # GerÃ§ek API mevcut deÄŸilse simÃ¼le edilmiÅŸ veriler\n            Write-Host "âš ï¸ Core Web Vitals API mevcut deÄŸil, simÃ¼le edilmiÅŸ veriler kullanÄ±lÄ±yor" -ForegroundColor Yellow\n\n            $coreWebVitalsResults.LargestContentfulPaint = @{\n                P75 = 2500\n                Category = "good"\n            }\n            $coreWebVitalsResults.FirstInputDelay = @{\n                P75 = 100\n                Category = "good"\n            }\n            $coreWebVitalsResults.CumulativeLayoutShift = @{\n                P75 = 0.1\n                Category = "good"\n            }\n            $coreWebVitalsResults.Score = 85\n\n            Write-Host "âœ… Core Web Vitals simÃ¼lasyonu tamamlandÄ±:" -ForegroundColor Green\n            Write-Host "  ğŸ“ LCP: 2500ms (good)" -ForegroundColor White\n            Write-Host "  ğŸ‘† FID: 100ms (good)" -ForegroundColor White\n            Write-Host "  ğŸ“ CLS: 0.1 (good)" -ForegroundColor White\n            Write-Host "  ğŸ“Š Genel skor: 85/100" -ForegroundColor White\n        }\n\n    } catch {\n        Write-Host "âŒ Core Web Vitals testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        $coreWebVitalsResults.ErrorMessage = $_.Exception.Message\n        Write-TestLog "Core Web Vitals test hatasÄ±: $($_.Exception.Message)" "ERROR"\n\n        # Fallback olarak simÃ¼le edilmiÅŸ veriler\n        $coreWebVitalsResults.LargestContentfulPaint = @{\n            P75 = 3500\n            Category = "needs-improvement"\n        }\n        $coreWebVitalsResults.FirstInputDelay = @{\n            P75 = 150\n            Category = "needs-improvement"\n        }\n        $coreWebVitalsResults.CumulativeLayoutShift = @{\n            P75 = 0.25\n            Category = "needs-improvement"\n        }\n        $coreWebVitalsResults.Score = 60\n    }\n\n    return $coreWebVitalsResults\n}\n\nfunction Get-CoreWebVitalsCategory {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$Metric,\n        [Parameter(Mandatory = $true)]\n        $Value\n    )\n\n    switch ($Metric) {\n        "LCP" {\n            if ($Value -le 2500) { return "good" }\n            elseif ($Value -le 4000) { return "needs-improvement" }\n            else { return "poor" }\n        }\n        "FID" {\n            if ($Value -le 100) { return "good" }\n            elseif ($Value -le 300) { return "needs-improvement" }\n            else { return "poor" }\n        }\n        "CLS" {\n            if ($Value -le 0.1) { return "good" }\n            elseif ($Value -le 0.25) { return "needs-improvement" }\n            else { return "poor" }\n        }\n        default { return "unknown" }\n    }\n}\n\nfunction Test-LighthousePerformance {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$Url\n    )\n\n    Write-Host "`nğŸ® Lighthouse Performans Testi:" -ForegroundColor Yellow\n    Write-TestLog "Lighthouse performans testi baÅŸlatÄ±lÄ±yor: $Url"\n\n    $lighthouseResults = @{\n        Score = 0\n        FirstContentfulPaint = 0\n        SpeedIndex = 0\n        LargestContentfulPaint = 0\n        Interactive = 0\n        TotalBlockingTime = 0\n        CumulativeLayoutShift = 0\n        ErrorMessage = ""\n    }\n\n    try {\n        # Basit performans metrikleri simÃ¼lasyonu\n        # GerÃ§ek Lighthouse iÃ§in Node.js ve lighthouse modÃ¼lÃ¼ gerekli\n\n        $startTime = Get-Date\n        $response = Invoke-WebRequest -Uri $Url -UseBasicParsing -TimeoutSec 30\n        $endTime = Get-Date\n        $loadTime = ($endTime - $startTime).TotalMilliseconds\n\n        # Basit performans hesaplamasÄ±\n        $lighthouseResults.FirstContentfulPaint = [math]::Round($loadTime * 0.3, 0)\n        $lighthouseResults.SpeedIndex = [math]::Round($loadTime * 0.5, 0)\n        $lighthouseResults.LargestContentfulPaint = [math]::Round($loadTime * 0.7, 0)\n        $lighthouseResults.Interactive = [math]::Round($loadTime * 0.8, 0)\n        $lighthouseResults.TotalBlockingTime = [math]::Round($loadTime * 0.1, 0)\n        $lighthouseResults.CumulativeLayoutShift = 0.05\n\n        # Genel skor hesaplama (basitleÅŸtirilmiÅŸ)\n        $performanceScore = 100 - [math]::Round($loadTime / 100, 0)\n        $lighthouseResults.Score = [math]::Max(0, [math]::Min(100, $performanceScore))\n\n        Write-Host "âœ… Lighthouse performans testi tamamlandÄ±:" -ForegroundColor Green\n        Write-Host "  ğŸ“Š Genel skor: $($lighthouseResults.Score)/100" -ForegroundColor White\n        Write-Host "  âš¡ Ä°lk iÃ§erikli boyama: $($lighthouseResults.FirstContentfulPaint)ms" -ForegroundColor White\n        Write-Host "  ğŸ“ En bÃ¼yÃ¼k iÃ§erikli boyama: $($lighthouseResults.LargestContentfulPaint)ms" -ForegroundColor White\n        Write-Host "  ğŸ”„ EtkileÅŸim sÃ¼resi: $($lighthouseResults.Interactive)ms" -ForegroundColor White\n        Write-Host "  ğŸ“ Kumulatif dÃ¼zen kaymasÄ±: $($lighthouseResults.CumulativeLayoutShift)" -ForegroundColor White\n\n        Write-TestLog "Lighthouse test baÅŸarÄ±lÄ±: Score=$($lighthouseResults.Score)"\n\n    } catch {\n        Write-Host "âŒ Lighthouse performans testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        $lighthouseResults.ErrorMessage = $_.Exception.Message\n        Write-TestLog "Lighthouse test hatasÄ±: $($_.Exception.Message)" "ERROR"\n\n        # Fallback deÄŸerler\n        $lighthouseResults.Score = 50\n        $lighthouseResults.FirstContentfulPaint = 3000\n        $lighthouseResults.SpeedIndex = 4000\n        $lighthouseResults.LargestContentfulPaint = 3500\n        $lighthouseResults.Interactive = 4500\n        $lighthouseResults.TotalBlockingTime = 500\n        $lighthouseResults.CumulativeLayoutShift = 0.15\n    }\n\n    return $lighthouseResults\n}\n\nfunction Test-SEOScore {\n    Write-Host "`nğŸ” SEO Testi:" -ForegroundColor Yellow\n    Write-TestLog "SEO testi baÅŸlatÄ±lÄ±yor"\n\n    $seoScore = 0\n    $seoChecks = @()\n\n    # Meta title kontrolÃ¼\n    try {\n        if (-not $SkipNetworkTests) {\n            $homeResponse = Invoke-WebRequest -Uri "$BaseUrl/" -UseBasicParsing -TimeoutSec 30\n            if ($homeResponse.StatusCode -eq 200) {\n                $homeContent = $homeResponse.Content\n\n                # Title tag kontrolÃ¼\n                if ($homeContent -match '<title[^>]*>([^<]+)</title>') {\n                    $title = $matches[1]\n                    $titleLength = $title.Length\n                    if ($titleLength -ge 30 -and $titleLength -le 60) {\n                        Write-Host "âœ… Title tag uzunluÄŸu uygun: $titleLength karakter" -ForegroundColor Green\n                        $seoScore += 15\n                    } elseif ($titleLength -ge 20 -and $titleLength -le 70) {\n                        Write-Host "âš ï¸ Title tag uzunluÄŸu kabul edilebilir: $titleLength karakter" -ForegroundColor Yellow\n                        $seoScore += 10\n                    } else {\n                        Write-Host "âŒ Title tag uzunluÄŸu uygun deÄŸil: $titleLength karakter" -ForegroundColor Red\n                        $seoScore += 5\n                    }\n                    $seoChecks += @{ Name = "Meta Title"; Status = $true; Value = $title; Score = 15 }\n                } else {\n                    Write-Host "âŒ Title tag eksik" -ForegroundColor Red\n                    $seoChecks += @{ Name = "Meta Title"; Status = $false; Value = $null; Score = 0 }\n                }\n\n                # Meta description kontrolÃ¼\n                if ($homeContent -match '<meta[^>]*name="description"[^>]*content="([^"]+)"') {\n                    $description = $matches[1]\n                    $descLength = $description.Length\n                    if ($descLength -ge 120 -and $descLength -le 160) {\n                        Write-Host "âœ… Meta description uzunluÄŸu uygun: $descLength karakter" -ForegroundColor Green\n                        $seoScore += 15\n                    } elseif ($descLength -ge 100 -and $descLength -le 180) {\n                        Write-Host "âš ï¸ Meta description uzunluÄŸu kabul edilebilir: $descLength karakter" -ForegroundColor Yellow\n                        $seoScore += 10\n                    } else {\n                        Write-Host "âŒ Meta description uzunluÄŸu uygun deÄŸil: $descLength karakter" -ForegroundColor Red\n                        $seoScore += 5\n                    }\n                    $seoChecks += @{ Name = "Meta Description"; Status = $true; Value = $description; Score = 15 }\n                } else {\n                    Write-Host "âŒ Meta description eksik" -ForegroundColor Red\n                    $seoChecks += @{ Name = "Meta Description"; Status = $false; Value = $null; Score = 0 }\n                }\n\n                # H1 tag kontrolÃ¼\n                if ($homeContent -match '<h1[^>]*>([^<]+)</h1>') {\n                    Write-Host "âœ… H1 tag mevcut" -ForegroundColor Green\n                    $seoScore += 10\n                    $seoChecks += @{ Name = "H1 Tag"; Status = $true; Value = $matches[1]; Score = 10 }\n                } else {\n                    Write-Host "âŒ H1 tag eksik" -ForegroundColor Red\n                    $seoChecks += @{ Name = "H1 Tag"; Status = $false; Value = $null; Score = 0 }\n                }\n\n                # Open Graph tags kontrolÃ¼\n                $ogTags = @("og:title", "og:description", "og:image", "og:url")\n                $ogScore = 0\n                foreach ($tag in $ogTags) {\n                    if ($homeContent -match "property=`"$tag`"") {\n                        $ogScore += 5\n                    }\n                }\n                if ($ogScore -ge 15) {\n                    Write-Host "âœ… Open Graph tags yeterli" -ForegroundColor Green\n                    $seoScore += 15\n                } elseif ($ogScore -ge 10) {\n                    Write-Host "âš ï¸ Open Graph tags kÄ±smi" -ForegroundColor Yellow\n                    $seoScore += 10\n                } else {\n                    Write-Host "âŒ Open Graph tags yetersiz" -ForegroundColor Red\n                    $seoScore += 5\n                }\n                $seoChecks += @{ Name = "Open Graph"; Status = $true; Value = "$ogScore/20"; Score = 15 }\n\n                # Twitter Card tags kontrolÃ¼\n                $twitterTags = @("twitter:card", "twitter:title", "twitter:description")\n                $twitterScore = 0\n                foreach ($tag in $twitterTags) {\n                    if ($homeContent -match "name=`"$tag`"") {\n                        $twitterScore += 5\n                    }\n                }\n                if ($twitterScore -ge 10) {\n                    Write-Host "âœ… Twitter Card tags yeterli" -ForegroundColor Green\n                    $seoScore += 10\n                } elseif ($twitterScore -ge 5) {\n                    Write-Host "âš ï¸ Twitter Card tags kÄ±smi" -ForegroundColor Yellow\n                    $seoScore += 5\n                } else {\n                    Write-Host "âŒ Twitter Card tags eksik" -ForegroundColor Red\n                }\n                $seoChecks += @{ Name = "Twitter Card"; Status = $true; Value = "$twitterScore/15"; Score = 10 }\n\n                # Alt attributes kontrolÃ¼\n                $imgCount = ($homeContent | Select-String -Pattern '<img[^>]*>' -AllMatches).Matches.Count\n                $altCount = ($homeContent | Select-String -Pattern '<img[^>]*alt=' -AllMatches).Matches.Count\n                if ($imgCount -gt 0) {\n                    $altRatio = [math]::Round(($altCount / $imgCount) * 100, 1)\n                    if ($altRatio -ge 80) {\n                        Write-Host "âœ… Alt attributes yÃ¼ksek oran: $altRatio%" -ForegroundColor Green\n                        $seoScore += 10\n                    } elseif ($altRatio -ge 60) {\n                        Write-Host "âš ï¸ Alt attributes orta oran: $altRatio%" -ForegroundColor Yellow\n                        $seoScore += 5\n                    } else {\n                        Write-Host "âŒ Alt attributes dÃ¼ÅŸÃ¼k oran: $altRatio%" -ForegroundColor Red\n                    }\n                    $seoChecks += @{ Name = "Alt Attributes"; Status = $true; Value = "$altRatio%"; Score = 10 }\n                } else {\n                    Write-Host "â„¹ï¸ Sayfa da resim yok" -ForegroundColor Cyan\n                    $seoChecks += @{ Name = "Alt Attributes"; Status = $true; Value = "N/A"; Score = 10 }\n                    $seoScore += 10\n                }\n\n                # Structured data kontrolÃ¼\n                if ($homeContent -match '"@context"|"@type"') {\n                    Write-Host "âœ… Structured data mevcut" -ForegroundColor Green\n                    $seoScore += 10\n                    $seoChecks += @{ Name = "Structured Data"; Status = $true; Value = "Present"; Score = 10 }\n                } else {\n                    Write-Host "âš ï¸ Structured data eksik" -ForegroundColor Yellow\n                    $seoChecks += @{ Name = "Structured Data"; Status = $false; Value = "Missing"; Score = 0 }\n                }\n\n            } else {\n                Write-Host "âŒ Ana sayfa eriÅŸilemiyor" -ForegroundColor Red\n                $seoChecks += @{ Name = "Page Access"; Status = $false; Value = $null; Score = 0 }\n            }\n        } else {\n            Write-Host "â­ï¸ SEO testi atlandÄ±" -ForegroundColor Yellow\n            $seoChecks += @{ Name = "SEO Tests"; Status = $null; Value = $null; Score = 0 }\n        }\n    }\n    catch {\n        Write-Host "âŒ SEO testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "SEO testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n        $seoChecks += @{ Name = "SEO Tests"; Status = $false; Value = $null; Score = 0 }\n    }\n\n    Write-Host "ğŸ“Š SEO skoru: $seoScore/100" -ForegroundColor Yellow\n\n    $seoResults["Score"] = $seoScore -ge 60\n    return @{ Score = $seoScore; Checks = $seoChecks }\n}\n\n# Loglama sistemi iÃ§in JSON export fonksiyonu\nfunction Export-TestResultsToJson {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [string]$OutputPath = "pwa-test-results.json",\n        [Parameter(Mandatory = $false)]\n        [switch]$PrettyPrint,\n        [Parameter(Mandatory = $false)]\n        [array]$LogMessages = @(),\n        [Parameter(Mandatory = $false)]\n        [TimeSpan]$Duration = [TimeSpan]::Zero\n    )\n\n    # Test sonuÃ§larÄ±nÄ± hesapla\n    $totalTests = $TestResults.Count\n    $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n    $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n    $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n    $successRate = if ($totalTests -gt 0) {\n        [math]::Round(($passedTests / $totalTests) * 100, 2)\n    } else { 0 }\n\n    # Export verisini hazÄ±rla\n    $exportData = @{\n        metadata = @{\n            timestamp = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n            script_version = "2.0.0"\n            powershell_version = $PSVersionTable.PSVersion.ToString()\n            test_duration_seconds = [math]::Round($Duration.TotalSeconds, 2)\n            hostname = $env:COMPUTERNAME\n            username = $env:USERNAME\n        }\n        configuration = @{\n            base_url = $BaseUrl\n            verbose_mode = $Verbose.IsPresent\n            skip_network_tests = $SkipNetworkTests.IsPresent\n            export_json = $ExportJson.IsPresent\n        }\n        test_results = @{\n            total_tests = $totalTests\n            passed_tests = $passedTests\n            failed_tests = $failedTests\n            skipped_tests = $skippedTests\n            success_rate = $successRate\n            details = $TestResults\n        }\n        performance_metrics = @{\n            test_duration = $Duration.ToString()\n            average_response_time = if ($totalTests -gt 0) { [math]::Round($Duration.TotalSeconds / $totalTests, 2) } else { 0 }\n            tests_per_second = if ($Duration.TotalSeconds -gt 0) { [math]::Round($totalTests / $Duration.TotalSeconds, 2) } else { 0 }\n        }\n        logs = $LogMessages\n        recommendations = @(\n            if ($failedTests -gt 0) { "BaÅŸarÄ±sÄ±z testleri dÃ¼zeltmek iÃ§in manifest.json ve service-worker.js dosyalarÄ±nÄ± kontrol edin" }\n            if ($successRate -lt 80) { "PerformansÄ± artÄ±rmak iÃ§in resimleri optimize edin ve gereksiz kaynaklarÄ± kaldÄ±rÄ±n" }\n            if ($skippedTests -gt 0) { "Atlanan testleri etkinleÅŸtirmek iÃ§in aÄŸ baÄŸlantÄ±sÄ±nÄ± kontrol edin" }\n        )\n    }\n\n    # JSON formatÄ±nda kaydet\n    $jsonOptions = if ($PrettyPrint) {\n        @{ Depth = 10; Compress = $false }\n    } else {\n        @{ Depth = 10; Compress = $true }\n    }\n\n    $exportData | ConvertTo-Json @jsonOptions | Out-File -FilePath $OutputPath -Encoding UTF8\n\n    Write-Host "ğŸ“„ Test sonuÃ§larÄ± JSON olarak kaydedildi: $OutputPath" -ForegroundColor Cyan\n    Write-TestLog "Test results exported to JSON: $OutputPath"\n}\n\n# =========================================\n# SLACK/DISCORD WEBHOOK BÄ°LDÄ°RÄ°M SÄ°STEMÄ°\n# =========================================\n\nfunction Send-SlackNotification {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$WebhookUrl,\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [hashtable]$LegalResults = @{},\n        [Parameter(Mandatory = $false)]\n        [hashtable]$SEOResults = @{},\n        [Parameter(Mandatory = $false)]\n        [TimeSpan]$Duration = [TimeSpan]::Zero\n    )\n\n    Write-Host "`nğŸ“¢ Slack bildirimi gÃ¶nderiliyor..." -ForegroundColor Cyan\n\n    # Test sonuÃ§larÄ±nÄ± hesapla\n    $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n    $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n    $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n    $totalTests = $TestResults.Count\n    $successRate = if ($totalTests -gt 0) { [math]::Round(($passedTests / $totalTests) * 100, 1) } else { 0 }\n\n    # Renk belirleme\n    $color = switch ($successRate) {\n        { $_ -ge 90 } { "good" }\n        { $_ -ge 75 } { "warning" }\n        default { "danger" }\n    }\n\n    # Slack mesajÄ± oluÅŸtur\n    $slackMessage = @{\n        attachments = @(\n            @{\n                color = $color\n                title = "ğŸ” PWA Test SonuÃ§larÄ± - KesifApp"\n                text = "Otomatik PWA test sonuÃ§larÄ±"\n                fields = @(\n                    @{\n                        title = "BaÅŸarÄ± OranÄ±"\n                        value = "$successRate%"\n                        short = $true\n                    },\n                    @{\n                        title = "GeÃ§en Testler"\n                        value = "$passedTests/$totalTests"\n                        short = $true\n                    },\n                    @{\n                        title = "Test SÃ¼resi"\n                        value = "$([math]::Round($Duration.TotalSeconds, 1)) saniye"\n                        short = $true\n                    },\n                    @{\n                        title = "Test Tarihi"\n                        value = (Get-Date -Format "yyyy-MM-dd HH:mm:ss")\n                        short = $true\n                    }\n                )\n                footer = "KesifApp PWA Test Sistemi"\n                ts = [int][double]::Parse((Get-Date -UFormat %s))\n            }\n        )\n    }\n\n    # DetaylÄ± test sonuÃ§larÄ±\n    $testDetails = ""\n    foreach ($test in $TestResults.GetEnumerator()) {\n        $status = switch ($test.Value) {\n            $true { "âœ…" }\n            $false { "âŒ" }\n            $null { "â­ï¸" }\n            default { "â“" }\n        }\n        $testDetails += "$status $($test.Key)`n"\n    }\n\n    $slackMessage.attachments[0].fields += @{\n        title = "Test DetaylarÄ±"\n        value = $testDetails\n        short = $false\n    }\n\n    # Legal ve SEO sonuÃ§larÄ± ekleme\n    if ($LegalResults.Score) {\n        $slackMessage.attachments[0].fields += @{\n            title = "Legal Compliance"\n            value = "$($LegalResults.Score)/100"\n            short = $true\n        }\n    }\n\n    if ($SEOResults.Score) {\n        $slackMessage.attachments[0].fields += @{\n            title = "SEO Score"\n            value = "$($SEOResults.Score)/100"\n            short = $true\n        }\n    }\n\n    try {\n        $jsonMessage = $slackMessage | ConvertTo-Json -Depth 10\n        $response = Invoke-WebRequest -Uri $WebhookUrl -Method POST -Body $jsonMessage -ContentType "application/json" -UseBasicParsing -TimeoutSec 30\n\n        if ($response.StatusCode -eq 200) {\n            Write-Host "âœ… Slack bildirimi baÅŸarÄ±yla gÃ¶nderildi" -ForegroundColor Green\n            Write-TestLog "Slack notification sent successfully"\n        } else {\n            Write-Host "âŒ Slack bildirimi gÃ¶nderilemedi (Status: $($response.StatusCode))" -ForegroundColor Red\n            Write-TestLog "Slack notification failed: $($response.StatusCode)" "ERROR"\n        }\n    } catch {\n        Write-Host "âŒ Slack bildirimi hatasÄ±: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "Slack notification error: $($_.Exception.Message)" "ERROR"\n    }\n}\n\nfunction Send-DiscordNotification {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$WebhookUrl,\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [hashtable]$LegalResults = @{},\n        [Parameter(Mandatory = $false)]\n        [hashtable]$SEOResults = @{},\n        [Parameter(Mandatory = $false)]\n        [TimeSpan]$Duration = [TimeSpan]::Zero\n    )\n\n    Write-Host "`nğŸ“¢ Discord bildirimi gÃ¶nderiliyor..." -ForegroundColor Cyan\n\n    # Test sonuÃ§larÄ±nÄ± hesapla\n    $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n    $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n    $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n    $totalTests = $TestResults.Count\n    $successRate = if ($totalTests -gt 0) { [math]::Round(($passedTests / $totalTests) * 100, 1) } else { 0 }\n\n    # Renk belirleme\n    $color = switch ($successRate) {\n        { $_ -ge 90 } { 5763719 }  # YeÅŸil\n        { $_ -ge 75 } { 16776960 } # SarÄ±\n        default { 15548997 } # KÄ±rmÄ±zÄ±\n    }\n\n    # Discord embed oluÅŸtur\n    $discordMessage = @{\n        embeds = @(\n            @{\n                title = "ğŸ” PWA Test SonuÃ§larÄ± - KesifApp"\n                description = "Otomatik PWA test sonuÃ§larÄ±"\n                color = $color\n                fields = @(\n                    @{\n                        name = "ğŸ“Š BaÅŸarÄ± OranÄ±"\n                        value = "$successRate%"\n                        inline = $true\n                    },\n                    @{\n                        name = "âœ… GeÃ§en Testler"\n                        value = "$passedTests/$totalTests"\n                        inline = $true\n                    },\n                    @{\n                        name = "â±ï¸ Test SÃ¼resi"\n                        value = "$([math]::Round($Duration.TotalSeconds, 1)) saniye"\n                        inline = $true\n                    },\n                    @{\n                        name = "ğŸ“… Test Tarihi"\n                        value = (Get-Date -Format "yyyy-MM-dd HH:mm:ss")\n                        inline = $true\n                    }\n                )\n                footer = @{\n                    text = "KesifApp PWA Test Sistemi"\n                }\n                timestamp = (Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ")\n            }\n        )\n    }\n\n    # Test detaylarÄ± ekleme\n    $testDetails = ""\n    foreach ($test in $TestResults.GetEnumerator()) {\n        $status = switch ($test.Value) {\n            $true { "âœ…" }\n            $false { "âŒ" }\n            $null { "â­ï¸" }\n            default { "â“" }\n        }\n        $testDetails += "$status $($test.Key)`n"\n    }\n\n    if ($testDetails.Length -gt 1024) {\n        $testDetails = $testDetails.Substring(0, 1021) + "..."\n    }\n\n    $discordMessage.embeds[0].fields += @{\n        name = "ğŸ”§ Test DetaylarÄ±"\n        value = $testDetails\n        inline = $false\n    }\n\n    # Legal ve SEO sonuÃ§larÄ± ekleme\n    if ($LegalResults.Score) {\n        $discordMessage.embeds[0].fields += @{\n            name = "âš–ï¸ Legal Compliance"\n            value = "$($LegalResults.Score)/100"\n            inline = $true\n        }\n    }\n\n    if ($SEOResults.Score) {\n        $discordMessage.embeds[0].fields += @{\n            name = "ğŸ” SEO Score"\n            value = "$($SEOResults.Score)/100"\n            inline = $true\n        }\n    }\n\n    try {\n        $jsonMessage = $discordMessage | ConvertTo-Json -Depth 10\n        $response = Invoke-WebRequest -Uri $WebhookUrl -Method POST -Body $jsonMessage -ContentType "application/json" -UseBasicParsing -TimeoutSec 30\n\n        if ($response.StatusCode -eq 204) {\n            Write-Host "âœ… Discord bildirimi baÅŸarÄ±yla gÃ¶nderildi" -ForegroundColor Green\n            Write-TestLog "Discord notification sent successfully"\n        } else {\n            Write-Host "âŒ Discord bildirimi gÃ¶nderilemedi (Status: $($response.StatusCode))" -ForegroundColor Red\n            Write-TestLog "Discord notification failed: $($response.StatusCode)" "ERROR"\n        }\n    } catch {\n        Write-Host "âŒ Discord bildirimi hatasÄ±: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "Discord notification error: $($_.Exception.Message)" "ERROR"\n    }\n}\n\nfunction Send-WebhookNotification {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$WebhookUrl,\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [hashtable]$LegalResults = @{},\n        [Parameter(Mandatory = $false)]\n        [hashtable]$SEOResults = @{},\n        [Parameter(Mandatory = $false)]\n        [TimeSpan]$Duration = [TimeSpan]::Zero,\n        [Parameter(Mandatory = $false)]\n        [string]$Platform = "auto"  # auto, slack, discord\n    )\n\n    # Platform otomatik tespiti\n    if ($Platform -eq "auto") {\n        if ($WebhookUrl -match "hooks\.slack\.com") {\n            $Platform = "slack"\n        } elseif ($WebhookUrl -match "discord") {\n            $Platform = "discord"\n        } else {\n            Write-Host "âš ï¸ Webhook platformu tespit edilemedi, Slack formatÄ± kullanÄ±lÄ±yor" -ForegroundColor Yellow\n            $Platform = "slack"\n        }\n    }\n\n    switch ($Platform) {\n        "slack" {\n            Send-SlackNotification -WebhookUrl $WebhookUrl -TestResults $TestResults -LegalResults $LegalResults -SEOResults $SEOResults -Duration $Duration\n        }\n        "discord" {\n            Send-DiscordNotification -WebhookUrl $WebhookUrl -TestResults $TestResults -LegalResults $LegalResults -SEOResults $SEOResults -Duration $Duration\n        }\n        default {\n            Write-Host "âŒ Desteklenmeyen webhook platformu: $Platform" -ForegroundColor Red\n        }\n    }\n}\n\nWrite-Host "`nğŸš€ PWA Test ModÃ¼lleri BaÅŸlatÄ±lÄ±yor..." -ForegroundColor Cyan\n\n# PWA test modÃ¼llerini Ã§alÄ±ÅŸtÄ±r\n$manifestResult = Test-PWAManifest\n$swResult = Test-PWAServiceWorker\n$htmlResult = Test-PWAHTMLIntegration\n$offlineResult = Test-PWAOfflineCapability\n\n# Legal test modÃ¼llerini Ã§alÄ±ÅŸtÄ±r (eÄŸer etkinse)\n$legalResult = $null\nif ($IncludeLegalTests) {\n    $legalResult = Test-LegalCompliance\n}\n\n# SEO test modÃ¼llerini Ã§alÄ±ÅŸtÄ±r (eÄŸer etkinse)\n$seoResult = $null\nif ($IncludeSEOTests) {\n    $seoResult = Test-SEOScore\n}\n\n# =========================================\n# GÃœNCELLENMÄ°Å JSON EXPORT FONKSÄ°YONU\n# =========================================\n\nfunction Export-TestResultsToJson {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [string]$OutputPath = "pwa-test-results.json",\n        [Parameter(Mandatory = $false)]\n        [switch]$PrettyPrint,\n        [Parameter(Mandatory = $false)]\n        [array]$LogMessages = @(),\n        [Parameter(Mandatory = $false)]\n        [TimeSpan]$Duration = [TimeSpan]::Zero,\n        [Parameter(Mandatory = $false)]\n        [object]$LegalResults = $null,\n        [Parameter(Mandatory = $false)]\n        [object]$SEOResults = $null\n    )\n\n    # Test sonuÃ§larÄ±nÄ± hesapla\n    $totalTests = $TestResults.Count\n    $passedTests = ($TestResults.Values | Where-Object { $_ -eq $true }).Count\n    $failedTests = ($TestResults.Values | Where-Object { $_ -eq $false }).Count\n    $skippedTests = ($TestResults.Values | Where-Object { $_ -eq $null }).Count\n    $successRate = if ($totalTests -gt 0) {\n        [math]::Round(($passedTests / $totalTests) * 100, 2)\n    } else { 0 }\n\n    # Export verisini hazÄ±rla\n    $exportData = @{\n        metadata = @{\n            timestamp = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n            script_version = "3.0.0"\n            powershell_version = $PSVersionTable.PSVersion.ToString()\n            test_duration_seconds = [math]::Round($Duration.TotalSeconds, 2)\n            hostname = $env:COMPUTERNAME\n            username = $env:USERNAME\n        }\n        configuration = @{\n            base_url = $BaseUrl\n            verbose_mode = $Verbose.IsPresent\n            skip_network_tests = $SkipNetworkTests.IsPresent\n            export_json = $ExportJson.IsPresent\n            generate_dashboard = $GenerateDashboard.IsPresent\n            include_legal_tests = $IncludeLegalTests.IsPresent\n            include_seo_tests = $IncludeSEOTests.IsPresent\n        }\n        pwa_tests = @{\n            total_tests = $totalTests\n            passed_tests = $passedTests\n            failed_tests = $failedTests\n            skipped_tests = $skippedTests\n            success_rate = $successRate\n            details = $TestResults\n            manifest_score = $manifestResult.Score\n            service_worker_score = $swResult.Score\n            html_integration_score = $htmlResult.TotalScore\n            offline_capability_score = $offlineResult.Score\n        }\n        performance_metrics = @{\n            test_duration = $Duration.ToString()\n            average_response_time = if ($totalTests -gt 0) { [math]::Round($Duration.TotalSeconds / $totalTests, 2) } else { 0 }\n            tests_per_second = if ($Duration.TotalSeconds -gt 0) { [math]::Round($totalTests / $Duration.TotalSeconds, 2) } else { 0 }\n        }\n        logs = $LogMessages\n    }\n\n    # Legal sonuÃ§larÄ± ekle\n    if ($LegalResults) {\n        $exportData.legal_compliance = @{\n            score = $LegalResults.Score\n            passed = $LegalResults.Score -ge 70\n            checks = $LegalResults.Checks\n        }\n    }\n\n    # SEO sonuÃ§larÄ± ekle\n    if ($SEOResults) {\n        $exportData.seo_score = @{\n            score = $SEOResults.Score\n            passed = $SEOResults.Score -ge 60\n            checks = $SEOResults.Checks\n        }\n    }\n\n    # Genel skor hesapla\n    $pwaScore = [math]::Round((($manifestResult.Score + $swResult.Score + $htmlResult.TotalScore + $offlineResult.Score) / 400) * 100, 1)\n    $legalScore = if ($LegalResults) { [math]::Round(($LegalResults.Score / 100) * 100, 1) } else { 0 }\n    $seoScore = if ($SEOResults) { [math]::Round(($SEOResults.Score / 100) * 100, 1) } else { 0 }\n\n    $exportData.overall_score = @{\n        pwa_score = $pwaScore\n        legal_score = $legalScore\n        seo_score = $seoScore\n        total_score = [math]::Round((($pwaScore + $legalScore + $seoScore) / 3), 1)\n    }\n\n    # Ã–neriler\n    $recommendations = @()\n\n    if ($failedTests -gt 0) {\n        $recommendations += "BaÅŸarÄ±sÄ±z testleri dÃ¼zeltmek iÃ§in manifest.json ve service-worker.js dosyalarÄ±nÄ± kontrol edin"\n    }\n    if ($successRate -lt 80) {\n        $recommendations += "PerformansÄ± artÄ±rmak iÃ§in resimleri optimize edin ve gereksiz kaynaklarÄ± kaldÄ±rÄ±n"\n    }\n    if ($skippedTests -gt 0) {\n        $recommendations += "Atlanan testleri etkinleÅŸtirmek iÃ§in aÄŸ baÄŸlantÄ±sÄ±nÄ± kontrol edin"\n    }\n    if ($LegalResults -and $LegalResults.Score -lt 70) {\n        $recommendations += "Legal compliance skorunu artÄ±rmak iÃ§in robots.txt, sitemap.xml ve privacy-policy.html dosyalarÄ±nÄ± kontrol edin"\n    }\n    if ($SEOResults -and $SEOResults.Score -lt 60) {\n        $recommendations += "SEO skorunu artÄ±rmak iÃ§in meta etiketlerini ve structured data markup'larÄ±nÄ± optimize edin"\n    }\n\n    $exportData.recommendations = $recommendations\n\n    # JSON formatÄ±nda kaydet\n    $jsonOptions = if ($PrettyPrint) {\n        @{ Depth = 10; Compress = $false }\n    } else {\n        @{ Depth = 10; Compress = $true }\n    }\n\n    $exportData | ConvertTo-Json @jsonOptions | Out-File -FilePath $OutputPath -Encoding UTF8\n\n    Write-Host "ğŸ“„ Test sonuÃ§larÄ± JSON olarak kaydedildi: $OutputPath" -ForegroundColor Cyan\n    Write-TestLog "Test results exported to JSON: $OutputPath"\n}\n\n# 2. Service Worker testi\nWrite-Host "`nâš™ï¸ Service Worker Testi:" -ForegroundColor Yellow\nWrite-TestLog "Service Worker testi baÅŸlatÄ±lÄ±yor"\n\ntry {\n    if (-not $SkipNetworkTests) {\n        $swResponse = Invoke-WebRequest -Uri "$BaseUrl/service-worker.js" -UseBasicParsing -TimeoutSec 30\n        Write-TestLog "Service Worker HTTP yanÄ±tÄ± alÄ±ndÄ±: $($swResponse.StatusCode)"\n\n        if ($swResponse.StatusCode -eq 200) {\n            Write-Host "âœ… service-worker.js eriÅŸilebilir" -ForegroundColor Green\n\n            # Service Worker iÃ§eriÄŸi kontrolÃ¼\n            $swContent = $swResponse.Content\n            $swChecks = @(\n                @{ Name = "Install event"; Pattern = "install"; Required = $true },\n                @{ Name = "Activate event"; Pattern = "activate"; Required = $true },\n                @{ Name = "Fetch event"; Pattern = "fetch"; Required = $true },\n                @{ Name = "Cache management"; Pattern = "caches"; Required = $true },\n                @{ Name = "Error handling"; Pattern = "addEventListener.*error"; Required = $false },\n                @{ Name = "Push notifications"; Pattern = "push"; Required = $false },\n                @{ Name = "Background sync"; Pattern = "sync"; Required = $false }\n            )\n\n            $swScore = 0\n            $totalChecks = $swChecks.Count\n\n            foreach ($check in $swChecks) {\n                if ($swContent -match $check.Pattern) {\n                    $symbol = if ($check.Required) { "âœ…" } else { "â„¹ï¸" }\n                    $color = if ($check.Required) { "Green" } else { "Cyan" }\n                    Write-Host "$symbol $($check.Name) handler mevcut" -ForegroundColor $color\n                    if ($check.Required) { $swScore++ }\n                    Write-TestLog "$($check.Name) handler bulundu"\n                } else {\n                    $symbol = if ($check.Required) { "âŒ" } else { "âšª" }\n                    $color = if ($check.Required) { "Red" } else { "Gray" }\n                    Write-Host "$symbol $($check.Name) handler eksik" -ForegroundColor $color\n                    if ($check.Required) {\n                        Write-TestLog "$($check.Name) handler eksik" "WARN"\n                    }\n                }\n            }\n\n            $swPercentage = [math]::Round(($swScore / $swChecks.Where({$_.Required}).Count) * 100, 1)\n            Write-Host "ğŸ“Š Service Worker kapsamÄ±: $swPercentage%" -ForegroundColor Yellow\n\n            $testResults["ServiceWorker"] = $swPercentage -ge 75\n        } else {\n            Write-Host "âŒ service-worker.js eriÅŸilemiyor (Status: $($swResponse.StatusCode))" -ForegroundColor Red\n            $testResults["ServiceWorker"] = $false\n        }\n    } else {\n        Write-Host "â­ï¸ AÄŸ testleri atlandÄ±" -ForegroundColor Yellow\n        $testResults["ServiceWorker"] = $null\n    }\n}\ncatch {\n    Write-Host "âŒ Service Worker testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n    Write-TestLog "Service Worker testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n    $testResults["ServiceWorker"] = $false\n}\n\n# 3. HTML sayfalarÄ±nda PWA entegrasyonu testi\nWrite-Host "`nğŸŒ HTML PWA Entegrasyonu Testi:" -ForegroundColor Yellow\nWrite-TestLog "HTML PWA entegrasyonu testi baÅŸlatÄ±lÄ±yor"\n\n$pagesToTest = @(\n    @{ Name = "Ana Sayfa"; Url = "$BaseUrl/"; File = "index.html" },\n    @{ Name = "Yasal Sayfa"; Url = "$BaseUrl/legal.html"; File = "legal.html" },\n    @{ Name = "Gizlilik SayfasÄ±"; Url = "$BaseUrl/privacy-policy.html"; File = "privacy-policy.html" },\n    @{ Name = "404 SayfasÄ±"; Url = "$BaseUrl/404.html"; File = "404.html" }\n)\n\nforeach ($page in $pagesToTest) {\n    Write-TestLog "$($page.Name) testi baÅŸlatÄ±lÄ±yor"\n\n    try {\n        if (-not $SkipNetworkTests) {\n            $pageResponse = Invoke-WebRequest -Uri $page.Url -UseBasicParsing -TimeoutSec 30\n            Write-TestLog "$($page.Name) HTTP yanÄ±tÄ±: $($pageResponse.StatusCode)"\n\n            if ($pageResponse.StatusCode -eq 200) {\n                $content = $pageResponse.Content\n\n                # PWA meta etiketleri kontrolÃ¼\n                $pwaChecks = @(\n                    @{ Name = "Manifest link"; Pattern = 'rel="manifest"'; Required = $true },\n                    @{ Name = "Theme color"; Pattern = 'name="theme-color"'; Required = $true },\n                    @{ Name = "Apple mobile web app"; Pattern = 'name="apple-mobile-web-app'; Required = $false },\n                    @{ Name = "Service Worker script"; Pattern = 'service-worker\.js'; Required = $true },\n                    @{ Name = "Viewport meta"; Pattern = 'name="viewport"'; Required = $true },\n                    @{ Name = "Charset UTF-8"; Pattern = 'charset=utf-8'; Required = $true }\n                )\n\n                $pageResults = @()\n                $pageScore = 0\n                $requiredChecks = $pwaChecks.Where({$_.Required}).Count\n\n                foreach ($check in $pwaChecks) {\n                    if ($content -match $check.Pattern) {\n                        $symbol = if ($check.Required) { "âœ…" } else { "â„¹ï¸" }\n                        $pageResults += "$symbol $($check.Name)"\n                        if ($check.Required) { $pageScore++ }\n                        Write-TestLog "$($page.Name) - $($check.Name) bulundu"\n                    } else {\n                        $symbol = if ($check.Required) { "âŒ" } else { "âšª" }\n                        $pageResults += "$symbol $($check.Name)"\n                        if ($check.Required) {\n                            Write-TestLog "$($page.Name) - $($check.Name) eksik" "WARN"\n                        }\n                    }\n                }\n\n                Write-Host "$($page.Name) ($($page.Url)):" -ForegroundColor White\n                foreach ($result in $pageResults) {\n                    if ($result -match "âœ…") {\n                        Write-Host "  $result" -ForegroundColor Green\n                    } elseif ($result -match "â„¹ï¸") {\n                        Write-Host "  $result" -ForegroundColor Cyan\n                    } else {\n                        Write-Host "  $result" -ForegroundColor Red\n                    }\n                }\n\n                $pagePercentage = [math]::Round(($pageScore / $requiredChecks) * 100, 1)\n                Write-Host "  ğŸ“Š PWA kapsamÄ±: $pagePercentage%" -ForegroundColor Yellow\n\n                $testResults[$page.Name] = $pagePercentage -ge 80\n            } else {\n                Write-Host "âŒ $($page.Name) eriÅŸilemiyor (Status: $($pageResponse.StatusCode))" -ForegroundColor Red\n                $testResults[$page.Name] = $false\n            }\n        } else {\n            Write-Host "â­ï¸ $($page.Name) - AÄŸ testleri atlandÄ±" -ForegroundColor Yellow\n            $testResults[$page.Name] = $null\n        }\n    }\n    catch {\n        Write-Host "âŒ $($page.Name) testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n        Write-TestLog "$($page.Name) testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n        $testResults[$page.Name] = $false\n    }\n}\n\n# 4. Offline capability testi (basit)\nWrite-Host "`nğŸ“¶ Offline Capability Testi:" -ForegroundColor Yellow\nWrite-TestLog "Offline capability testi baÅŸlatÄ±lÄ±yor"\n\ntry {\n    if (-not $SkipNetworkTests) {\n        $offlineResponse = Invoke-WebRequest -Uri "$BaseUrl/404.html" -UseBasicParsing -TimeoutSec 30\n        Write-TestLog "404.html HTTP yanÄ±tÄ±: $($offlineResponse.StatusCode)"\n\n        if ($offlineResponse.StatusCode -eq 200) {\n            $offlineContent = $offlineResponse.Content\n\n            # 404 sayfasÄ±nda PWA entegrasyonu kontrolÃ¼\n            $offlineChecks = @(\n                @{ Name = "Service Worker"; Pattern = 'service-worker\.js' },\n                @{ Name = "Manifest link"; Pattern = 'rel="manifest"' },\n                @{ Name = "Offline mesaj"; Pattern = 'offline|Ã§evrimdÄ±ÅŸÄ±|baÄŸlantÄ± yok' }\n            )\n\n            foreach ($check in $offlineChecks) {\n                if ($offlineContent -match $check.Pattern) {\n                    Write-Host "âœ… $($check.Name) mevcut" -ForegroundColor Green\n                } else {\n                    Write-Host "âš ï¸ $($check.Name) eksik" -ForegroundColor Yellow\n                }\n            }\n\n            Write-Host "âœ… 404.html offline fallback sayfasÄ± mevcut" -ForegroundColor Green\n            $testResults["OfflineFallback"] = $true\n        } else {\n            Write-Host "âŒ 404.html offline fallback sayfasÄ± eksik" -ForegroundColor Red\n            $testResults["OfflineFallback"] = $false\n        }\n    } else {\n        Write-Host "â­ï¸ Offline testi atlandÄ±" -ForegroundColor Yellow\n        $testResults["OfflineFallback"] = $null\n    }\n}\ncatch {\n    Write-Host "âŒ Offline fallback testi baÅŸarÄ±sÄ±z: $($_.Exception.Message)" -ForegroundColor Red\n    Write-TestLog "Offline testi hatasÄ±: $($_.Exception.Message)" "ERROR"\n    $testResults["OfflineFallback"] = $false\n}\n\n# =========================================\n# ANA SCRIPT SONU - RAPORLAMA VE Ã‡IKIÅ\n# =========================================\n\n$endTime = Get-Date\n$duration = $endTime - $startTime\n\n# Test Ã¶zeti\nWrite-Host "`nğŸ“Š PWA Test Ã–zeti:" -ForegroundColor Cyan\nWrite-Host "=" * 60 -ForegroundColor Cyan\nWrite-Host "â±ï¸ Test sÃ¼resi: $($duration.TotalSeconds.ToString("F2")) saniye" -ForegroundColor Gray\n\n$validResults = $testResults.Values.Where({ $_ -ne $null })\n$passedTests = ($validResults | Where-Object { $_ -eq $true }).Count\n$totalValidTests = $validResults.Count\n$skippedTests = $testResults.Count - $totalValidTests\n\nif ($skippedTests -gt 0) {\n    Write-Host "â­ï¸ Atlanan testler: $skippedTests" -ForegroundColor Yellow\n}\n\n# Genel skor hesapla\n$pwaScore = [math]::Round((($manifestResult.Score + $swResult.Score + $htmlResult.TotalScore + $offlineResult.Score) / 400) * 100, 1)\n$legalScore = if ($legalResult) { [math]::Round(($legalResult.Score / 100) * 100, 1) } else { 0 }\n$seoScore = if ($seoResult) { [math]::Round(($seoResult.Score / 100) * 100, 1) } else { 0 }\n$totalScore = [math]::Round((($pwaScore + $legalScore + $seoScore) / 3), 1)\n\nWrite-Host "`nğŸ“ˆ Genel Skor:" -ForegroundColor White\nWrite-Host "  ğŸ¯ PWA Skoru: $pwaScore/100" -ForegroundColor Cyan\nif ($IncludeLegalTests) {\n    Write-Host "  âš–ï¸ Legal Skoru: $legalScore/100" -ForegroundColor Cyan\n}\nif ($IncludeSEOTests) {\n    Write-Host "  ğŸ” SEO Skoru: $seoScore/100" -ForegroundColor Cyan\n}\nWrite-Host "  ğŸ† Toplam Skoru: $totalScore/100" -ForegroundColor Green\n\nWrite-Host "`nğŸ“ˆ Test SonuÃ§larÄ±:" -ForegroundColor White\nforeach ($test in $testResults.GetEnumerator()) {\n    $status = switch ($test.Value) {\n        $true { "âœ… BAÅARILI" }\n        $false { "âŒ BAÅARISIZ" }\n        $null { "â­ï¸ ATLADI" }\n        default { "â“ BÄ°LÄ°NMÄ°YOR" }\n    }\n\n    $color = switch ($test.Value) {\n        $true { "Green" }\n        $false { "Red" }\n        $null { "Yellow" }\n        default { "Gray" }\n    }\n\n    Write-Host "  $($test.Key): $status" -ForegroundColor $color\n}\n\n# BaÅŸarÄ± deÄŸerlendirmesi\nif ($passedTests -eq $totalValidTests -and $totalScore -ge 80) {\n    Write-Host "`nğŸ‰ TÃ¼m PWA testleri baÅŸarÄ±lÄ±! UygulamanÄ±z PWA Ã¶zelliklerine hazÄ±r." -ForegroundColor Green\n    Write-TestLog "TÃ¼m testler baÅŸarÄ±lÄ±" "SUCCESS"\n} elseif ($passedTests -ge ($totalValidTests * 0.7) -and $totalScore -ge 60) {\n    Write-Host "`nâš ï¸ Ã‡oÄŸu PWA testi baÅŸarÄ±lÄ±. KÃ¼Ã§Ã¼k iyileÅŸtirmeler gerekebilir." -ForegroundColor Yellow\n    Write-TestLog "Ã‡oÄŸu test baÅŸarÄ±lÄ±, iyileÅŸtirme gerekebilir" "WARN"\n} else {\n    Write-Host "`nâŒ PWA testlerinin Ã§oÄŸu baÅŸarÄ±sÄ±z. YapÄ±landÄ±rma kontrolÃ¼ gerekebilir." -ForegroundColor Red\n    Write-TestLog "Ã‡oÄŸu test baÅŸarÄ±sÄ±z" "ERROR"\n}\n\n# Dashboard oluÅŸtur (eÄŸer istenmiÅŸse)\nif ($GenerateDashboard) {\n    Generate-PWADashboard -TestResults $testResults -LegalResults $legalResults -SEOResults $seoResults\n}\n\n# Badge oluÅŸtur (test sonuÃ§larÄ±na gÃ¶re otomatik gÃ¼ncellenir)\n$badgeResult = Generate-PWABadges -TestResults $testResults\n\nif ($badgeResult) {\n    Write-Host "`nğŸ·ï¸ Badge GÃ¼ncelleme DetaylarÄ±:" -ForegroundColor Cyan\n    Write-Host "  ğŸ“Š BaÅŸarÄ± OranÄ±: $($badgeResult.SuccessRate)%" -ForegroundColor White\n    Write-Host "  ğŸ¨ Badge Rengi: $($badgeResult.BadgeColor.ToUpper())" -ForegroundColor White\n    Write-Host "  âœ… GeÃ§en Testler: $($badgeResult.PassedTests)" -ForegroundColor Green\n    Write-Host "  âŒ BaÅŸarÄ±sÄ±z Testler: $($badgeResult.FailedTests)" -ForegroundColor Red\n    Write-Host "  â­ï¸ Atlanan Testler: $($badgeResult.SkippedTests)" -ForegroundColor Yellow\n    Write-Host "  ğŸ“… Son GÃ¼ncelleme: $($badgeResult.LastUpdate)" -ForegroundColor Gray\n    Write-Host "  ğŸ“„ Badge DosyasÄ±: pwa-badges.md" -ForegroundColor White\n}\n\n# JSON Export\nif ($ExportJson) {\n    Export-TestResultsToJson -TestResults $testResults -LogMessages $logMessages -Duration $duration -LegalResults $legalResult -SEOResults $seoResult\n}\n\n# Test geÃ§miÅŸini kaydet\nSave-TestHistoryToJson -TestResults $testResults -LegalResults $legalResult -SEOResults $seoResult -Duration $duration\n\n# Test geÃ§miÅŸini veritabanÄ±na kaydet\nSave-TestToDatabase -TestResults $testResults -LegalResults $legalResult -SEOResults $seoResult -Duration $duration\n\n# Test geÃ§miÅŸini CSV'ye aktar\nExport-TestHistoryToCSV\n\n# Test geÃ§miÅŸini istatistikleri\n$historyStats = Get-TestHistoryStatistics\nif ($historyStats) {\n    Write-Host "`nğŸ“ˆ GeÃ§miÅŸ Analizi:" -ForegroundColor Magenta\n    Write-Host "  ğŸ“Š Trend: $($historyStats.trend.direction) ($($historyStats.trend.change_percent)%)" -ForegroundColor White\n    Write-Host "  ğŸ“ˆ Ortalama baÅŸarÄ±: $($historyStats.average_success_rate)%" -ForegroundColor White\n    if ($historyStats.legal_average) {\n        Write-Host "  âš–ï¸ Legal ortalama: $($historyStats.legal_average)/100" -ForegroundColor White\n    }\n    if ($historyStats.seo_average) {\n        Write-Host "  ğŸ” SEO ortalama: $($historyStats.seo_average)/100" -ForegroundColor White\n    }\n}\n\n# Test sonuÃ§larÄ±nÄ± geÃ§miÅŸe arÅŸivle\nif ($ExportJson) {\n    Archive-TestResultsToHistory -JsonResultsPath "pwa-test-results.json"\n}\n\n# Webhook bildirimi gÃ¶nder (eÄŸer webhook URL'si varsa)\nif ($SlackWebhookUrl) {\n    Write-Host "`nğŸ“¢ Slack webhook bildirimi gÃ¶nderiliyor..." -ForegroundColor Cyan\n    Send-WebhookNotification -WebhookUrl $SlackWebhookUrl -TestResults $testResults -LegalResults $legalResult -SEOResults $seoResult -Duration $duration -Platform "slack"\n}\n\nif ($DiscordWebhookUrl) {\n    Write-Host "`nğŸ“¢ Discord webhook bildirimi gÃ¶nderiliyor..." -ForegroundColor Cyan\n    Send-WebhookNotification -WebhookUrl $DiscordWebhookUrl -TestResults $testResults -LegalResults $legalResult -SEOResults $seoResult -Duration $duration -Platform "discord"\n}\n\n# Final Ã¶zet ve badge rengi belirleme\nWrite-Host "`nâœ… PWA testi baÅŸarÄ±yla tamamlandÄ±!" -ForegroundColor Green\nif ($totalValidTests -gt 0) {\n    $successRate = [math]::Round(($passedTests / $totalValidTests) * 100, 1)\n    Write-Host "ğŸ“Š BaÅŸarÄ± OranÄ±: $passedTests/$totalValidTests ($successRate%)" -ForegroundColor Green\n\n    # Badge rengini belirle (kullanÄ±cÄ±nÄ±n istediÄŸi aralÄ±klara gÃ¶re)\n    $badgeColor = switch ($successRate) {\n        { $_ -ge 90 } { "YEÅÄ°L"; break }\n        { $_ -ge 70 } { "SARI"; break }\n        { $_ -ge 50 } { "TURUNCU"; break }\n        default { "KIRMIZI"; break }\n    }\n\n    Write-Host "ğŸ¨ Otomatik Badge Rengi: $badgeColor (Son test skoruna gÃ¶re)" -ForegroundColor White\n} else {\n    Write-Host "ğŸ“Š BaÅŸarÄ± OranÄ±: $passedTests/$totalValidTests (0%)" -ForegroundColor Green\n    $badgeColor = "KIRMIZI"\n    Write-Host "ğŸ¨ Otomatik Badge Rengi: $badgeColor (Test yapÄ±lamadÄ±)" -ForegroundColor White\n}\nWrite-Host "ğŸ† Genel Skoru: $totalScore/100" -ForegroundColor Green\n\n# Ã–neriler\nWrite-Host "`nğŸ¯ Ä°yileÅŸtirme Ã–nerileri:" -ForegroundColor Magenta\nif ($failedTests -gt 0) {\n    Write-Host "  â€¢ BaÅŸarÄ±sÄ±z testleri dÃ¼zeltmek iÃ§in manifest.json ve service-worker.js dosyalarÄ±nÄ± kontrol edin" -ForegroundColor White\n}\nif ($totalScore -lt 80) {\n    Write-Host "  â€¢ Genel skoru artÄ±rmak iÃ§in PWA, legal ve SEO iyileÅŸtirmelerini uygulayÄ±n" -ForegroundColor White\n}\nif ($IncludeLegalTests -and $legalResult -and $legalResult.Score -lt 70) {\n    Write-Host "  â€¢ Legal compliance iÃ§in robots.txt, sitemap.xml ve privacy-policy.html dosyalarÄ±nÄ± kontrol edin" -ForegroundColor White\n}\nif ($IncludeSEOTests -and $seoResult -and $seoResult.Score -lt 60) {\n    Write-Host "  â€¢ SEO iÃ§in meta etiketlerini ve structured data markup'larÄ±nÄ± optimize edin" -ForegroundColor White\n}\nWrite-Host "  â€¢ HTTPS kullanÄ±n ve gÃ¼venlik baÅŸlÄ±klarÄ±nÄ± ekleyin" -ForegroundColor White\n\n# KullanÄ±m Ã¶rnekleri\nWrite-Host "`nğŸ”„ Testi tekrar Ã§alÄ±ÅŸtÄ±rmak iÃ§in:" -ForegroundColor Cyan\nWrite-Host "  .\Test-PWA.ps1" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 -Verbose" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 -SkipNetworkTests" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 -ExportJson" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 -GenerateDashboard" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 -IncludeLegalTests -IncludeSEOTests" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 --slack-webhook=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 --discord-webhook=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK" -ForegroundColor White\nWrite-Host "  .\Test-PWA.ps1 https://kesifapp.com -Verbose -ExportJson -GenerateDashboard --slack-webhook=URL" -ForegroundColor White\n\n# Environment variables iÃ§in Ã¶rnekler\nWrite-Host "`nğŸŒ Environment Variables:" -ForegroundColor Cyan\nWrite-Host "  \$env:PWA_SLACK_WEBHOOK = 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'" -ForegroundColor White\nWrite-Host "  \$env:PWA_DISCORD_WEBHOOK = 'https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK'" -ForegroundColor White\n\nWrite-Host "`n" + ("â•" * 60) -ForegroundColor Cyan\nWrite-Host "ğŸš€ Kesif UygulamasÄ± PWA Testi TamamlandÄ±" -ForegroundColor Cyan\nWrite-Host ("â•" * 60) -ForegroundColor Cyan\n\n# =========================================\n# BAÅARISIZ TESTLERÄ° ANALÄ°Z MODÃœLÃœ\n# =========================================\n\nfunction Analyze-FailedTests {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [string]$OutputPath = "pwa-test-results.json"\n    )\n\n    Write-Host "`nğŸ” BaÅŸarÄ±sÄ±z Testler Analizi:" -ForegroundColor Magenta\n    Write-Host "=" * 60 -ForegroundColor Magenta\n\n    $failedTests = @{}\n    $suggestions = @{}\n\n    foreach ($test in $TestResults.GetEnumerator()) {\n        if ($test.Value -eq $false) {\n            $failedTests[$test.Key] = $true\n            $suggestions[$test.Key] = Get-TestFailureAnalysis -TestName $test.Key\n        }\n    }\n\n    if ($failedTests.Count -eq 0) {\n        Write-Host "âœ… TÃ¼m testler baÅŸarÄ±lÄ±! Analiz gerekli deÄŸil." -ForegroundColor Green\n        return @{ FailedTests = @{}; Suggestions = @{} }\n    }\n\n    Write-Host "âŒ Bulunan baÅŸarÄ±sÄ±z test sayÄ±sÄ±: $($failedTests.Count)" -ForegroundColor Red\n    Write-Host "" -ForegroundColor White\n\n    foreach ($testName in $failedTests.Keys) {\n        $analysis = $suggestions[$testName]\n        Write-Host "ğŸ”´ $testName Testi BaÅŸarÄ±sÄ±z:" -ForegroundColor Red\n        Write-Host "   ğŸ“ Hata: $($analysis.ErrorMessage)" -ForegroundColor White\n        Write-Host "   ğŸ” OlasÄ± Nedenler:" -ForegroundColor Yellow\n\n        foreach ($reason in $analysis.PossibleCauses) {\n            Write-Host "      â€¢ $reason" -ForegroundColor Gray\n        }\n\n        Write-Host "   ğŸ› ï¸ Ã–nerilen DÃ¼zeltmeler:" -ForegroundColor Cyan\n        foreach ($fix in $analysis.RecommendedFixes) {\n            Write-Host "      â€¢ $fix" -ForegroundColor White\n        }\n\n        Write-Host "   ğŸ“š Kaynaklar:" -ForegroundColor Green\n        foreach ($resource in $analysis.Resources) {\n            Write-Host "      â€¢ $resource" -ForegroundColor Gray\n        }\n\n        Write-Host "" -ForegroundColor White\n        Write-TestLog "Failed test analysis: $testName - $($analysis.ErrorMessage)"\n    }\n\n    # JSON dosyasÄ±na Ã¶nerileri ekle\n    if (Test-Path $OutputPath) {\n        try {\n            $jsonContent = Get-Content $OutputPath -Raw | ConvertFrom-Json\n\n            # Suggestions alanÄ±nÄ± ekle\n            $jsonContent | Add-Member -MemberType NoteProperty -Name "suggestions" -Value $suggestions -Force\n\n            # Analysis summary ekle\n            $analysisSummary = @{\n                total_failed_tests = $failedTests.Count\n                analysis_timestamp = Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ"\n                critical_issues = ($suggestions.Values | Where-Object { $_.Severity -eq "Critical" }).Count\n                warning_issues = ($suggestions.Values | Where-Object { $_.Severity -eq "Warning" }).Count\n                info_issues = ($suggestions.Values | Where-Object { $_.Severity -eq "Info" }).Count\n            }\n\n            $jsonContent | Add-Member -MemberType NoteProperty -Name "failure_analysis" -Value $analysisSummary -Force\n\n            $jsonContent | ConvertTo-Json -Depth 10 | Out-File -FilePath $OutputPath -Encoding UTF8\n            Write-Host "ğŸ“„ Test sonuÃ§larÄ±na Ã¶neriler eklendi: $OutputPath" -ForegroundColor Green\n            Write-TestLog "Suggestions added to JSON results: $OutputPath"\n        }\n        catch {\n            Write-Host "âŒ JSON dosyasÄ±na Ã¶neriler eklenemedi: $($_.Exception.Message)" -ForegroundColor Red\n            Write-TestLog "Failed to add suggestions to JSON: $($_.Exception.Message)" "ERROR"\n        }\n    }\n\n    # README dosyasÄ±na baÅŸarÄ±sÄ±zlÄ±k Ã¶zetini ekle\n    Update-READMEWithTrendReport -TestResults $testResults -TrendAnalysis $trendAnalysis\n\n    return @{\n        FailedTests = $failedTests\n        Suggestions = $suggestions\n        AnalysisCount = $failedTests.Count\n    }\n}\n\nfunction Get-TestFailureAnalysis {\n    param(\n        [Parameter(Mandatory = $true)]\n        [string]$TestName\n    )\n\n    $analysis = @{\n        ErrorMessage = ""\n        PossibleCauses = @()\n        RecommendedFixes = @()\n        Resources = @()\n        Severity = "Warning"\n    }\n\n    switch ($TestName) {\n        "Manifest" {\n            $analysis.ErrorMessage = "PWA manifest dosyasÄ± bulunamadÄ± veya geÃ§ersiz"\n            $analysis.PossibleCauses = @(\n                "manifest.json dosyasÄ± sunucuda mevcut deÄŸil",\n                "manifest.json dosyasÄ± yanlÄ±ÅŸ konumda",\n                "manifest.json dosyasÄ± bozuk JSON formatÄ±nda",\n                "Gerekli manifest alanlarÄ± eksik",\n                "manifest.json dosyasÄ± HTTPS Ã¼zerinden eriÅŸilebilir deÄŸil"\n            )\n            $analysis.RecommendedFixes = @(\n                "Proje kÃ¶k dizininize manifest.json dosyasÄ± oluÅŸturun",\n                "Gerekli alanlarÄ± ekleyin: name, short_name, start_url, display, icons",\n                "manifest.json dosyasÄ±nÄ± HTML'de <link rel='manifest' href='/manifest.json'> ile baÄŸlayÄ±n",\n                "Manifest dosyasÄ±nÄ±n geÃ§erli JSON formatÄ±nda olduÄŸundan emin olun",\n                "TarayÄ±cÄ± geliÅŸtirici araÃ§larÄ±nda Application > Manifest bÃ¶lÃ¼mÃ¼nÃ¼ kontrol edin"\n            )\n            $analysis.Resources = @(\n                "https://developer.mozilla.org/en-US/docs/Web/Manifest",\n                "https://web.dev/add-manifest/",\n                "https://developers.google.com/web/fundamentals/web-app-manifest"\n            )\n            $analysis.Severity = "Critical"\n        }\n\n        "ServiceWorker" {\n            $analysis.ErrorMessage = "Service Worker dosyasÄ± bulunamadÄ± veya eksik iÅŸlevsellik"\n            $analysis.PossibleCauses = @(\n                "service-worker.js dosyasÄ± sunucuda mevcut deÄŸil",\n                "Service Worker gerekli event handler'larÄ± iÃ§ermiyor",\n                "Service Worker kayÄ±t edilemedi",\n                "HTTPS protokolÃ¼ kullanÄ±lmÄ±yor",\n                "Service Worker scope hatasÄ±"\n            )\n            $analysis.RecommendedFixes = @(\n                "service-worker.js dosyasÄ±nÄ± proje kÃ¶k dizinine oluÅŸturun",\n                "Gerekli event handler'larÄ± ekleyin: install, activate, fetch",\n                "Cache management iÅŸlevselliÄŸi ekleyin",\n                "HTML'de Service Worker'Ä± kaydedin: navigator.serviceWorker.register('/service-worker.js')",\n                "TarayÄ±cÄ± geliÅŸtirici araÃ§larÄ±nda Application > Service Workers bÃ¶lÃ¼mÃ¼nÃ¼ kontrol edin"\n            )\n            $analysis.Resources = @(\n                "https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API",\n                "https://web.dev/service-workers/",\n                "https://developers.google.com/web/fundamentals/primers/service-workers"\n            )\n            $analysis.Severity = "Critical"\n        }\n\n        "Ana Sayfa" {\n            $analysis.ErrorMessage = "Ana sayfa PWA entegrasyonu eksik veya hatalÄ±"\n            $analysis.PossibleCauses = @(\n                "HTML dosyasÄ±nda PWA meta etiketleri eksik",\n                "Manifest baÄŸlantÄ±sÄ± hatalÄ±",\n                "Service Worker kaydÄ± eksik",\n                "Viewport meta etiketi eksik",\n                "Theme color tanÄ±mlanmamÄ±ÅŸ"\n            )\n            $analysis.RecommendedFixes = @(\n                "<link rel='manifest' href='/manifest.json'> etiketini ekleyin",\n                "<meta name='theme-color' content='#ffffff'> etiketini ekleyin",\n                "<meta name='viewport' content='width=device-width, initial-scale=1'> etiketini ekleyin",\n                "Service Worker kayÄ±t script'ini ekleyin",\n                "Apple touch icon'larÄ± ekleyin"\n            )\n            $analysis.Resources = @(\n                "https://web.dev/add-manifest/",\n                "https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Add_to_home_screen"\n            )\n            $analysis.Severity = "Critical"\n        }\n\n        "Yasal Sayfa" {\n            $analysis.ErrorMessage = "Yasal sayfa bulunamadÄ± veya PWA entegrasyonu eksik"\n            $analysis.PossibleCauses = @(\n                "legal.html dosyasÄ± mevcut deÄŸil",\n                "Yasal sayfa PWA meta etiketlerini iÃ§ermiyor",\n                "Sayfa HTTPS Ã¼zerinden eriÅŸilebilir deÄŸil"\n            )\n            $analysis.RecommendedFixes = @(\n                "legal.html dosyasÄ±nÄ± oluÅŸturun",\n                "PWA meta etiketlerini ekleyin",\n                "SayfanÄ±n HTTPS Ã¼zerinden eriÅŸilebilir olduÄŸundan emin olun",\n                "Gerekli yasal iÃ§erikleri ekleyin"\n            )\n            $analysis.Resources = @(\n                "https://web.dev/add-manifest/",\n                "https://developers.google.com/web/fundamentals/web-app-manifest"\n            )\n            $analysis.Severity = "Warning"\n        }\n\n        "Gizlilik SayfasÄ±" {\n            $analysis.ErrorMessage = "Gizlilik sayfasÄ± bulunamadÄ± veya PWA entegrasyonu eksik"\n            $analysis.PossibleCauses = @(\n                "privacy-policy.html dosyasÄ± mevcut deÄŸil",\n                "Gizlilik sayfasÄ± PWA meta etiketlerini iÃ§ermiyor",\n                "Sayfa HTTPS Ã¼zerinden eriÅŸilebilir deÄŸil"\n            )\n            $analysis.RecommendedFixes = @(\n                "privacy-policy.html dosyasÄ±nÄ± oluÅŸturun",\n                "PWA meta etiketlerini ekleyin",\n                "SayfanÄ±n HTTPS Ã¼zerinden eriÅŸilebilir olduÄŸundan emin olun",\n                "GDPR uyumlu gizlilik politikasÄ± iÃ§eriÄŸi ekleyin"\n            )\n            $analysis.Resources = @(\n                "https://web.dev/add-manifest/",\n                "https://developers.google.com/web/fundamentals/web-app-manifest"\n            )\n            $analysis.Severity = "Warning"\n        }\n\n        "404 SayfasÄ±" {\n            $analysis.ErrorMessage = "404 sayfasÄ± bulunamadÄ± veya PWA entegrasyonu eksik"\n            $analysis.PossibleCauses = @(\n                "404.html dosyasÄ± mevcut deÄŸil",\n                "404 sayfasÄ± PWA meta etiketlerini iÃ§ermiyor",\n                "Sayfa HTTPS Ã¼zerinden eriÅŸilebilir deÄŸil"\n            )\n            $analysis.RecommendedFixes = @(\n                "404.html dosyasÄ±nÄ± oluÅŸturun",\n                "PWA meta etiketlerini ekleyin",\n                "SayfanÄ±n HTTPS Ã¼zerinden eriÅŸilebilir olduÄŸundan emin olun",\n                "KullanÄ±cÄ± dostu 404 iÃ§eriÄŸi ekleyin"\n            )\n            $analysis.Resources = @(\n                "https://web.dev/add-manifest/",\n                "https://developers.google.com/web/fundamentals/web-app-manifest"\n            )\n            $analysis.Severity = "Info"\n        }\n\n        "OfflineFallback" {\n            $analysis.ErrorMessage = "Offline fallback sayfasÄ± bulunamadÄ±"\n            $analysis.PossibleCauses = @(\n                "offline.html dosyasÄ± mevcut deÄŸil",\n                "Service Worker'da offline fallback tanÄ±mlanmamÄ±ÅŸ",\n                "Cache strategy hatalÄ±"\n            )\n            $analysis.RecommendedFixes = @(\n                "offline.html fallback sayfasÄ± oluÅŸturun",\n                "Service Worker'da offline event handler'Ä± ekleyin",\n                "Cache-first strategy uygulayÄ±n",\n                "TarayÄ±cÄ± geliÅŸtirici araÃ§larÄ±nda offline modunu test edin"\n            )\n            $analysis.Resources = @(\n                "https://web.dev/offline-fallback-page/",\n                "https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook"\n            )\n            $analysis.Severity = "Warning"\n        }\n\n        default {\n            $analysis.ErrorMessage = "Bilinmeyen test hatasÄ±"\n            $analysis.PossibleCauses = @("Test tÃ¼rÃ¼ tanÄ±mlanamadÄ±")\n            $analysis.RecommendedFixes = @("Test kodunu kontrol edin", "Hata mesajlarÄ±nÄ± inceleyin")\n            $analysis.Resources = @("https://web.dev/progressive-web-apps/")\n            $analysis.Severity = "Info"\n        }\n    }\n\n    return $analysis\n}\n\nfunction Update-READMEWithTrendReport {\n    param(\n        [Parameter(Mandatory = $true)]\n        [hashtable]$TestResults,\n        [Parameter(Mandatory = $false)]\n        [hashtable]$TrendAnalysis = $null,\n        [Parameter(Mandatory = $false)]\n        [string]$ReadmePath = "README.md"\n    )\n\n    Write-Host "`nğŸ“ README.md Trend Raporu ile gÃ¼ncelleniyor..." -ForegroundColor Cyan\n\n    # README.md dosyasÄ±nÄ± oku\n    if (-not (Test-Path $ReadmePath)) {\n        Write-Warning "README.md dosyasÄ± bulunamadÄ±: $ReadmePath"\n        return $false\n    }\n\n    $readmeContent = Get-Content $ReadmePath -Raw\n\n    # Trend rapor bÃ¶lÃ¼mÃ¼ oluÅŸtur\n    $trendReportSection = ""\n    if ($TrendAnalysis) {\n        $trendReportSection = @"\n\n## ï¿½ Trend Raporu\n\n### Son 5 Test Analizi\n| Metrik | DeÄŸer | Trend |\n|--------|-------|-------|\n| Ortalama BaÅŸarÄ± OranÄ± | $(if ($TrendAnalysis.average_last_5) { $TrendAnalysis.average_last_5 } else { 'N/A' })% | $(if ($TrendAnalysis.direction) { $TrendAnalysis.direction } else { 'stable' }) |\n| DeÄŸiÅŸim OranÄ± | $(if ($TrendAnalysis.change_percent) { $TrendAnalysis.change_percent } else { 0 })% | $(if ($TrendAnalysis.direction) { $TrendAnalysis.direction } else { 'stable' }) |\n| Trend GÃ¼venilirliÄŸi | $(if ($TrendAnalysis.confidence) { $TrendAnalysis.confidence } else { 'N/A' }) | - |\n| Test SayÄ±sÄ± | $(if ($TrendAnalysis.test_count) { $TrendAnalysis.test_count } else { 0 }) | - |\n\n### Trend GÃ¶rselleÅŸtirme\n```\nSon 5 Test BaÅŸarÄ± OranlarÄ±:\n$(($TrendAnalysis.last_5_rates | ForEach-Object { "$_%" }) -join ' â†’ ')\n```\n\n**Trend YÃ¶nÃ¼:** $(if ($TrendAnalysis.direction) { $TrendAnalysis.direction } else { 'stable' })\n**Son Test:** $(if ($TestResults.summary.success_rate) { $TestResults.summary.success_rate } else { 0 })%\n**Trend GÃ¶stergesi:** $(switch ($TrendAnalysis.direction) {\n    "improving" { "ğŸ“ˆ Ä°yileÅŸen" }\n    "declining" { "ğŸ“‰ DÃ¼ÅŸen" }\n    default { "â¡ï¸ Stabil" }\n})\n\n---\n"@\n    }\n\n    # BaÅŸarÄ±sÄ±zlÄ±k analizi bÃ¶lÃ¼mÃ¼\n    $failureAnalysisSection = ""\n    if ($TestResults.failed_tests -and $TestResults.failed_tests.Count -gt 0) {\n        $failureAnalysisSection = @"\n\n## âŒ BaÅŸarÄ±sÄ±zlÄ±k Analizi\n\n### Kritik Sorunlar\n$($TestResults.failed_tests | ForEach-Object {\n    "### $($_.test_name)\n- **Hata:** $($_.error_message)\n- **Ã–neri:** $($_.suggestion)\n- **Ã–nem Derecesi:** $(switch ($_.severity) {\n        "critical" { "ğŸ”´ Kritik" }\n        "high" { "ğŸŸ  YÃ¼ksek" }\n        "medium" { "ğŸŸ¡ Orta" }\n        default { "ğŸŸ¢ DÃ¼ÅŸÃ¼k" }\n    })\n- **Kategori:** $(if ($_.category) { $_.category } else { 'Genel' })\n\n"\n} | Out-String)\n\n### Ä°yileÅŸtirme Ã–nerileri\n1. **HÄ±zlÄ± DÃ¼zeltmeler:** Kritik hatalarÄ± Ã¶ncelikli olarak giderin\n2. **Performans Optimizasyonu:** Sayfa yÃ¼kleme hÄ±zÄ±nÄ± iyileÅŸtirin\n3. **SEO UyumluluÄŸu:** Meta etiketleri ve yapÄ±landÄ±rÄ±lmÄ±ÅŸ verileri kontrol edin\n4. **GÃ¼venlik:** HTTPS ve gÃ¼venlik baÅŸlÄ±klarÄ±nÄ± doÄŸrulayÄ±n\n\n---\n"@\n    }\n\n    # Test Ã¶zeti bÃ¶lÃ¼mÃ¼\n    $testSummarySection = @"\n\n## ğŸ§ª PWA Test SonuÃ§larÄ±\n\n### Son Test Ã–zeti\n- **Tarih:** $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")\n- **BaÅŸarÄ± OranÄ±:** $(if ($TestResults.summary.success_rate) { $TestResults.summary.success_rate } else { 0 })%\n- **GeÃ§en Testler:** $(if ($TestResults.summary.passed_tests) { $TestResults.summary.passed_tests } else { 0 })\n- **BaÅŸarÄ±sÄ±z Testler:** $(if ($TestResults.summary.failed_tests) { $TestResults.summary.failed_tests } else { 0 })\n- **Atlanan Testler:** $(if ($TestResults.summary.skipped_tests) { $TestResults.summary.skipped_tests } else { 0 })\n- **Toplam Testler:** $(if ($TestResults.summary.total_tests) { $TestResults.summary.total_tests } else { 0 })\n- **Test SÃ¼resi:** $(if ($TestResults.summary.duration_seconds) { $TestResults.summary.duration_seconds } else { 0 }) saniye\n- **Script Versiyonu:** $(if ($TestResults.script_version) { $TestResults.script_version } else { 'N/A' })\n\n### Test Kategorileri\n| Kategori | GeÃ§en | BaÅŸarÄ±sÄ±z | Toplam |\n|----------|-------|-----------|--------|\n| Temel PWA | $(if ($TestResults.categories.basic.passed) { $TestResults.categories.basic.passed } else { 0 }) | $(if ($TestResults.categories.basic.failed) { $TestResults.categories.basic.failed } else { 0 }) | $(if ($TestResults.categories.basic.total) { $TestResults.categories.basic.total } else { 0 }) |\n| Performans | $(if ($TestResults.categories.performance.passed) { $TestResults.categories.performance.passed } else { 0 }) | $(if ($TestResults.categories.performance.failed) { $TestResults.categories.performance.failed } else { 0 }) | $(if ($TestResults.categories.performance.total) { $TestResults.categories.performance.total } else { 0 }) |\n| GÃ¼venlik | $(if ($TestResults.categories.security.passed) { $TestResults.categories.security.passed } else { 0 }) | $(if ($TestResults.categories.security.failed) { $TestResults.categories.security.failed } else { 0 }) | $(if ($TestResults.categories.security.total) { $TestResults.categories.security.total } else { 0 }) |\n| SEO | $(if ($TestResults.categories.seo.passed) { $TestResults.categories.seo.passed } else { 0 }) | $(if ($TestResults.categories.seo.failed) { $TestResults.categories.seo.failed } else { 0 }) | $(if ($TestResults.categories.seo.total) { $TestResults.categories.seo.total } else { 0 }) |\n| Yasal | $(if ($TestResults.categories.legal.passed) { $TestResults.categories.legal.passed } else { 0 }) | $(if ($TestResults.categories.legal.failed) { $TestResults.categories.legal.failed } else { 0 }) | $(if ($TestResults.categories.legal.total) { $TestResults.categories.legal.total } else { 0 }) |\n\n$trendReportSection$failureAnalysisSection\n\n### DetaylÄ± Test SonuÃ§larÄ±\n```json\n$($TestResults.detailed_results | ConvertTo-Json -Depth 4)\n```\n\n### Sistem Bilgileri\n- **Test OrtamÄ±:** $(if ($TestResults.system_info.hostname) { $TestResults.system_info.hostname } else { $env:COMPUTERNAME })\n- **KullanÄ±cÄ±:** $(if ($TestResults.system_info.username) { $TestResults.system_info.username } else { $env:USERNAME })\n- **PowerShell Versiyonu:** $($PSVersionTable.PSVersion.ToString())\n- **OS:** $([System.Environment]::OSVersion.VersionString)\n\n---\n*Bu rapor otomatik olarak oluÅŸturulmuÅŸtur - $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")*\n*Sonraki otomatik test: $(Get-Date).AddDays(7).ToString("yyyy-MM-dd 09:00"))*\n*Test Script Versiyonu: $(if ($TestResults.script_version) { $TestResults.script_version } else { '4.0' })*\n\n"@\n\n    # Eski test sonuÃ§larÄ±nÄ± temizle\n    $pattern = "(?s)## ğŸ§ª PWA Test SonuÃ§larÄ±.*?\*Test Script Versiyonu:.*?\*"\n    if ($readmeContent -match $pattern) {\n        $readmeContent = $readmeContent -replace $pattern, ""\n        Write-Host "ğŸ§¹ Eski test sonuÃ§larÄ± temizlendi" -ForegroundColor Yellow\n    }\n\n    # Yeni iÃ§eriÄŸi ekle\n    $updatedContent = $readmeContent + $testSummarySection\n\n    # README.md'yi gÃ¼ncelle\n    $updatedContent | Out-File -FilePath $ReadmePath -Encoding UTF8\n\n    Write-Host "âœ… README.md trend raporu ile gÃ¼ncellendi: $ReadmePath" -ForegroundColor Green\n    Write-Host "ğŸ“Š Trend yÃ¶nÃ¼: $(if ($TrendAnalysis.direction) { $TrendAnalysis.direction } else { 'stable' })" -ForegroundColor White\n    Write-Host "ğŸ“ˆ BaÅŸarÄ± oranÄ±: $(if ($TestResults.summary.success_rate) { $TestResults.summary.success_rate } else { 0 })%" -ForegroundColor White\n\n    Write-TestLog "README.md updated with trend report: $ReadmePath (Success Rate: $(if ($TestResults.summary.success_rate) { $TestResults.summary.success_rate } else { 0 })%, Trend: $(if ($TrendAnalysis.direction) { $TrendAnalysis.direction } else { 'stable' }))"\n\n    return $true\n}\n\n# Ana test akÄ±ÅŸÄ±nÄ±n sonuna trend raporu ve baÅŸarÄ±sÄ±zlÄ±k analizi ekle\n$failureAnalysis = Analyze-FailedTests -TestResults $testResults\n\n# Trend analizini al\n$trendAnalysis = Get-TestHistoryStatistics\n\n# README.md'yi trend raporu ile gÃ¼ncelle\nUpdate-READMEWithTrendReport -TestResults $testResults -TrendAnalysis $trendAnalysis\n\n# Test tamamlandÄ± mesajÄ±\nWrite-Host "`nğŸ‰ PWA Test Otomasyonu TamamlandÄ±!" -ForegroundColor Green\nWrite-Host "ğŸ“Š SonuÃ§lar kaydedildi ve raporlar gÃ¼ncellendi" -ForegroundColor White\nWrite-Host "ğŸ“ˆ Trend analizi: $(if ($trendAnalysis.direction) { $trendAnalysis.direction } else { 'stable' })" -ForegroundColor White\nWrite-Host "ğŸ·ï¸ Badge'ler gÃ¼ncellendi ve README.md'ye eklendi" -ForegroundColor White\n\n# Webhook bildirimleri gÃ¶nder\nif ($SlackWebhook -or $DiscordWebhook) {\n    Send-WebhookNotification -TestResults $testResults -TrendAnalysis $trendAnalysis\n}\n\nWrite-TestLog "PWA Test Automation completed successfully"\n