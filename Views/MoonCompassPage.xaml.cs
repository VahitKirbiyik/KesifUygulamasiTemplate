using System;\nusing System.Threading.Tasks;\nusing Microsoft.Maui.Controls;\nusing KesifUygulamasiTemplate.ViewModels;\nusing KesifUygulamasiTemplate.Services;\nusing Microsoft.Maui.Devices.Sensors;\nusing KesifUygulamasiTemplate.Resources.Strings;\n\nnamespace KesifUygulamasiTemplate.Views\n{\n    public partial class MoonCompassPage : ContentPage\n    {\n        private readonly MoonCompassViewModel _viewModel;\n        private readonly LocalizationService _localizationService;\n\n        public MoonCompassPage(MoonCompassViewModel viewModel)\n        {\n            InitializeComponent();\n            _viewModel = viewModel ?? throw new ArgumentNullException(nameof(viewModel));\n            _localizationService = LocalizationService.Instance;\n            BindingContext = _viewModel;\n\n            // Dil değişikliklerini dinle\n            _localizationService.PropertyChanged += (s, e) =>\n            {\n                if (string.IsNullOrEmpty(e.PropertyName) || e.PropertyName == nameof(LocalizationService.CurrentCulture))\n                {\n                    // Sayfadaki tüm çevirileri güncelle\n                    OnPropertyChanged(nameof(Title));\n                }\n            };\n        }\n\n        protected override async void OnAppearing()\n        {\n            base.OnAppearing();\n\n            try\n            {\n                // Gerçek konum almanın yerine sabit bir konum kullanılıyor\n                // Gerçek bir uygulamada burada Geolocation servisi kullanılabilir\n                await _viewModel.LoadMoonDataAsync(40.7128, -74.0060);\n            }\n            catch (Exception ex)\n            {\n                await DisplayAlert(AppResources.Error, ex.Message, AppResources.OK);\n            }\n        }\n    }\n}\n