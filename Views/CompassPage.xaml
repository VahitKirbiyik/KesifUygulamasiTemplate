<?xml version="1.0" encoding="utf-8" ?>\n<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"\n             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"\n             x:Class="KesifUygulamasiTemplate.Views.CompassPage"\n             Title="Pusula">\n    \n    <Grid RowDefinitions="Auto,*,Auto" Padding="20">\n        <!-- Header -->\n        <Label Grid.Row="0" \n               Text="Pusula" \n               FontSize="28" \n               FontAttributes="Bold"\n               HorizontalOptions="Center" \n               Margin="0,10,0,20"/>\n\n        <Grid Grid.Row="1">\n            <!-- Compass Visual and Direction -->\n            <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center">\n                <!-- Loading Indicator -->\n                <ActivityIndicator IsRunning="{Binding IsBusy}" \n                                   IsVisible="{Binding IsBusy}"\n                                   HorizontalOptions="Center" \n                                   VerticalOptions="Center"\n                                   HeightRequest="50" \n                                   WidthRequest="50" />\n\n                <!-- Error Message -->\n                <Label Text="{Binding ErrorMessage}" \n                       IsVisible="{Binding ErrorMessage, StringFormat='{0}', TargetNullValue=''}"\n                       TextColor="Red"\n                       HorizontalOptions="Center"\n                       Margin="0,10" />\n                \n                <!-- Compass Image -->\n                <Grid HeightRequest="300" WidthRequest="300">\n                    <Image Source="compass.png" \n                           HeightRequest="300"\n                           WidthRequest="300"\n                           Rotation="{Binding Heading, Converter={StaticResource NegativeConverter}}" />\n                    \n                    <Image Source="compass_arrow.png" \n                           HeightRequest="150"\n                           WidthRequest="150"\n                           HorizontalOptions="Center"\n                           VerticalOptions="Center" />\n                </Grid>\n                \n                <!-- Heading Display -->\n                <Label Text="{Binding Heading, StringFormat='Y�n: {0:F1}�'}" \n                       FontSize="24"\n                       HorizontalOptions="Center"\n                       Margin="0,20" />\n                \n                <!-- Calibration Status -->\n                <ProgressBar Progress="{Binding CalibrationAccuracy}"\n                             IsVisible="{Binding IsCalibrating}"\n                             WidthRequest="200"\n                             Margin="0,10" />\n                \n                <Label Text="{Binding CalibrationAccuracy, StringFormat='Kalibrasyon: {0:P0}'}"\n                       IsVisible="{Binding IsCalibrating}"\n                       HorizontalOptions="Center" />\n            </VerticalStackLayout>\n        </Grid>\n        \n        <!-- Control Buttons -->\n        <HorizontalStackLayout Grid.Row="2" \n                               HorizontalOptions="Center" \n                               Spacing="20"\n                               Margin="0,20,0,10">\n            <Button Text="Ba�lat" \n                    Command="{Binding StartCompassCommand}"\n                    IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}" />\n            \n            <Button Text="Durdur" \n                    Command="{Binding StopCompassCommand}"\n                    IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}" />\n            \n            <Button Text="Kalibre Et" \n                    Command="{Binding CalibrateCommand}"\n                    IsVisible="{Binding NeedsCalibration}" />\n        </HorizontalStackLayout>\n    </Grid>\n</ContentPage>