<?xml version="1.0" encoding="utf-8" ?>\n<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"\n             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"\n             xmlns:ext="clr-namespace:KesifUygulamasiTemplate.Extensions"\n             xmlns:controls="clr-namespace:KesifUygulamasiTemplate.Controls"\n             x:Class="KesifUygulamasiTemplate.Views.MoonCompassPage"\n             Title="{ext:TranslateBinding Key=MoonCompass}">\n\n    <RefreshView Command="{Binding RefreshCommand}" IsRefreshing="{Binding IsBusy}">\n        <ScrollView>\n            <Grid RowDefinitions="Auto,*,Auto" Padding="20" RowSpacing="15">\n                \n                <!-- Loading Indicator -->\n                <ActivityIndicator Grid.Row="0"\n                                   IsRunning="{Binding IsBusy}" \n                                   IsVisible="{Binding IsBusy}"\n                                   HorizontalOptions="Center" \n                                   HeightRequest="50" \n                                   WidthRequest="50"\n                                   Color="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource SecondaryColor}}"\n                                   AutomationId="LoadingIndicator"\n                                   SemanticProperties.Description="{ext:TranslateBinding Key=Loading}" />\n\n                <!-- Main Content -->\n                <VerticalStackLayout Grid.Row="1" \n                                     Spacing="20" \n                                     IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}">\n                    \n                    <!-- Error Message -->\n                    <Label Text="{Binding ErrorMessage}" \n                           IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotEmptyConverter}}"\n                           TextColor="{AppThemeBinding Light=Red, Dark=LightCoral}"\n                           HorizontalOptions="Center"\n                           SemanticProperties.HeadingLevel="Level2"\n                           SemanticProperties.Description="{ext:TranslateBinding Key=Error}" />\n\n                    <!-- Ay Fazi Gorsellestirme -->\n                    <Frame IsVisible="{Binding HasMoonData}"\n                           CornerRadius="20"\n                           Padding="20"\n                           BackgroundColor="{AppThemeBinding Light=#f8f9fa, Dark=#2d3436}"\n                           HasShadow="True"\n                           BorderColor="{AppThemeBinding Light=#dee2e6, Dark=#636e72}"\n                           SemanticProperties.Description="{ext:TranslateBinding Key=MoonPhaseVisualization}">\n                        <VerticalStackLayout Spacing="15">\n                            \n                            <!-- Ay Fazi Emoji ve Isim -->\n                            <HorizontalStackLayout HorizontalOptions="Center" Spacing="10">\n                                <Label Text="{Binding MoonPhaseEmoji}" \n                                       FontSize="48" />\n                                <Label Text="{Binding MoonPhaseName}" \n                                       FontSize="24" \n                                       FontAttributes="Bold"\n                                       VerticalOptions="Center"\n                                       TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}" />\n                            </HorizontalStackLayout>\n\n                            <!-- SkiaSharp Ay Gorsellestirmesi -->\n                            <controls:MoonPhaseView \n                                Phase="{Binding MoonData.Phase}"\n                                Illumination="{Binding MoonData.Illumination}"\n                                MoonColor="{AppThemeBinding Light=#f39c12, Dark=#f1c40f}"\n                                ShadowColor="{AppThemeBinding Light=#2c3e50, Dark=#34495e}"\n                                HeightRequest="200"\n                                WidthRequest="200"\n                                HorizontalOptions="Center" />\n\n                            <!-- Aydinlanma Bilgisi -->\n                            <Label Text="{Binding FormattedIllumination}"\n                                   FontSize="18"\n                                   HorizontalOptions="Center"\n                                   TextColor="{AppThemeBinding Light=#636e72, Dark=#b2bec3}" />\n                        </VerticalStackLayout>\n                    </Frame>\n\n                    <!-- Ay Bilgileri Karti -->\n                    <Frame IsVisible="{Binding HasMoonData}"\n                           CornerRadius="16"\n                           Padding="20"\n                           BackgroundColor="{AppThemeBinding Light=#f8f9fa, Dark=#2d3436}"\n                           HasShadow="True"\n                           BorderColor="{AppThemeBinding Light=#dee2e6, Dark=#636e72}"\n                           SemanticProperties.Description="{ext:TranslateBinding Key=MoonDataCard}">\n                        <VerticalStackLayout Spacing="15">\n\n                            <Label Text="{ext:TranslateBinding Key=MoonInformation}"\n                                   FontAttributes="Bold"\n                                   FontSize="20"\n                                   HorizontalOptions="Center"\n                                   TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}"\n                                   SemanticProperties.HeadingLevel="Level2" />\n\n                            <Grid RowSpacing="12" ColumnSpacing="15">\n                                <Grid.RowDefinitions>\n                                    <RowDefinition Height="Auto"/>\n                                    <RowDefinition Height="Auto"/>\n                                    <RowDefinition Height="Auto"/>\n                                    <RowDefinition Height="Auto"/>\n                                    <RowDefinition Height="Auto"/>\n                                    <RowDefinition Height="Auto"/>\n                                </Grid.RowDefinitions>\n                                <Grid.ColumnDefinitions>\n                                    <ColumnDefinition Width="Auto"/>\n                                    <ColumnDefinition Width="*"/>\n                                </Grid.ColumnDefinitions>\n\n                                <!-- Dogus Saati -->\n                                <Label Grid.Row="0" Grid.Column="0"\n                                       Text="{ext:TranslateBinding Key=MoonRise}"\n                                       FontAttributes="Bold"\n                                       TextColor="{AppThemeBinding Light=#636e72, Dark=#b2bec3}" />\n                                <Label Grid.Row="0" Grid.Column="1"\n                                       Text="{Binding FormattedRiseTime}"\n                                       TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}"\n                                       SemanticProperties.Description="{ext:TranslateBinding Key=MoonRiseTime}" />\n\n                                <!-- Batis Saati -->\n                                <Label Grid.Row="1" Grid.Column="0"\n                                       Text="{ext:TranslateBinding Key=MoonSet}"\n                                       FontAttributes="Bold"\n                                       TextColor="{AppThemeBinding Light=#636e72, Dark=#b2bec3}" />\n                                <Label Grid.Row="1" Grid.Column="1"\n                                       Text="{Binding FormattedSetTime}"\n                                       TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}"\n                                       SemanticProperties.Description="{ext:TranslateBinding Key=MoonSetTime}" />\n\n                                <!-- Ay Fazi -->\n                                <Label Grid.Row="2" Grid.Column="0"\n                                       Text="{ext:TranslateBinding Key=MoonPhase}"\n                                       FontAttributes="Bold"\n                                       TextColor="{AppThemeBinding Light=#636e72, Dark=#b2bec3}" />\n                                <Label Grid.Row="2" Grid.Column="1"\n                                       Text="{Binding FormattedPhase}"\n                                       TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}"\n                                       SemanticProperties.Description="{ext:TranslateBinding Key=MoonPhasePercentage}" />\n\n                                <!-- Azimuth -->\n                                <Label Grid.Row="3" Grid.Column="0"\n                                       Text="{ext:TranslateBinding Key=Azimuth}"\n                                       FontAttributes="Bold"\n                                       TextColor="{AppThemeBinding Light=#636e72, Dark=#b2bec3}" />\n                                <Label Grid.Row="3" Grid.Column="1"\n                                       Text="{Binding FormattedAzimuth}"\n                                       TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}" />\n\n                                <!-- Altitude -->\n                                <Label Grid.Row="4" Grid.Column="0"\n                                       Text="{ext:TranslateBinding Key=Altitude}"\n                                       FontAttributes="Bold"\n                                       TextColor="{AppThemeBinding Light=#636e72, Dark=#b2bec3}" />\n                                <Label Grid.Row="4" Grid.Column="1"\n                                       Text="{Binding FormattedAltitude}"\n                                       TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}" />\n\n                                <!-- Mesafe -->\n                                <Label Grid.Row="5" Grid.Column="0"\n                                       Text="{ext:TranslateBinding Key=Distance}"\n                                       FontAttributes="Bold"\n                                       TextColor="{AppThemeBinding Light=#636e72, Dark=#b2bec3}" />\n                                <Label Grid.Row="5" Grid.Column="1"\n                                       Text="{Binding FormattedDistance}"\n                                       TextColor="{AppThemeBinding Light=#2d3436, Dark=#ddd}" />\n                            </Grid>\n                        </VerticalStackLayout>\n                    </Frame>\n\n                    <!-- Veri Yok Mesaji -->\n                    <Label IsVisible="{Binding HasMoonData, Converter={StaticResource InvertedBoolConverter}}"\n                           Text="{ext:TranslateBinding Key=NoMoonData}"\n                           HorizontalOptions="Center"\n                           TextColor="{AppThemeBinding Light=#6c757d, Dark=#adb5bd}"\n                           FontSize="16"\n                           SemanticProperties.Description="{ext:TranslateBinding Key=NoMoonData}" />\n\n                </VerticalStackLayout>\n\n                <!-- Aksiyon Butonlari -->\n                <StackLayout Grid.Row="2" \n                            Orientation="Horizontal" \n                            HorizontalOptions="Center" \n                            Spacing="16">\n                    \n                    <Button Text="{ext:TranslateBinding Key=GetLocation}"\n                            Command="{Binding GetLocationCommand}"\n                            IsEnabled="{Binding IsNotBusy}"\n                            BackgroundColor="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource SecondaryColor}}"\n                            TextColor="White"\n                            CornerRadius="25"\n                            Padding="20,12"\n                            SemanticProperties.Description="{ext:TranslateBinding Key=GetCurrentLocation}"\n                            AutomationId="GetLocationButton" />\n\n                    <Button Text="{ext:TranslateBinding Key=Share}"\n                            Command="{Binding ShareCommand}"\n                            IsEnabled="{Binding HasMoonData}"\n                            BackgroundColor="{AppThemeBinding Light={StaticResource AccentColor}, Dark=#e67e22}"\n                            TextColor="White"\n                            CornerRadius="25"\n                            Padding="20,12"\n                            SemanticProperties.Description="{ext:TranslateBinding Key=ShareMoonData}"\n                            AutomationId="ShareButton" />\n                </StackLayout>\n\n            </Grid>\n        </ScrollView>\n    </RefreshView>\n</ContentPage>\n